

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=dark>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/logo.png">
  <link rel="icon" href="/img/logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Hailey">
  <meta name="keywords" content="Notebook">
  
    <meta name="description" content="基于北大金融经济学公开课《金融经济学二十五讲》的笔记，此课程特别值得作为经济学入门，而有过基础的朋友也推荐阅读，适合对知识进行一个系统的梳理和扩充！">
<meta property="og:type" content="article">
<meta property="og:title" content="【课程】金融经济学二十五讲">
<meta property="og:url" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/index.html">
<meta property="og:site_name" content="Borderland">
<meta property="og:description" content="基于北大金融经济学公开课《金融经济学二十五讲》的笔记，此课程特别值得作为经济学入门，而有过基础的朋友也推荐阅读，适合对知识进行一个系统的梳理和扩充！">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic4-1.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic4-2.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic4-3.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic5-1.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic5-2.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic5-3.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic5-4.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic6-1.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic8-1.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic8-2.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic9-1.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic22-1.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic22-2.jpg">
<meta property="og:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic23-1.jpg">
<meta property="article:published_time" content="2022-01-27T14:25:01.000Z">
<meta property="article:modified_time" content="2022-03-07T15:39:25.553Z">
<meta property="article:author" content="Hailey">
<meta property="article:tag" content="Financial Economics">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://achlier.github.io/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic4-1.jpg">
  
  
  
  <title>【课程】金融经济学二十五讲 - Borderland</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"achlier.github.io","root":"/","version":"1.9.0","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":false,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Achlier&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="【课程】金融经济学二十五讲"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-01-27 22:25" pubdate>
          January 27, 2022 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          65k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          543 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">【课程】金融经济学二十五讲</h1>
            
            <div class="markdown-body">
              
              <blockquote>
<p>基于北大金融经济学公开课《金融经济学二十五讲》的笔记，此课程特别值得作为经济学入门，而有过基础的朋友也推荐阅读，适合对知识进行一个系统的梳理和扩充！</p>
</blockquote>
<span id="more"></span>
<h1 id="第-1-讲-金融经济学导论"><a href="#第-1-讲-金融经济学导论" class="headerlink" title="第 1 讲 金融经济学导论"></a>第 1 讲 金融经济学导论</h1><h3 id="1-什么是金融和金融经济学？"><a href="#1-什么是金融和金融经济学？" class="headerlink" title="1. 什么是金融和金融经济学？"></a>1. 什么是金融和金融经济学？</h3><ul>
<li>Financial economics: allocation of <strong>financial assets</strong><ul>
<li>Financial assets : 一种契约</li>
<li>Assets : claims of <strong>future</strong> economics benefit<ul>
<li>Future : 跨期的，在现在与未来交换资源，存在风险 (Risk)</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>货币的发行、流通和回笼，贷款的发放和收回，存款的存入和提取，汇兑的往来等经济活动属于货币经济学 (monetary economics)，是宏观经济学 (macroeconomics) 的一种分支</p>
</blockquote>
<h3 id="2-金融经济学的主要内容"><a href="#2-金融经济学的主要内容" class="headerlink" title="2. 金融经济学的主要内容"></a>2. 金融经济学的主要内容</h3><script type="math/tex; mode=display">
\begin{matrix}
& \text{Investment (Price)} &\\
\text{Fund suppliers} & \rightleftharpoons & \text{Funds demenders}\\
(\text{Asset buyers}) & \text{Return} & (\text{Asset sellers})\\
\end{matrix}</script><ul>
<li><p>Supply and demand derived from human behavior (dynamic, uncertainty)</p>
<blockquote>
<p>对需求方单位为公司时，相关知识为 Corporates finance</p>
</blockquote>
<ul>
<li>Equilibrium pricing (Absolute pricing)</li>
<li>No-Arbitrage pricing</li>
<li>Financial frictions<ul>
<li>Maturity mismatch</li>
<li>信息不对称</li>
</ul>
</li>
</ul>
</li>
<li><p>Market efficiency - Fama 尤金·法马</p>
<ul>
<li>vs Shiller 罗伯特·席勒<ul>
<li>Behavior finance : irrationality, limited arbitrage</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>当年的诺贝尔经济学奖还颁给了汉森 (Lars Peter Hansen)，以表彰他发展了广义矩估计 (GMM) 这种计量方法的成就。GMM 方法可被用来检验资产价格是否有效。所以可以玩笑地说 2013 年诺贝尔经济学奖被颁给了一个相信有效市场的人，一个不信有效市场的人，以及一个检验市场是否有效的人。</p>
</blockquote>
<script type="math/tex; mode=display">
E[\tilde{r}]=\frac{E[\tilde{X}]}{P}-1</script><ul>
<li>资产的期望回报率等于资产的期望支付除以其当前价格再减 1</li>
<li>资产当前价格越高，期望回报率越低。</li>
</ul>
<h4 id="例子1-圣彼得堡悖论（St-Petersburg-Paradox）"><a href="#例子1-圣彼得堡悖论（St-Petersburg-Paradox）" class="headerlink" title="例子1 : 圣彼得堡悖论（St. Petersburg Paradox）"></a>例子1 : 圣彼得堡悖论（St. Petersburg Paradox）</h4><p>假设有这么一个抛硬币的赌局。第 1 次抛硬币，如果出现正面，赢 1 块钱，赌局结束。如果出反面，则不输也不赢，再继续抛第 2 次。第 2 次如果抛出正面，赢 2 块钱，赌局结束。如果还是出反面，仍然不输不赢，再抛第 3 次。如此继续，只要没有抛到正面，就一直抛下去，直到出现正面为止。期间抛出反面都是不输不赢，但如果是第 <em>n</em> 次抛出正面，则赢 $2^{n-1}$ 块钱。请问在这个赌局中赌徒的期望收益是多少？你愿意为参与这个赌局支付多高的门票钱？</p>
<script type="math/tex; mode=display">
\frac12\times 1+\frac14\times 2+...+\frac1{2^n}\times 2^{n-1}+...=+\infty</script><ul>
<li>但并没有考虑Risk</li>
<li>风险大的资产需要给予更大的因为风险而增加的期望回报率-<strong>风险溢价</strong>（risk premium）</li>
<li>效用并不随收益的增加而线性增加，存在边际效益递减的现象。贝努利用对数效用来衡量人从某一收益中得到的效用。这样一来，这个赌局带来的期望效用就是</li>
</ul>
<script type="math/tex; mode=display">
\sum_{t=1}^\infty(\frac12)^t·ln(2^{t-1})=ln2\sum_{t=1}^\infty(\frac12)^t·(t-1)=ln2</script><h4 id="例子2"><a href="#例子2" class="headerlink" title="例子2"></a>例子2</h4><p>假设一家药品研发公司和一家钢铁公司的股票有相同的期望（红利）支付。但因为药品研发不确性很高，药品研发公司红利支付的波动性会更大。在这两家公司中，当前哪家的股票价格应该更高？</p>
<p>药品公司的分红波动确实更大，但这就说明药品公司风险更大了吗？在对风险的本质有更深刻认识后，我们就能知道其实相对而言，药品公司风险更小。风险主要关注的是 $\beta$ 值</p>
<h4 id="例子3"><a href="#例子3" class="headerlink" title="例子3"></a>例子3</h4><p>假设有甲和乙两个基金经理。在过去 3 年中，甲的投资回报率比乙更高，而且甲的回报率的波动也比乙更小，可不可说甲比乙更优秀？</p>
<p>必须考虑甲乙投资的领域，甲可能专注于蓝筹股，蓝筹股总体回报比普通股高。</p>
<h1 id="第-2-讲-金融市场概览"><a href="#第-2-讲-金融市场概览" class="headerlink" title="第 2 讲 金融市场概览"></a>第 2 讲 金融市场概览</h1><h3 id="1-金融市场的功能"><a href="#1-金融市场的功能" class="headerlink" title="1. 金融市场的功能"></a>1. 金融市场的功能</h3><p>金融市场（financial market）是通过交易金融资产来实现资金融通的市场机制</p>
<p><strong>三大功能</strong></p>
<ol>
<li>流动性 (Liquidity)</li>
<li>价格发现 (Price discovery)/ 信息透明</li>
<li>便利，降低成本</li>
</ol>
<h3 id="2-金融市场的分类"><a href="#2-金融市场的分类" class="headerlink" title="2. 金融市场的分类"></a>2. 金融市场的分类</h3><ul>
<li><p>按交易资产的特性</p>
<ul>
<li>权益市场 (equity market) - 股票市场</li>
<li>固定收益市场 (fixed-income market)</li>
</ul>
<blockquote>
<p>金融资产大致分为 : </p>
<ol>
<li>权益工具 (equity instrument) - 股票 (stock)</li>
<li>债务工具 (debt instrument) - 债券 (bond) </li>
</ol>
<p>股票市场和债券市场<strong>市值</strong>差不多，但股票的<strong>社会融资总量</strong> (total social financing) 远远低于债券</p>
</blockquote>
</li>
<li><p>按交易和发行的先后关系</p>
<ul>
<li><p>一级市场 (primary market) </p>
<blockquote>
<p>证券发行需要<strong>投资银行家</strong> (investment banker) 这种专业人士来协助。相关的证券发行业务便叫做投资银行业务。<strong>投资银行</strong> (investment bank) ，也叫做<strong>证券公司</strong> (security firm) ，就是专门从事这种业务的金融机构。在当前金融混业经营的大潮下，商业银行 (commercial bank) 也能从事投资银行业务</p>
</blockquote>
<ul>
<li><p>公开发行 (IPO/ public offering)，私募发行 (private placement)</p>
<blockquote>
<p>但因为证券发行给大量公众后影响比较大，所以监管者对发行主体的经营状况和信息披露有较高要求。而私募则是向数量有限的特定投资者（往往是经验丰富的机金融经济学构投资者）发行证券的方式。私募发行的<strong>门槛较低</strong>，但能够筹集的<strong>资金量相对较小</strong>。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>二级市场 (secondary market)</p>
</li>
</ul>
</li>
<li><p>按交易分割时间</p>
<ul>
<li><p>现货市场 (spot market)</p>
</li>
<li><p>衍生品市场 (derivative market)</p>
<blockquote>
<p>衍生品的过度发展是 2008 年次贷危机 (Subprime Crisis) 发生的一个重要原因。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>其他分类方式</p>
<ul>
<li>货币市场 (money market) 和资本市场 (capital market)<ul>
<li>短于一年-货币市场，长于一年-资本市场</li>
</ul>
</li>
<li>交易所市场 (exchange market) 和场外交易市场 (OTC)<ul>
<li>最大的场外交易市场-银行间市场</li>
<li>协商进行</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-主要金融机构"><a href="#3-主要金融机构" class="headerlink" title="3.主要金融机构"></a>3.主要金融机构</h3><ul>
<li><p>存款类金融机构 (银行) - 中农工建交</p>
<blockquote>
<p>商业银行的放贷能力主要受到两方面因素的影响</p>
<ul>
<li>第一，其手中握有的基础货币 （种子) 有多少</li>
<li>第二，给定手中的基础货币，商业银行放贷的能力有多大。这是由<strong>存款准备金率</strong> (required reserve ratio) 决定的</li>
</ul>
<p>如果减少基础货币数量，或升高存款准备金率，就能减少全社会货币总量。由于中央银行的重要任务就是调控全社会货币总量，所以中央银行还被称为<strong>货币当局</strong> (monetary authority)</p>
<p>从 2010 年开始，宏观政策逐步转向紧缩，对信贷投放的控制越来越严。在这种情况下，许多银行利用信托的通道，将之前的贷款转换为信托产品，从而规避监管者对信贷投放的管控。在这样的背景下，信托业务得到了大发展，规模高速跃进。但这也带来了影子银行 (shadow banking) 的风险</p>
<p>银行信贷是一种债权型的融资，并不适合所有非金融企业的融资需求。比如，新兴的成长性公司就更需要股权型融资的支持</p>
</blockquote>
</li>
<li><p>非存款类金融机构 : 证券公司，保险公司，信托公司，基金公司</p>
<ul>
<li><p>两高一剩行业：两高行业指高污染、高能耗的资源性的行业；一剩行业即产能过剩行业。主要包括钢铁、造纸、电解铝、平板玻璃。</p>
</li>
<li><p>两高一剩行业贷款被约束，通常会找证券公司放贷款</p>
<blockquote>
<p>证券公司 (简称券商) 也叫做投资银行，其主要功能是帮助证券发行者发行证券。换言之，证券公司干的就是把各种经济利益包装成金融资产出售。正因为此，证券公司也被叫做卖方（sell side）。基金公司、保险公司、养老金、主权基金是常见的买方机构。基金公司向广大公众募集资金，进而投资到金融市场中。</p>
<p>与基金公司相同，信托公司也是向外募集资金来投资。但信托公司募集来的资金的投向更广（基金公司主要投资于股票债券市场）。且信托公司能够做到破产隔离。某人如果将其资金投入到一个信托计划中，即使这人破产了，其信托计划中的资产也不会被清算。信托公司在一定程度上成为了其他金融机构（主要是银行）规避监管的手段。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>金融监管机构</p>
<ul>
<li><p>人民银行</p>
</li>
<li><p>中国银行业监督管理委员会</p>
</li>
<li><p>中国银行保险监管委员会</p>
</li>
<li><p>中国证券监督管理委员会</p>
</li>
<li><p>行业协会</p>
</li>
<li><p>交易所</p>
<blockquote>
<p>2018年两会期间,根据公布的国务院机构改革方案,银监会与保监会职责整合组建中国银行保险监督管理委员会,简称银保监会,与中国人民银行、证监会合称”一行两会”</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="附录-A-真实世界中的货币创造过程"><a href="#附录-A-真实世界中的货币创造过程" class="headerlink" title="附录 A. 真实世界中的货币创造过程"></a>附录 A. 真实世界中的货币创造过程</h3><p><strong>A.1 货币的创造</strong></p>
<p>按照流动性的差异在不同的口径上统计货币的总量。最常用的口径是 M0、M1 (狭义货币) 和 M2 (广义货币)</p>
<ul>
<li>M0=流通中的货币</li>
<li>M1=M0+企业活期存款</li>
<li>M2=M1+企业定期存款+居民储蓄存款 (包括活期和定期)</li>
</ul>
<blockquote>
<p>央行所发行的货币<strong>只</strong>是直接投放给金融机构（主要是商业银行）。这里央行发行的货币被称为<strong>“基础货币”</strong> (base money) ，或者<strong>“高能货币”</strong> (high-powered money)。在中国金融统计体系中（也是 IMF 的数据统计体系中），基础货币对应着<strong>“储备货币”</strong> (reserve money) 这个统计口径。</p>
<p>商业银行通过以以基础货币数倍的规模向非金融企业和居民发放贷款创造货币。商业银行能够以基础货币多少倍的规模向外发放贷款，被称为<strong>“货币乘数”</strong>（monetary multiplier）。货币乘数高度受到央行所设定的存款准备金率的影响</p>
<p>所谓基础货币，其实就是商业银行（或其他金融机构）在中央银行的存款。但与个人与企业在银行的存款不一样，银行在央行的存款要分成两部分，其中一部分是央行规定的不可动用的部分，叫做<strong>“法定存款准备金”</strong> (required deposit reserve) ，另一部分银行可以自由使用，叫做<strong>“超额存款准备金”</strong> (excess reserve)。法定存款准备金是央行规定的，商业银行应该为其存款准备的备付金。法定存款准备金与存款之间的比例叫做<strong>“法定存款准备金率”</strong> (required reserve ratio，简称 RRR)</p>
</blockquote>
<p>如果央行设定的超额存款准备金率是 RRR，那么银行用规模为 H 的超额存款准备金能够发放的贷款总额就是如下等比数列之和</p>
<script type="math/tex; mode=display">
H+(1-RRR)H+(1-RRR)^2H+...=\frac H{RRR}</script><p>其中的 $\frac 1{RRR}$ 就是货币乘数</p>
<h1 id="第-3-讲-利率及债券价值分析"><a href="#第-3-讲-利率及债券价值分析" class="headerlink" title="第 3 讲 利率及债券价值分析"></a>第 3 讲 利率及债券价值分析</h1><h3 id="1-真实世界中的利率"><a href="#1-真实世界中的利率" class="headerlink" title="1. 真实世界中的利率"></a>1. 真实世界中的利率</h3><p><strong>我国的几种代表性利率</strong></p>
<ul>
<li><p>银行间AA债券收益率</p>
</li>
<li><p>十年期国债收益率 (长期基准利率)</p>
</li>
<li><p>银行间7天回购利率</p>
</li>
<li><p>1年期定存基准利率</p>
<blockquote>
<p>这些债券收益率与无风险利率之间的差异就是<strong>信用利差</strong> (credit spread)，也可广义地叫做<strong>风险溢价</strong> (risk premium) 。市场中有专门的评级机构 (rating agency) 基于债券本身及发债主体的状况来做信用评级 (credit rating)</p>
<p>在我国国内，长期债券的最高信用评级是 AAA。AA 的债券收益率是一个较有代表性的风险利率。在国内，一个债券的评级如果低于 AA，愿意投资的机构数量就会大大下降。</p>
</blockquote>
</li>
</ul>
<h3 id="2-计息习惯"><a href="#2-计息习惯" class="headerlink" title="2. 计息习惯"></a>2. 计息习惯</h3><ul>
<li><p>Simple interest (单利) : 利息不计入本金 $A=(1+nr)$</p>
</li>
<li><p>Compound interest (复利) $A(1+r)^n$</p>
<ul>
<li>Compound m times per year $A(1+r/m)^{nm}$</li>
</ul>
</li>
<li><p>Continuous compounding $Ae^{nr}$</p>
</li>
</ul>
<blockquote>
<p>在计算利率时，有个叫“72 法则”的简单经验法则很好用。它说的是，在每年复利一次的情况下，如果需要知道多少年可以把本金翻番，只需要用 72 除以年利率，得到的商即是所求。举个例子，如果年利率是 6%。由于 72/6=12，所以只需要 12 年就能把本金翻番。如果年利率是 9%而非 6%，则本金翻番的年数就变成 8 年（=72/9）。这是一个近似法则，但多数情况下够用了。</p>
</blockquote>
<h3 id="3-金融决策"><a href="#3-金融决策" class="headerlink" title="3. 金融决策"></a>3. 金融决策</h3><ul>
<li><p>Net Present Value (NPV) : 全部现金流折算到现在</p>
</li>
<li><p>Internal Rate of Return (IRR) : 使得NPV为0的利率, 项目回报率</p>
<blockquote>
<p>内部收益率是对项目现金流状况的一个描述指标，与市场利率不是一回事。</p>
</blockquote>
</li>
<li><p>Reinvestment Risk : 需要确保产生的利息再投资能有和之前相同的利率</p>
<ul>
<li>在实业投资项目内可以忽略，因为利息能很快投入生产</li>
<li>债券再投资风险不可忽略</li>
</ul>
</li>
</ul>
<h3 id="4-Bond-Analysis-Government-Bond"><a href="#4-Bond-Analysis-Government-Bond" class="headerlink" title="4. Bond Analysis (Government Bond)"></a>4. Bond Analysis (Government Bond)</h3><ul>
<li><p>分析的第一指标 - Yield to Maturity 类似IRR</p>
</li>
<li><p>Bond price 会受到市场利率的影响</p>
</li>
<li><p>期限长，折现率 - 即期利率 (Spot rate) 高，因为市场预计未来利率会上升</p>
</li>
<li><p>计算 Bond price 时使用 Yield 通过 Bootstrap method 算 Spot</p>
</li>
<li><p>久期 (Duration) 决定了对市场利率变动的敏感性</p>
<ul>
<li><p>$D=\sum_{t=1}^nt_i[\frac{c_ie^{yt_i}}P]$</p>
</li>
<li><p>$\frac{\Delta P}P=-D·\Delta y$ </p>
</li>
<li><p>如果一年复利m次，修正久期 (modified duration) $D^*=\frac D{1+y/m}$ </p>
</li>
<li><p>$\frac{\Delta P}P=-D^*·\Delta y$</p>
<blockquote>
<p>如果利率变化的幅度较大，那就需要用到二阶甚至更高阶近似了。债券的曲率 (convexity) 就是用来做二阶近似的</p>
<p>如果投资者预期利率水平会上升，就缩短自己组合的久期（卖出长<br>债）以减少组合价值下跌的幅度。而如果投资者预期利率水平会下降，就拉长自己组合的久期（买入长债），以尽可能多地享受利率下降带来的债券价格上升的好处。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h1 id="第-4-讲-股票价值分析"><a href="#第-4-讲-股票价值分析" class="headerlink" title="第 4 讲 股票价值分析"></a>第 4 讲 股票价值分析</h1><ul>
<li>Stock : Residual claim 剩余索取权</li>
</ul>
<blockquote>
<p>股票分成普通股 (common stock) 和优先股 (preferred stock)。优先股是一种承诺了固定股息回报，并在参与企业经营方面权力小于普通股的特殊股票。在我们这门课涉及到股票的时候，如未特别说明，指的都是普通股。</p>
</blockquote>
<ul>
<li>股票的贴现率一定比无风险利率高</li>
</ul>
<h3 id="1-股利贴现模型（dividend-discount-model，DDM）"><a href="#1-股利贴现模型（dividend-discount-model，DDM）" class="headerlink" title="1. 股利贴现模型（dividend discount model，DDM）"></a>1. 股利贴现模型（dividend discount model，DDM）</h3><ul>
<li>分红量 $D_t$</li>
<li>除红利价格 (ex-dividend price) : 分红后股价 $S_t$</li>
</ul>
<script type="math/tex; mode=display">
S_0=\frac{D_1+S_1}{1+r}=\sum^{\infty}_{t=1}\frac{D_t}{(1+r)^t}+\lim_{t\to\infty}\frac{S_t}{(1+r)^t}=\sum^{\infty}_{t=1}\frac{D_t}{(1+r)^t}</script><ul>
<li><p>省略部分的假设叫做<strong>横截性条件</strong> (transversality condition)，又被叫做无泡沫条件 (no-bubble condition)。</p>
</li>
<li><p>假设 $D_t=D_1(1+g)^{t-1}$，且 $g&lt;r$，得到<strong>戈登增长模型</strong></p>
</li>
</ul>
<blockquote>
<p>这是因为 g 是红利预期中的平均增长速率。而实际中的红利增速应该会围绕这一预期的平均增速上下波动，存在不确定性。于是，市场将红利贴现回来的贴现率就应该高于 g，以获取风险补偿。</p>
</blockquote>
<script type="math/tex; mode=display">
S_0=\sum^{\infty}_{t=1}\frac{D_1(1+g)^{t-1}}{(1+r)^t}=\frac{D_1}{1+g}[\frac{1+g}{1+r}/(1-\frac{1+g}{1+r})]=\frac{D_1}{r-g}</script><ul>
<li>当使用戈登增长模型后，两期间的回报率固定为 r</li>
</ul>
<h3 id="2-股票市盈率"><a href="#2-股票市盈率" class="headerlink" title="2. 股票市盈率"></a>2. 股票市盈率</h3><p>市盈率是市价盈利比率 (price earnings ratio) 的简称，也叫做 P/E ratio。市盈率是股票价格与每股盈利之比。</p>
<script type="math/tex; mode=display">
D_t=kE_t</script><ul>
<li>t 时期股票每股盈利 $E_t$</li>
</ul>
<p>代入戈登增长模型</p>
<script type="math/tex; mode=display">
\frac{S_0}{E_1}=\frac k{r-g}</script><ul>
<li>公司盈利增速预期的微小改变都会带来股价的大幅度变化</li>
</ul>
<blockquote>
<p>实际的市盈率有几种不同的计算方法。如果用最近 12 个月的累积利润来计算，可得到滚动市盈率（或者叫做市盈率 TTM，英文名 trailing P/E）</p>
<p>还有一种市盈率计算方法是用当前股价除以未来 12 个月盈利的预测数。这叫做动态市盈率（forward P/E）。</p>
<p>除了各种市盈率指标外，还有市净率（price-to-book ratio，简称 P/B）——股票价格与每股净资产之间的比率，市销率（price-to-sales ratio，简称 P/S）——股票价格与每股销售额之间的比率，以及其他很多财务估值比率。</p>
</blockquote>
<h3 id="3-股份公司的经营决策"><a href="#3-股份公司的经营决策" class="headerlink" title="3. 股份公司的经营决策"></a>3. 股份公司的经营决策</h3><script type="math/tex; mode=display">
企业盈利（E）=企业投资（I）+企业分红（D）</script><p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic4-1.jpg" srcset="/img/loading.gif" lazyload alt></p>
<ul>
<li><p><strong>分红可能性边界</strong>（也可以叫做生产可能性边界）</p>
</li>
<li><p>企业在 1 期最大可能的分红数量 $D_{1max}$</p>
</li>
<li>企业在 2 期最大可能的分红数量 $D_{2max}$</li>
</ul>
<p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic4-2.jpg" srcset="/img/loading.gif" lazyload alt></p>
<ul>
<li><strong>市场机会线</strong></li>
</ul>
<p>当分红可能性边界、市场机会线和股东的无差异曲线放在一块</p>
<p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic4-3.jpg" srcset="/img/loading.gif" lazyload alt></p>
<ul>
<li><p>股东 A 和 B 的无差异曲线与这根市场机会线的切点 A’与 B’，有着比之前无差异曲线和分红可能性边界切点（A 与 B）更高的效用水平。所以，不管股东如何偏好，他们都愿意让企业按照市场机会线与分红可能性边界的切点 P 来决策。</p>
</li>
<li><p>P点时企业经营的边际投资回报率（斜率）与市场利率相等</p>
</li>
<li><p>当分红可能性边界与市场机会线相切时，企业的两期分红用市场利率折算的现值</p>
<p>为最大。即 $D_1+\frac{D_2}{1+r}$, 为紫线与1期轴相交的点。</p>
</li>
</ul>
<blockquote>
<p> 企业股东（假设为消费者）在做决策时，包含两个相分离的步骤。第一步，让持有的企业遵循股票价值最大的目标来进行经营决策（投资、分红）。第二步，在资本市场上借贷，将企业所提供的红利流转换为符合自己偏好的消费流。这两步的决策相互独立，互不影响。这种投资决策和消费决策分离的结论叫做费雪分离定理（Fisher Separation Theorem），为费雪于 1930 年首次提出。</p>
<p>但在我国，A 股市场中有很多国有企业，其股份高度集中在国家手中。市场中的许多民营企业股权也集中于少数富豪手中。在这样的市场中，企业管理层受到的市场压力较小，其行为可能长期偏离市场的偏好（具体表现为企业长期不分红，投资低回报项目）。当市场中大量企业都是这样的时候，A 股市场中价值投资的氛围自然淡薄。炒作股票就成为了这个市场中主要的赚钱手段。</p>
</blockquote>
<h1 id="第-5-讲-均值方差分析"><a href="#第-5-讲-均值方差分析" class="headerlink" title="第 5 讲 均值方差分析"></a>第 5 讲 均值方差分析</h1><p>金融界第一次革命 : 1952年 Harry Markowitz 发表 《Portfolio Selection》</p>
<blockquote>
<p>提出问题 - 在关心回报率均值的同时，如果投资者还关心刻画了风险度的回报率波动方差呢？</p>
</blockquote>
<ul>
<li>事前回报率 (ex ante rate of return) - 预期回报率 (expected rate of return)</li>
<li>时候回报率  (ex post rate of return)</li>
<li>风险溢价（risk premium）- 风险资产的期望回报率超出无风险资产期望回报率的部分，是对风险资产 p 持有者承担风险的补偿 $E(r_p)-E(r_f)$</li>
</ul>
<h3 id="1-均值、方差和标准差的数学描述"><a href="#1-均值、方差和标准差的数学描述" class="headerlink" title="1. 均值、方差和标准差的数学描述"></a>1. 均值、方差和标准差的数学描述</h3><p>如果我们有某资产过去 N 个时期的回报率观测值</p>
<script type="math/tex; mode=display">
\bar{r}=\frac1N\sum_{i=1}^N r_i</script><script type="math/tex; mode=display">
\sigma_r^2=\frac1N\sum_{i=1}^N (r_i-\bar r)^2</script><script type="math/tex; mode=display">
\sigma_{xy}=\frac1N\sum_{i=1}^N(x_i-\bar{x})(y_i-\bar{y})</script><script type="math/tex; mode=display">
\rho_{xy}=\frac{\sigma_{xy}}{\sigma_x\sigma_y}</script><ul>
<li><strong>幸存者偏差</strong> (survivorship bias) - 在观察过去的历史数据时，我们没有看到巨灾状态的发生。<strong>因为那些遭遇了巨灾状态的资产已经退出资本市场了</strong>。</li>
</ul>
<h3 id="2-资产组合的均值方差特性"><a href="#2-资产组合的均值方差特性" class="headerlink" title="2. 资产组合的均值方差特性"></a>2. 资产组合的均值方差特性</h3><script type="math/tex; mode=display">
\sum_{i=1}^N w_i=1</script><p><strong>2.1 一种无风险资产和一种风险资产的组合</strong></p>
<p>一般来说，没有信用风险（credit risk）的固定收益类（fixed income）资产可被视为无风险资产。而国债（government bond）正是这样的资产。假设持有风险资产 s</p>
<blockquote>
<p>欧元区的成立后，将区内各个国家的货币发行权上收到了欧央行（European Central Bank, ECB），因而剥夺了各国的货币发行权。这样，欧元区内各个国家的国债就从无风险资产变成了风险资产，出现了违约的风险。</p>
</blockquote>
<script type="math/tex; mode=display">
\bar r_p=E[(1-w)r_f+wr_s]=(1-w)r_f+w\bar r_s= r_f+w(\bar r_s-r_f)</script><script type="math/tex; mode=display">
\sigma_p^2=E[(1-w)r_f+wr_s-(1-w)r_f-w\bar r_s]^2=E[w^2(r_s-\bar r_s)^2]=w^2\sigma_s^2</script><p>组合在标准差—均值坐标系上画出一条连接无风险资产和风险资产的直线段。可得</p>
<script type="math/tex; mode=display">
\bar r_p=r_f+\frac{\bar r_s-r_f}{\sigma_s}\sigma_p</script><p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic5-1.jpg" srcset="/img/loading.gif" lazyload alt></p>
<p><strong>2.2 两种风险资产的组合</strong></p>
<script type="math/tex; mode=display">
\bar r_p=E(r)=w\bar r_1+(1-w)\bar r_2</script><script type="math/tex; mode=display">
\begin{aligned}
\sigma_p^2 &=E[wr_1+(1-w)r_2-(w\bar r_1+(1-w)\bar r_2)]^2\\
&=E[w(r_1-\bar r_1)+(1-w)(r_2-\bar r_2)]^2\\
&=E[w^2(r_1-\bar r_1)^2+(1-w)^2(r_2-\bar r_2)^2+2w(1-w)(r_1-\bar r_1)(r_2-\bar r_2)]\\
&=w^2\sigma^2_1+(1-w)^2\sigma_2^2+2w(1-w)\sigma_{12}
\end{aligned}</script><p>组合在标准差—均值坐标系上画出一条连接两个资产的双曲线。曲线的最左侧点代表通过组合所能达到的最小波动率。这个组合被称为“最小方差组合”。我们可以求出最小方差组合中两类资产的权重。其一阶条件为</p>
<script type="math/tex; mode=display">
\begin{aligned}
\frac{\partial \sigma_p^2}{\partial w}&\Rightarrow2\sigma_1^2w^*-2\sigma_2^2(1-w^*)+2\sigma_{12}-4\sigma_{12}w^*=0\\
&\Rightarrow2\sigma_1^2w^*-2\sigma_2^2+2\sigma_2^2w^*+2\sigma_{12}-4\sigma_{12}w^*=0\\
&\Rightarrow\sigma_1^2w^*-\sigma_2^2+\sigma_2^2w^*+\sigma_{12}-2\sigma_{12}w^*=0\\
&\Rightarrow(\sigma_1^2+\sigma_2^2-2\sigma_{12})w^*=\sigma_2^2-\sigma_{12}\\
&\Rightarrow w^*=\frac{\sigma_2^2-\sigma_{12}}{\sigma_1^2+\sigma_2^2-2\sigma_{12}}
\end{aligned}</script><p>代入原式得到方差最小的组合的均值为</p>
<script type="math/tex; mode=display">
\bar r_p^*=\frac{\sigma_1^2\bar r_2+\sigma_2^2\bar r_1-\sigma_{12}(\bar r_1+\bar r_2)}{\sigma_1^2+\sigma_2^2-2\sigma_{12}}</script><p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic5-2.jpg" srcset="/img/loading.gif" lazyload alt></p>
<p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic5-3.jpg" srcset="/img/loading.gif" lazyload alt></p>
<p>如果存在不止两种的风险资产，投资组合的收益风险状况就不再是在一根曲线上，而变成了一片区域</p>
<p>若是三个资产，且给定回报率均值 $\bar r$, 选择组合权重来最小化组合回报率方差</p>
<script type="math/tex; mode=display">
\begin{aligned}
\min_{w_1,w_2,w_3} & w_1^2\sigma_1^2+w_2^2\sigma_2^2+w_3^2\sigma_3^2\\
s.t.\quad &w_1\bar r_1+w_2\bar r_2+w_3\bar r_3=\bar r\\
& w_1+w_2+w_3=1
\end{aligned}</script><p>建立拉格朗日函数</p>
<script type="math/tex; mode=display">
\mathcal{L}=w_1^2\sigma_1^2+w_2^2\sigma_2^2+w_3^2\sigma_3^2+\lambda[w_1\bar r_1+w_2\bar r_2+w_3\bar r_3-\bar r]+\mu[w_1+w_2+w_3-1]</script><p>一阶条件</p>
<script type="math/tex; mode=display">
\frac{\partial\mathcal L}{\partial w_i}=0 \Rightarrow 2\sigma_i^2w_i+\lambda\bar r_i+\mu=0</script><p>在波动率均值坐标系上，多种风险资产形成的组合区域边界是开口向右、上下对称的双曲线。这条双曲线的上半边称为投资组合的<strong>“有效前沿”</strong>（efficient frontier）</p>
<h3 id="3-市场组合与共同基金定理"><a href="#3-市场组合与共同基金定理" class="headerlink" title="3. 市场组合与共同基金定理"></a>3. 市场组合与共同基金定理</h3><p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic5-4.jpg" srcset="/img/loading.gif" lazyload alt></p>
<p>与双曲线上半支相切的射线有最高的期望收益。这条射线就是包含无风险资产后的组合有效前沿（前沿从一条双曲线变成了一条直线）。这根直线型的有效前沿在金融学中有一个专门的名字，叫做<strong>“资本市场线”</strong>（Capital Market Line，简称 CML）。资本市场线与双曲线的切点就是“市场组合”（market portfolio）</p>
<script type="math/tex; mode=display">
\bar r-r_f=\frac\sigma\sigma_M(\bar r_M-r_f)</script><ul>
<li>理性的投资者只应该选择处在 CML 上的投资组合。而 CML 上的所有投资组合都可由“无风险资产”和“市场组合”组合得到。投资者 A 和 B 虽然有着不同的无差异曲线。但他们都会选择同样的风险资产组合，也即“市场组合”。他们之间的差异只是在资产分配在无风险资产和市场组合的比例不同而已。</li>
</ul>
<blockquote>
<p>投资经理在帮客户设计组合时，可以分成两步来完成。第一步，基于各种风险资产的收益风险特性，构建出“市场组合”。在这一步中，可以完全不考虑客户的偏好。第二步，根据客户的偏好，将客户的资产在无风险资产和市场组合之间做配置。这一结论，就是金融学中著名的<strong>“共同基金分离定理”</strong>（Mutual Fund Separation Theorem）</p>
<p>尽管我们是在包含无风险资产的情况下导出了共同基金定理，但其实在没有无风险资产，而只有风险资产时，共同基金定理也成立。只不过这时定理内容变成：<strong>任何有效前沿上的组合均可以由两个处在有效前沿上的组合得到</strong></p>
</blockquote>
<h1 id="第-6-讲-资本资产定价模型"><a href="#第-6-讲-资本资产定价模型" class="headerlink" title="第 6 讲 资本资产定价模型"></a>第 6 讲 资本资产定价模型</h1><p>在上一讲，我们假设资产的期望回报率等于其过去历史回报率的均值，即</p>
<script type="math/tex; mode=display">
E(\tilde r_i)=\bar r_i</script><p>其中，字母上方加上波浪符号表明这是一个随机变量（random variable）</p>
<h3 id="1-CAPM-的第一种论证"><a href="#1-CAPM-的第一种论证" class="headerlink" title="1. CAPM 的第一种论证"></a>1. CAPM 的第一种论证</h3><p>再开始前引入如下几个假设</p>
<p>1) 没有交易成本（佣金、买卖价差等）<br>2) 没有税收<br>3) 所有资产都可以任意交易，并且无限可分<br>4) 完全竞争：所有人都是价格的接受者，没有影响价格的能力<br>5) 所有人都以均值方差的方式选择投资组合：偏好更高的期望回报率，以及更低的回报率波动率<br>6) 所有资产（包括无风险资产）都可以任意买空卖空。<br>7) 一致预期：所有人针对相同的时间区间（1 期）考虑投资问题，并对资产的预期回报率和预期波动率状况有相同预期。</p>
<p>我们假设只持有市场组合，完全不持有无风险资产的投资者的偏好以下面的效用函数来刻画</p>
<script type="math/tex; mode=display">
u(r)=E(r)-A\sigma^2(r)</script><ul>
<li>A - 衡量风险厌恶程度的恰当常数（A 严格大于 0 以确保投资者是风险厌恶的）</li>
</ul>
<blockquote>
<p>不持有无风险资产的条件是为了简化运算，而效用函数的假设，是有因为其实对应着两种期望效用的特殊情况——回报率服从正态分布，或者消费者的对消费的效用函数呈二次型。当然效用函数可以采用其他方法规定，但是在CAPM模型中要求符合这一特性。所以说，CAPM是C-CAPM一种特例。</p>
<p>效用函数中的方差只能是投资者持有的最优资产组合的方差，而不是各个资产自己回报率的波动方差。</p>
</blockquote>
<p>在这个投资者已持有市场组合 M 的前提下，让他将其投资在 M 上的资产分一小部分 w 到其他任意一种资产 i 上，为投资者构建一个新的组合，效用为</p>
<script type="math/tex; mode=display">
\begin{aligned}
u(r_p)&=u[wr_i+(1-w)r_M]\\
&=E[wr_i+(1-w)r_M]-A\sigma^2[wr_i+(1-w)r_M]\\
&=wE(r_i)+(1-w)E(r_M)-A[w^2\sigma_i^2+(1-w)^2\sigma_M^2+2w(1-w)\sigma_{iM}]\\
&=wE(r_i)+(1-w)E(r_M)-Aw^2(\sigma_i^2+\sigma_M^2-2\sigma_{iM})-2Aw(\sigma_{iM}-\sigma_{M}^2)-A\sigma_{M}^2\\
\end{aligned}</script><p>将 w 份额的财富从市场组合 M 转换到资产 i 上，带给投资者的边际效用为</p>
<script type="math/tex; mode=display">
\frac{du(r_p)}{dw}=E(r_i)-E(r_M)-2Aw(\sigma_i^2+\sigma_M^2-2\sigma_{iM})-2A(\sigma_{iM}-\sigma_M^2)</script><p>由于 M 是投资者的最优选择，所以在 w=0 处，边际效用应该等于 0</p>
<script type="math/tex; mode=display">
E(r_i)-E(r_M)-2A(\sigma_{iM}-\sigma_M^2)=0</script><p>由于这个边际效用对任何一种资产都是 0，所以理应对无风险资产 $r_f$ 也是 0。将 rf代入上式可得</p>
<script type="math/tex; mode=display">
\begin{aligned}
r_f-E(r_M)+2A\sigma_M^2&=0\\
\frac{E(r_M)-r_f}{2\sigma_M^2}&=A
\end{aligned}</script><p>代回原式</p>
<script type="math/tex; mode=display">
\begin{aligned}
&E(r_i)-E(r_M)-\frac{E(r_M)-r_f}{\sigma_M^2}(\sigma_{iM}-\sigma_M^2)=0\\
&\Rightarrow E(r_i)-E(r_M)+E(r_M)-r_f=\frac{\sigma_{iM}}{\sigma_M^2}[E(r_M)-r_f]\\
&\Rightarrow E(r_i)-r_f=\frac{\sigma_{iM}}{\sigma_M^2}[E(r_M)-r_f]
\end{aligned}</script><p>定义 $\beta_i=\frac{\sigma_{iM}}{\sigma_M^2}$, 则上式变形为常见的 CAPM 定价方程</p>
<script type="math/tex; mode=display">
E(r_i)-r_f=\beta_i[E(r_M)-r_f]</script><h3 id="2-CAPM-的第二种论证"><a href="#2-CAPM-的第二种论证" class="headerlink" title="2. CAPM 的第二种论证"></a>2. CAPM 的第二种论证</h3><p>在均衡时，所有理性投资者所选择的投资组合都应该处在所谓的“资本市场线”（Capital Market Line, CML）上。容易得到 CML 的直线方程为</p>
<script type="math/tex; mode=display">
E(r)=r_f+\frac{E(r_M)-r_f}{\sigma_M}\sigma</script><p>同样构建一个新组合</p>
<script type="math/tex; mode=display">
E[r_w]=wE(r_i)+(1-w)E(r_M)=w[E(r_i)-E(r_M)]+E(r_M)</script><script type="math/tex; mode=display">
\begin{aligned}
\sigma(r_w)&=[w^2\sigma^2_i+(1-w)^2\sigma^2_M+2w(1-w)\sigma_{iM}]^{\frac12}\\
&=[w^2(\sigma^2_i+\sigma^2_M-2\sigma_{iM})+2w(\sigma_{iM}-\sigma^2_M)+\sigma^2_M]^{\frac12}\\
\end{aligned}</script><p>这个新的市场组合线与CML交于M点，又同时不高于 efficient frontier</p>
<p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic6-1.jpg" srcset="/img/loading.gif" lazyload alt></p>
<p>这条曲线在这一点的斜率应该与资本市场线的斜率相等。即</p>
<script type="math/tex; mode=display">
\frac{dE(r_w)}{d\sigma(r_w)}\bigg|_{x=0}=\frac{dE(r_w)}{dw}\bigg|_{x=0}\bigg/\frac{d\sigma(r_w)}{dw}\bigg|_{x=0}=\frac{E(r_M)-r_f}{\sigma_M}</script><p>从前两式可得</p>
<script type="math/tex; mode=display">
\frac{dE(r_w)}{dw}=E(r_i)-E(r_M)</script><script type="math/tex; mode=display">
\begin{aligned}
\frac{d\sigma(r_w)}{dw}=&\frac12[w^2\sigma^2_i+(1-w)^2\sigma^2_M+2w(1-w)\sigma_{iM}]^{-\frac12}\\
&\times[2w(\sigma^2_i+\sigma^2_M-2\sigma_{iM})+2(\sigma_{iM}-\sigma^2_M)]
\end{aligned}</script><p>w = 0 代入上式得</p>
<script type="math/tex; mode=display">
\frac{d\sigma(r_w)}{dw}\bigg|_{x=0}=\frac{\sigma_{iM}-\sigma^2_M}{\sigma_M}</script><p>回到开头等式</p>
<script type="math/tex; mode=display">
\begin{aligned}
&[E(r_i)-E(r_M)]\bigg/\frac{\sigma_{iM}-\sigma^2_M}{\sigma_M}=\frac{E(r_M)-r_f}{\sigma_M}\\
&\Rightarrow \frac{\sigma_M[E(r_i)-E(r_M)]}{\sigma_{iM}-\sigma^2_M}=\frac{E(r_M)-r_f}{\sigma_M}\\
&\Rightarrow \sigma_M^2E(r_i)-\sigma_M^2E(r_M)=\sigma_{iM}E(r_M)-\sigma_{iM}r_f-\sigma^2_ME(r_M)+\sigma^2_Mr_f\\
&\Rightarrow E(r_i)-r_f=\frac{\sigma_{iM}}{\sigma_M^2}[E(r_M)-r_f]
\end{aligned}</script><p>定义 $\beta_i=\frac{\sigma_{iM}}{\sigma_M^2}$, 则上式变形为常见的 CAPM 定价方程</p>
<script type="math/tex; mode=display">
E(r_i)-r_f=\beta_i[E(r_M)-r_f]</script><p>在这第二种推导中，我们在分析是否可能通过将市场组合 M 与其他资产组合起来，以获得高于市场组合的<strong>夏普比</strong>（Sharpe Ratio，简写为 SR）。</p>
<script type="math/tex; mode=display">
SR_i=\frac{E(r_i)-r_f}{\sigma(r_i)}</script><p>容易看出，在所有由风险资产所构成的组合中，市场组合 M 有最高的夏普比。市场组合 M 的夏普比就是资本市场线（CML）的斜率。</p>
<h3 id="3-证券市场线-vs-资本市场线"><a href="#3-证券市场线-vs-资本市场线" class="headerlink" title="3. 证券市场线 vs.资本市场线"></a>3. 证券市场线 vs.资本市场线</h3><p>CAPM 表明不同资产的期望回报率之间存在线性关系：$\beta$ 越大的资产，期望回报率应该越高。理论上，如果以 $\beta$ 为横坐标，资产期望回报率为纵坐标，表征不同资产的点应该处在一根斜率为正的直线上。这根直线就是证券市场线（Securities Market Line，简称 SML）。</p>
<p>证券市场线（SML）</p>
<script type="math/tex; mode=display">
E(r_i)=r_f+\frac{\sigma_{iM}}{\sigma_M^2}[E(r_M)-r_f]</script><p>or</p>
<script type="math/tex; mode=display">
E(r_i)=r_f+\beta[E(r_M)-r_f]</script><p>资本市场线（CML）</p>
<script type="math/tex; mode=display">
E(r_i)=r_f+\frac{\sigma_{i}}{\sigma_M}[E(r_M)-r_f]</script><p>两个方程的差别在于</p>
<ol>
<li>在 SML 中，风险以 $\beta$ 度量；而在 CML中，风险以 $\sigma$ 衡量。</li>
<li>SML 对所有资产都成立。而 CML只对那些由所有资产（包括无风险资产及风险资产）组合起来的“有效组合”成立（完全分散化投资后）。</li>
</ol>
<h1 id="第-7-讲-对-CAPM-的讨论"><a href="#第-7-讲-对-CAPM-的讨论" class="headerlink" title="第 7 讲 对 CAPM 的讨论"></a>第 7 讲 对 CAPM 的讨论</h1><ul>
<li><p>决定资产期望回报率的不是资产回报率的波动率，而是资产回报率与市场组合波动的相关性（$\beta$）。<strong>如果某些不确定性可以通过投资者自己的处理而被消除，它就不应该算作真正的风险，市场也就不应该对持有这些不确定性给出奖励。</strong></p>
</li>
<li><p>分散投资的极致是所有资产合起来，就是市场组合。市场组合的波动率就是不能被分散的不确定性，是资产定价时需要加以补偿的风险，叫做<strong>系统性风险</strong>（systematic risk）。而各类资产所包含的可以通过分散化消除的波动叫做<strong>个体风险</strong>（idiosyncratic risk）。</p>
</li>
<li><p>有没有可能存在预期回报率低于无风险利率的风险资产？- 保险</p>
</li>
<li><p><strong>均值方差偏好只能用来做评价最优组合的判断标准</strong>。在这些最优组合中，所有可被分散的风险都已被分散，只存在系统风险。在这些最优组合中，如果两个组合期望回报率一样，而波动率有不同，那么投资者一定会选择波动率小的那个最优组合。而对（风险未被充分分散的）任意两种资产，不能用均值方差偏好来说投资者会选择一个，而不选择另一个。</p>
</li>
<li><p><strong>夏普比只应该被用来衡量那些被提供给最终投资者的投资组合的表现</strong>。对单个资产来计算夏普比的意义很小。原因在于单个资产并未享受到分散化带来的好处，其夏普比理应低于市场组合</p>
</li>
<li><p>在现实世界中，还有些基金只专注于投资某一个有限的领域。这些基金在设立之时就明确表示不会尽可能地做分散投资。这些基金的客户（主要是投资领域广泛的基金）会在这些行业基金的基础之上，再来构造自己的基金。<strong>“母基金”</strong>（Fund of Funds，简称 FOF）就是一类这种投资于其他基金的基金。<strong>对于这些行业性或局域性的基金，夏普比不是一个公允的考核指标。因为这些行业性基金本来就不会试图去尽可能分散投资。对这些基金来说，$\beta$ 而非波动率是更合适的风险刻画指标。</strong>1968 年，Michael Jensen 利用 CAPM 的思想构造了一个衡量共同基金表现的指标——詹森阿尔法（Jensen’s Alpha）。这个指标又被称为<strong>“詹森指数”</strong>（Jensen Index）。简单来说，詹森阿尔法是某支共同基金平均回报率相对证券市场线的垂直偏离。</p>
</li>
</ul>
<script type="math/tex; mode=display">
\text{Jensen's Alpha}=(\bar r_i-r_f)-\beta_i(\bar r_M-r_f)</script><ul>
<li><p>如果能够找到一个正 Alpha 的基金，可以把这个基金与市场组合再组合一下，获得比原来的市场组合更高的夏普比。但在实践中，其实不用那么复杂，我们完全可以在组合构建中把这个正的Alpha给提取出来。这种策略叫做<strong>Alpha与 Beta分离</strong>（Alpha Beta Separation）。这个分离出来的 Alpha 可以被加到其他组合中以帮助其他组合获得更高的回报率。所以这种策略又叫做 <strong>Alpha 转移</strong>（Alpha transport），或者叫可携 Alpha（portable Alpha）。</p>
</li>
<li><p>CAPM 只研究资产市场中的均衡，而<strong>将资产市场所处的宏观大环境当成外生给定</strong>。此外，CAPM 还是一个静态模型，<strong>只研究单期决策的问题</strong>。这样，CAPM就难以把资产价格和宏观经济的各种因素联系起来，无法探究资产价格的最终决定因素。另外，用 CAPM 也没法分析资产价格的动态变化规律。基于消费的资本资产定价模型（C-CAPM） 和跨期资本资产定价模型（ICAPM）就是针对这两点不足所发展出来的更成熟的定价理论。</p>
</li>
</ul>
<h1 id="第-8-讲-期望效用理论"><a href="#第-8-讲-期望效用理论" class="headerlink" title="第 8 讲 期望效用理论"></a>第 8 讲 期望效用理论</h1><p>从理论上来看，可以从两个方面改善 CAPM。这两方面的改进会把我们带到基于消费的资本资产定价模型（Consumption based CAPM），一个基于更合理偏好假设的一般均衡定价理论体系。</p>
<p><strong>第一个方向是投资者偏好的假设</strong></p>
<p>经济分析（当然也包含金融分析）的基础是对人选择行为的研究。而人要能够做出选择，首先得有能力对不同选择的优劣做排序。人这种对选择排序的能力在经济学中用偏好来体现。</p>
<blockquote>
<p>为什么 $u(r)=E(r)-A\sigma^2(r)$ 不适用于做偏好？ 从概率论上解释，任何一个随机变量 x 都可以定义其 k 阶矩 为 $E[x-c]^k$ 。均值为一阶矩，方差是二阶矩。仅用均值和方差来比较随机变量，丢失了随机变量三阶矩（偏度 Skewness）、四阶矩（峰度 Kurtosis）及更高阶矩的信息。</p>
</blockquote>
<p>介绍人在风险下决策的理论体系。其核心是冯•诺伊曼与摩根斯坦 1944 年所创立的<strong>“期望效用理论”</strong>（expected utility theory）。</p>
<p><strong>定义 8.1（理性偏好）：</strong>一种偏好关系 $\succeq$ 被称为理性，当且仅当它满足以下两个条件：</p>
<ol>
<li>完备性：对任意 $x,y\in X,x\succeq y$ 与 $y\succeq x$ 至少有一个成立。</li>
<li>传递性：对任意 $x,y,z\in X$ 如果有 $x\succeq y$ 与 $y\succeq z$ 则必有 $x\succeq z$ 成立。</li>
</ol>
<p><strong>定义 8.2（连续性）：</strong>一种偏好关系 $\succeq$ 如果在极限下也能保留，就被称为连续的。具体来说，如果对一系列 $\{(x^n,y^n)\}_{n=1}^\infty$ 有 $x^n\succeq y^n (\forall n)$那么对 $x=\lim_{n\to\infty}x^n$ 与 $y=\lim_{n\to\infty}y^n$ 必有 $x\succeq y$。</p>
<p><strong>命题 8.3：</strong>如果一个偏好 $\succeq$ 是理性且连续的，那么它可以用一个连续函数 $u(x)$ 来表示。</p>
<p><strong>定义 8.4（简单彩票 simple lottery）：</strong> 一张简单彩票 $L$ 为一串数字 $L=(p_1, … ,p_N)$。其中 $p_n$ 为第 $n$ 种结果出现的概率。对所有的 $n$，有 $p_n \ge0$，且 $\sum_np_n=1$。</p>
<p><strong>定义 8.5（复合彩票 compound lottery）：</strong>如果有 $K$ 张简单彩票 $L_k=(p_1^k<br>,…,p_N^k)，k=1,…,K$，以及概率 $\alpha_k\ge0 （\sum_k\alpha_k=1）$，复合彩票$(L_1,…,L_K; \alpha_1,…, \alpha_K)$ 以 $\alpha_k$ 为概率产生结果 $L_k$。</p>
<p>由于复合彩票可以被化为简单彩票，所以我们就把简单彩票作为人在不确定状况下面临的可选对象，并把所有可选的简单彩票所组成的集合叫做彩票空间（space of lotteries），标记为 $\mathscr L$。</p>
<p><strong>定义 8.6（独立性公理 independence axiom）：</strong>称对彩票的一种偏好关系<br>$\succeq$ 满足独立性公理，如果对任意 3 张彩票 A、B 和 C 和任意 0 到 1 之间的数 $\alpha$，以下条件总是成立</p>
<script type="math/tex; mode=display">
A\succeq B\Leftrightarrow\alpha A+(1-\alpha)C\succeq\alpha B+(1-\alpha)C</script><p><strong>命题 8.7（期望效用定理）：</strong>如果定义在彩票空间 $\mathscr L$ 上的偏好 $\succeq$ 是理性和连续的，并且满足独立性公理，那么这样的偏好可用期望效用函数的形式表述出来。也就是说，我们可以为每种结果 $n=1, …, N$ 指定一个效用值 $u_n$，使得对任意两个彩票 $L=(p_1, …, p_N)$与 $L’=(p_1’, …, p_N’)$来说，必然有</p>
<script type="math/tex; mode=display">
L\succeq L'\Leftrightarrow\sum_{n=1}^Np_nu_n\ge\sum_{n=1}^Np_n'u_n</script><p>期望效用定理意味着，满足理性、连续性、以及独立性公理的偏好可以表示为期望效用的形式</p>
<script type="math/tex; mode=display">
U(L)=\sum_{n=1}^Np_nu(x_n)</script><p>这样的效用函数被称为“冯诺伊曼-摩根斯坦效用函数”。由于这个名字实在太长，我们一般简称其为“vNM 效用函数”，或是<strong>“期望效用函数”</strong>。</p>
<blockquote>
<p>对独立性公理最著名的反驳是阿莱斯于 1953 年提出来的。这一反驳是如此有名，以至于经济学中专门出现了一个名词叫<strong>“阿莱斯悖论”</strong>（Allais Paradox）。</p>
<p>对阿莱斯悖论通常会有 4 种的回应：（1）在阿莱斯悖论中，人的选择不理性；（2）阿莱斯悖论涉及非常接近 0 或 1 的概率，因而不是普遍的；（3）在理论中加入“后悔”；（4）放弃独立性公理，从而构建更弱的理论。阿莱斯悖论及对其的回应已经激发出了更多的研究。但从简便性上来说，新的理论都还没有超过期望效用理论。所以目前期望效用仍然是研究不确定下人的行为的主要工具。</p>
</blockquote>
<p>期望效用是将效用定义在结果，而非收益之上的。也就是说，不管投资者初始的财富是多少，最终同样的收益和消费水平会带来同样的效用。因此，在定义效用时，似乎<strong>有必要把当前的状况与某个基准来做比较</strong>。Kahneman 与Tversky 于 1979 年提出展望理论（prospect theory）。他们认为，<strong>失去一笔钱带来的效用损失的幅度，比得到同一数额的钱带来效用增进的幅度要更大。</strong></p>
<p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic8-1.jpg" srcset="/img/loading.gif" lazyload alt></p>
<h3 id="8-1-风险厌恶程度的度量"><a href="#8-1-风险厌恶程度的度量" class="headerlink" title="8.1 风险厌恶程度的度量"></a>8.1 风险厌恶程度的度量</h3><p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic8-2.jpg" srcset="/img/loading.gif" lazyload alt></p>
<p>图中画出了两根效用函数曲线，$u(•)$ 与 $v(•)$。其中，$v(•)$对应的曲线曲率更大（更加弯曲）。消费者的消费存在不确定性，有50%的可能性获得 $c+\Delta$，50%的可能性获得 $c-\Delta$。尽管消费者的期望消费为 $c$，但因为不确定性的存在，他们的效用低于 $u(c)$ 与 $v(c)$，只能分别达到$Eu(c)=\frac12•u(c-\Delta)+\frac12•u(c+\Delta)$与$Ev(c)=\frac12•v(c-\Delta)+\frac12•v(c+\Delta)$ 的水平。</p>
<p>通过方程 $u(ce_u)=Eu(c)$ 与 $v(ce_v)=Ev(c)$，可以找出与不确定性消费效用相等的确定性消费水平，将其称为<strong>确定性等值</strong>（certainty equivalent）$ce_u$ 与 $ce_v$。从图中可以看到 $ce_u$ 与 $ce_v$ 均小于 $c$ 。它们与 $c$ 之间的距离就是消费者愿意为消除不确定性而牺牲的期望消费，也就是消费者愿意支付的“风险溢价”（risk premium）。由于 v(•)的曲线曲率更大，所以$ce_v&lt;ce_u$ 。消费者 $v$ 为了消除不确定性，愿意牺牲更多的消费。</p>
<p>风险溢价就可用来衡量消费者的风险厌恶程度。但是，这种形式的风险溢价与期望消费量以及消费的波动幅度都有关，使用起来不方便。我们希望找到一种与具体消费状况无关的，只是刻画消费者主观风险厌恶态度的指标。</p>
<p><strong>假设</strong></p>
<ul>
<li>水平 $y$ 的投资者</li>
<li>以 $\pi$ 概率赢得数额为 $h$ 的货币</li>
<li>以 $1-\pi$ 概率输掉数额为 $h$ 的货币</li>
<li>$\pi^*$ 为使得投资者在参与和不参与投资之间完全无差异的临界值 (也可以视为对投资者风险厌恶度的一个度量)</li>
</ul>
<script type="math/tex; mode=display">
u(y)=\pi^*u(y+h)+(1-\pi^*)u(y-h)</script><p>将 $u(y+h)$ 与 $u(y-h)$ 在 $y$ 处做泰勒展开</p>
<script type="math/tex; mode=display">
u(y+h)=u(y)+hu'(y)+\frac{h^2}2u''(y)+o_1(h^2)</script><script type="math/tex; mode=display">
u(y-h)=u(y)-hu'(y)+\frac{h^2}2u''(y)+o_2(h^2)</script><p>代入</p>
<script type="math/tex; mode=display">
u(y)=\pi^*[u(y)+hu'(y)+\frac{h^2}2u''(y)]+(1-\pi^*)[u(y)-hu'(y)+\frac{h^2}2u''(y)]</script><p>化简</p>
<script type="math/tex; mode=display">
0=(2\pi^*-1)hu'(y)+\frac{h^2}2u''(y)</script><p>解得</p>
<script type="math/tex; mode=display">
\pi^*=\frac12+\frac h4[-\frac{u''(y)}{u'(y)}]</script><p>我们定义</p>
<script type="math/tex; mode=display">
R_A(y)\equiv-\frac{u''(y)}{u'(y)}</script><p>这就是<strong>绝对风险厌恶系数</strong>（coefficient of absolute risk aversion）。它也被称为Arrow–Pratt measure of absolute risk-aversion（简称 ARA），因为这种方法最先由 Pratt 与 Arrow提出。</p>
<p>类似的，我们可以推导一个应用更为广泛的风险厌恶程度指标—<strong>“相对风险厌恶系数”</strong>（coefficient of relative risk aversion）。这一指标又被称为 Arrow-Pratt-De Finetti measure of relative risk-aversion（简称 RRA）。</p>
<p>与上述不同的是，此时定义</p>
<ul>
<li>以 $\pi$ 概率赢得数额为 $\theta y$ 的货币</li>
<li>以 $1-\pi$ 概率输掉数额为 $\theta y$ 的货币</li>
</ul>
<script type="math/tex; mode=display">
u(y)=\pi^*u(y+\theta y)+(1-\pi^*)u(y-\theta y)</script><p>将 $u(y+\theta y)$ 与 $u(y-\theta y)$ 在 $y$ 处做泰勒展开，并去掉二阶以上的高阶余项</p>
<script type="math/tex; mode=display">
u(y+\theta y)=u(y)+\theta yu'(y)+\frac{\theta^2 y^2}2u''(y)</script><script type="math/tex; mode=display">
u(y-\theta y)=u(y)-\theta yu'(y)+\frac{\theta^2 y^2}2u''(y)</script><p>代入</p>
<script type="math/tex; mode=display">
u(y)=\pi^*[u(y)+\theta yu'(y)+\frac{\theta^2 y^2}2u''(y)]+(1-\pi^*)[u(y)-\theta yu'(y)+\frac{\theta^2 y^2}2u''(y)]</script><p>化简</p>
<script type="math/tex; mode=display">
0=(2\pi^*-1)\theta u'(y)y+\frac{\theta^2}2u''(y)y^2</script><p>解得</p>
<script type="math/tex; mode=display">
\pi^*=\frac12+\frac \theta4[-\frac{yu''(y)}{u'(y)}]</script><p>我们定义</p>
<script type="math/tex; mode=display">
R_R(y)\equiv-\frac{yu''(y)}{u'(y)}</script><p>即为相对风险厌恶系数</p>
<h3 id="8-2-几种常见的效用函数"><a href="#8-2-几种常见的效用函数" class="headerlink" title="8.2 几种常见的效用函数"></a>8.2 几种常见的效用函数</h3><ol>
<li><p><strong>CARA：</strong>常绝对风险厌恶型效用函数（constant absolute risk aversion）</p>
<script type="math/tex; mode=display">
u(c)=-e^{-\alpha c}</script><p>其对应的绝对风险厌恶系数为 $R_A(c)=\alpha$</p>
</li>
<li><p><strong>CRRA：</strong>常相对风险厌恶型效用函数（constant relative risk aversion）</p>
<script type="math/tex; mode=display">
u(c)=\frac{c^{1-\gamma}-1}{1-\gamma}</script><p>其对应的绝对风险厌恶系数为 $R_R(c)=\gamma$</p>
<p>当 $\gamma=1$ 的时候，CRRA 函数退化为对数效用函数 $u(c)=lnc$ 在经济学中，我们通常把 $ln$ 写成 $log$。所以，对数效用函数一般写为 $u(c)=logc$</p>
<script type="math/tex; mode=display">
\lim_{\gamma\to1}\frac{c^{1-\gamma}-1}{1-\gamma}=\lim_{\gamma\to1}\frac{-c^{1-\gamma}\ln c}{-1}=\ln c</script></li>
<li><p><strong>HARA：</strong>双曲绝对风险厌恶型效用函数（hyperbolic absolute risk aversion）。这种效用函数对应的绝对风险厌恶系数为</p>
<script type="math/tex; mode=display">
R_A(c)=\frac{1}{ac+b}</script><p>解此微分方程，并舍弃解中的常数项和系数，可得对应的效用函数形式为</p>
<script type="math/tex; mode=display">
u(c)=\frac{(c-c_s)^{1-\gamma}}{1-\gamma}</script><p>其中，$\gamma=1/a，c_s=-b/a$。当 $a=0$ 的时候，HARA 退化为 CARA。当 $b=0$ 的时候，HARA 退化为 CRRA。当 $\gamma=-1$ 的时候，HARA 退化为二次型效用函数。</p>
</li>
<li><p><strong>线性效用函数（风险中性）：</strong></p>
<script type="math/tex; mode=display">
u(c)=\alpha c</script><p>其中  $\alpha$ 为大于 0 的常数。由于 $u’(c)=\alpha，u’’(c)=0$，所以其绝对风险厌恶系数和相对风险厌恶系数都为 0。</p>
</li>
</ol>
<h3 id="8-3-作为期望效用特例的均值方差偏好"><a href="#8-3-作为期望效用特例的均值方差偏好" class="headerlink" title="8.3 作为期望效用特例的均值方差偏好"></a>8.3 作为期望效用特例的均值方差偏好</h3><p><strong>二次型效用</strong></p>
<script type="math/tex; mode=display">
u(c)=c-Ac^2</script><script type="math/tex; mode=display">
\begin{aligned}
Eu(c)&=E[c-Ac^2]\\
&=E(c)-A(E[c])^2-Avar(c)\\
&=(1-AE[c])E[c]-Avar(c)
\end{aligned}</script><p> <strong>CARA 效用</strong></p>
<script type="math/tex; mode=display">
u(c)=-e^{-\alpha c}</script><script type="math/tex; mode=display">
Eu(c)=E[-e^{-\alpha c}]=-e^{\alpha E[c]+\frac12\alpha^2var[c]}</script><p>最大化以上的期望效用，等价于最大化</p>
<script type="math/tex; mode=display">
E[c]+\frac12\alpha var[c]</script><p>这便是上讲在证明 CAPM 定价方程式所用到的效用函数形式</p>
<h1 id="第-9-讲-风险偏好与投资储蓄行为"><a href="#第-9-讲-风险偏好与投资储蓄行为" class="headerlink" title="第 9 讲 风险偏好与投资储蓄行为"></a>第 9 讲 风险偏好与投资储蓄行为</h1><h3 id="9-1-投资者组合配置优化问题"><a href="#9-1-投资者组合配置优化问题" class="headerlink" title="9.1 投资者组合配置优化问题"></a>9.1 投资者组合配置优化问题</h3><p><strong>证明： 只要风险资产的期望收益率比无风险利率高，风险厌恶的投资者就会将其一部分财富投资于风险资产。</strong></p>
<ul>
<li>初始财富 $w_0$</li>
<li>无风险利率 $r_f$</li>
<li>风险资产收益利率 $\tilde r$</li>
<li>投资者从初始财富中拿出 $\alpha$ 投资于风险资产</li>
<li>投资者从初始财富中拿出 $w_0-\alpha$ 投资于无风险资产</li>
</ul>
<p>在期末，投资者的财富变为</p>
<script type="math/tex; mode=display">
\begin{align}
\tilde w&=(1+r_f)(w_0-\alpha)+\alpha(1+\tilde r)\\
&= w_0(1+r_f)+\alpha(\tilde r-r_f)
\end{align}</script><p>$u(•)$ 是效用函数。由于效用函数总是增函数（财富越多，效用越高），所以必有 $u’(•)&gt;0$。投资者风险厌恶且其效用函数可导, 因此 $u’’(•)&lt;0$</p>
<p>投资者通过选择 $\alpha$ 来最大化他期末财富带来的期望效用。</p>
<script type="math/tex; mode=display">
\max_\alpha Eu(\tilde w)=\max_\alpha Eu(w_0(1+r_f)+\alpha(\tilde r-r_f))</script><script type="math/tex; mode=display">
E[u'(w_0(1+r_f)+\alpha^*(\tilde r-r_f))(\tilde r-r_f)]=0</script><p><strong>命题 9.1：</strong>如果 $a^*$ 是优化一阶条件式的解，那么有以下 3 个等价关系成立：</p>
<ol>
<li>$a^*&gt;0$ 当且仅当 $E\tilde r&gt;r_f$</li>
<li>$a^*=0$ 当且仅当 $E\tilde r=r_f$</li>
<li>$a^*&lt;0$ 当且仅当 $E\tilde r&lt;r_f$</li>
</ol>
<p><strong>证明：</strong>我们定义值函数如下</p>
<script type="math/tex; mode=display">
V(a)=Eu(w_0(1+r_f)+a(\tilde r-r_f))</script><p>投资者最优化的一阶条件可以写为</p>
<script type="math/tex; mode=display">
V'(a^*)=E[u'(w_0(1+r_f)+a^*(\tilde r-r_f))(\tilde r-r_f)]=0</script><p>由于投资者是风险厌恶的，所以必然有 $u’’(•)&lt;0$。因此对任何 $a$ 都有</p>
<script type="math/tex; mode=display">
V''(a)=E[u''(w_0(1+r_f)+a(\tilde r-r_f))(\tilde r-r_f)^2]<0</script><p>这意味着 $V’(a^<em>)$ 是一个减函数。所以当且仅当 $V’(0)&gt;0$ 时才有 $a^</em>&gt;0$。因为如果 $V’(0)&lt;0$，那么随 $a$ 从 0 开始增大，$V’(0)$会变得更小，一阶条件就不可能成立。而 $V’(0)$ 可以写为</p>
<script type="math/tex; mode=display">
\begin{aligned}
V'(0)&=E[u'(w_0(1+r_f))(\tilde r-r_f)]\\
&=u'(w_0(1+r_f))E[(\tilde r-r_f)]
\end{aligned}</script><p>要使得 $V’(0)&gt;0$，就必须要有</p>
<script type="math/tex; mode=display">
E[(\tilde r-r_f)]>0</script><p>这样，就证明了等价关系 1 。另两个等价关系类似可证。命题得证</p>
<blockquote>
<p>对一个之前完全持有无风险资产的投资者来说，把一些财富重新分配到风险资产上的行为会对投资者效用带来两方面的影响。一方面，由于风险资产的期望回报率会高于无风险利率，所以消费者的效用会因为其总投资期<strong>望回报率的上升而上升</strong>。另一方面，由于风险资产的回报存在不确定性，所以投资者效用会因为这种<strong>不确定性的上升而下降</strong>。如果将投资者投入到风险资产上的财富量记为 $a$，则可通过 Arrow-Pratt 近似推导出，当 $a$ 很小的时候，<strong>期望回报率上升带来的效用上升幅度与 $a$ 成正比</strong>。<strong>而回报不确定性上升带来的效用下降幅度与 $a^2$ 成正比</strong>。这样，当 $a$ 很小的时候，期望回报率上升带来的正面效应。总是压倒不确定性上升带来的负面效应。所以，只要风险资产的期望回报率高于无风险利率，投资者就一定会在风险资产上投入一些资产。</p>
</blockquote>
<h3 id="9-2-风险资产上的投资量"><a href="#9-2-风险资产上的投资量" class="headerlink" title="9.2 风险资产上的投资量"></a>9.2 风险资产上的投资量</h3><p><strong>命题 9.2：</strong>如果 $a^*$ 是优化一阶条件式的解，那么有以下 3 个等价关系成立：</p>
<ol>
<li>$a^{*’}(w_0)&gt;0$ 当且仅当 $R_A’(•)&lt;0$ (DARA)</li>
<li>$a^{*’}(w_0)=0$ 当且仅当 $R_A’(•)=0$ (CARA)</li>
<li>$a^{*’}(w_0)&lt;0$ 当且仅当 $R_A’(•)&gt;0$ (IARA)</li>
</ol>
<p>初始财富越大，投资者投资于风险资产上的财富量越大（$a^<em>$对 $w_0$的一阶导数大于 0）。我们将这样的偏好称为<strong>绝对风险厌恶下降型偏好</strong>（decreasing absolute risk aversion，简称 DARA）。类似的，对<strong>绝对风险厌恶不变</strong>（CARA）的投资者，投资在风险资产上的财富量与初始财富无关。而表现出<em>*绝对风险厌恶上升</em></em>（increasing absolute risk aversion，简称 IARA）的投资者，由于风险厌恶程度随初始财富增加而增加，所以财富越多，投资在风险资产上的财富量越小</p>
<p><strong>证明：</strong>我们先来证明 DARA</p>
<script type="math/tex; mode=display">
E[u'(\tilde w)(\tilde r-r_f)]=0</script><script type="math/tex; mode=display">
\tilde w= w_0(1+r_f)+a^*(\tilde r-r_f)</script><p>左右两边对 $w_0$ 求导，并注意到 $a^*$ 本身是 $w_0$ 的函数，可得</p>
<script type="math/tex; mode=display">
E[u''(\tilde w)(\tilde r-r_f)[(1+r_f)+(\tilde r-r_f)\frac{da^*}{dw_0}]]=0</script><script type="math/tex; mode=display">
(1+r_f)E[u''(\tilde w)(\tilde r-r_f)]+E[u''(\tilde w)(\tilde r-r_f)^2\frac{da^*}{dw_0}]=0</script><p>由于 $da^*/dw_0$ 不是随机变量</p>
<script type="math/tex; mode=display">
\frac {da^*}{dw_0}=-\frac{(1+r_f)E[u''(\tilde w)(\tilde r-r_f)]}{E[u''(\tilde w)(\tilde r-r_f)^2]}</script><p>用绝对风险规避系数来替换效用的二阶导数 $u’’=-R_Au’$</p>
<script type="math/tex; mode=display">
E[u''(\tilde w)(\tilde r-r_f)]=E[-u'(\tilde w)R_A(\tilde w)(\tilde r-r_f)]</script><p>号用连加号写开</p>
<script type="math/tex; mode=display">
E[-u'(\tilde w)R_A(\tilde w)(\tilde r-r_f)]=\sum_{n=1}^Np_n(-u'(w_n))R_A(w_n)(r_n-r_f)</script><p>由于 $a^*&gt;0$，所以如果 $r_n\ge r_f$，则必有 $w_n\ge w_0(1+r_f)$。所以如果 $r_n\le r_f$，则必有 $w_n\le w_0(1+r_f)$。</p>
<p>因此对任何 n，都有以下不等式成立</p>
<script type="math/tex; mode=display">
(-u'(w_n))R_A(w_n)(r_n-r_f)\ge (-u'(w_n))R_A(w_0(1+r_f))(r_n-r_f)</script><p>又由于风险资产的回报率不是无风险利率，所以在某些可能性下，会有 $r_n\ne r_f$</p>
<script type="math/tex; mode=display">
\sum_{n=1}^Np_n(-u'(w_n))R_A(w_n)(r_n-r_f)>\sum_{n=1}^Np_n(-u'(w_n))R_A(w_0(1+r_f))(r_n-r_f)</script><script type="math/tex; mode=display">
\sum_{n=1}^Np_n(-u'(w_n))R_A(w_0(1+r_f))(r_n-r_f)=-R_A(w_0(1+r_f))E[u'(\tilde w)(\tilde r-r_f)]=0</script><p>上面最后等于 0 的这一步用到了一阶条件式。所以 $E[u’’(\tilde w)(\tilde r-r_f)]&gt;0$, $\frac {da^*}{dw_0} &gt;0$。这样便证明了 DARA 情形下的结论。</p>
<h3 id="9-3-风险资产投资占总财富的比重"><a href="#9-3-风险资产投资占总财富的比重" class="headerlink" title="9.3 风险资产投资占总财富的比重"></a>9.3 风险资产投资占总财富的比重</h3><p>从现实世界的观察来推断，人们大概应该都是绝对风险厌恶程度下降（DARA）的。对这样的人来说，其分配在风险资产上的财富比例会怎样随财富量的变化而变化？即初始财富 $w_0$ 增加 1%的情况下，$a^*$ 会增加百分之多少。</p>
<p>定义 $a^*$ 对初始财富的弹性为 $e(w_0)$</p>
<script type="math/tex; mode=display">
e(w_0)\stackrel{\Delta}{=}\frac{da^*}{a^*}\bigg/\frac{dw_0}{w_0}=\frac{w_0}{a^*}\frac{da^*}{dw_0}</script><p>这个弹性与初始财富 $w_0$ 之间的关系可总结为如下的命题。</p>
<p><strong>命题 9.3：</strong>如果 a*是优化一阶条件(9.1)式的解</p>
<ol>
<li>$e(w_0)&gt;1$ 当且仅当 $R_A’(•)&lt;0$ (DARA)</li>
<li>$e(w_0)=1$ 当且仅当 $R_A’(•)=0$ (CARA)</li>
<li>$e(w_0)&lt;1$ 当且仅当 $R_A’(•)&gt;0$ (IARA)</li>
</ol>
<p><strong>证明 ：</strong>利用命题 2 证明过程中推导出来的式子可知</p>
<script type="math/tex; mode=display">
e(w_0)=\frac{w_0}{a^*}\frac{da^*}{dw_0}=-\frac{w_0(1+r_f)E[u''(\tilde w)(\tilde r-r_f)]}{a^*E[u''(\tilde w)(\tilde r-r_f)^2]}</script><script type="math/tex; mode=display">
\begin{aligned}
e(w_0)-1&=-\frac{w_0(1+r_f)E[u''(\tilde w)(\tilde r-r_f)]+a^*E[u''(\tilde w)(\tilde r-r_f)^2]}{a^*E[u''(\tilde w)(\tilde r-r_f)^2]}\\
&=-\frac{E[u''(\tilde w)(\tilde r-r_f)(w_0(1+r_f)+a^*(\tilde r-r_f))]}{a^*E[u''(\tilde w)(\tilde r-r_f)^2]}\\
&=-\frac1{a^*}\frac{E[u''(\tilde w)(\tilde r-r_f)\tilde w]}{E[u''(\tilde w)(\tilde r-r_f)^2]}\\
&=-\frac1{a^*}\frac{E[-u(\tilde w)R_R(\tilde w)(\tilde r-r_f)]}{E[u''(\tilde w)(\tilde r-r_f)^2]}
\end{aligned}</script><p>其中最后一个等式用到了相对风险规避系数的定义。从这里往下的推导过程就与命题9.2 的证明类似。因此命题得证。</p>
<h3 id="9-4-风险与储蓄"><a href="#9-4-风险与储蓄" class="headerlink" title="9.4 风险与储蓄"></a>9.4 风险与储蓄</h3><p>购买资产是通过牺牲当前的消费来获取未来的消费（因为现金可以买来消费品）。所以，购买资产本质上是一种储蓄行为。</p>
<p><strong>确定性情况</strong></p>
<ul>
<li>消费者在今天拥有初始财富 $w$</li>
<li>储蓄量为 $s$</li>
<li>总回报率 $R=1+r$</li>
<li>今天与明天之间消费者的主观时间偏好为 $\delta (0&lt;\delta&lt;1)$ 。消费者站在今天来看，明天 1 单位的效用只值今天 $\delta$ 单位的效用。</li>
</ul>
<p>可以把消费者的优化问题写成</p>
<script type="math/tex; mode=display">
\max_su(w-s)+\delta u(sR)</script><p>一阶条件为</p>
<script type="math/tex; mode=display">
u'(w-s)=\delta Ru'(sR)</script><p>上式左右两边同时对 $R$ 求导，并注意到 $s$ 是 $R$ 的函数，可以得到</p>
<script type="math/tex; mode=display">
\begin{aligned}
-u''(w-s)\frac{ds}{dR}&=\delta u'(sR)+\delta Ru''(sR)(s+R\frac{ds}{dR})\\
\frac{ds}{dR}&=\frac{\delta u'(sR)+\delta sRu''(sR)}{-u''(w-s)-\delta R^2u''(sR)}
\end{aligned}</script><p>上式中的分母因而总是大于 0 的。这样 $ds/dR$ 的符号就由分子的符号决定。可以将分子简单变形为</p>
<script type="math/tex; mode=display">
\begin{aligned}
\delta u'(sR)+\delta sRu''(sR)&=\delta u'(sR)[1+\frac{sRu''(sR)}{u'(sR)}]\\
&=\delta u'(sR)[1+R_R(sR)]
\end{aligned}</script><p>当 $R_R(sR)<1$ 时，$ds dr>0$。这时，储蓄会随回报率的增加而增加。类似可知，当 $R_R(sR)&gt;1$ 时，储蓄随回报率增加而下降，而当 $R_R(sR)=1$ 时，储蓄与回报率无关。</1$></p>
<p><strong>不同时间与状态间的平滑配置</strong></p>
<p>回报率的上升会给消费者带来两重影响。一方面，R 越高，今天的储蓄在明天产生的财富更多，促使消费者今天多储蓄、少消费——<strong>这是替代效应</strong>（substitution effect）。另一方面，R 越高，今明两天可用来消费的总财富就更多，今天就应该消费更多——<strong>这是收入效应</strong>（income effect）。最终储蓄会怎样随 R 的变化而变化，取决于替代效应与收入效应谁更强。</p>
<p>假设消费者可以把一定量的资源在今天与明天自由配置</p>
<script type="math/tex; mode=display">
\max_{w_1,w_2}u(w_1)+\delta u(w_2)</script><script type="math/tex; mode=display">
s.t.\quad w_1+w_2=w</script><p>的一阶条件为</p>
<script type="math/tex; mode=display">
u'(w_1)=\delta u'(w_2)</script><p>这说明，在考虑了贴现的因素后，消费者会尽量在两个时点之间平滑财富的配置。</p>
<blockquote>
<p>在假设消费者可以在两个不确定的状态中自由配置财富时结果相似，在考虑了概率之后，消费者会尽量在两个状态之间平滑财富的配置。这不是偶然。这是因为我们假设的跨期效用和这个目标函数形式与期望效用函数的形式是类似的，差别只是在前者以贴现率为权重相加，后者以概率为权重相加。</p>
<p>然而，消费者在不同时间平滑配置的倾向，与在不同状态间平滑配置的倾向是不一样的两个概念。但在这里数学框架中，他们都用相对风险规避系数<br>这一个指标来刻画。这不会带来 “风险溢价难题”（risk premium puzzle）</p>
</blockquote>
<p>在前面提到的两种效应中，替代效应会促使人在不同时间做出非平滑的配置——哪个时点配置价值更高就多配那里。而收入效应会促使人在不同时间做平滑配置。对那些风险规避程度更高的人来说，其平滑配置的意愿更大，收入效应就会压倒替代效应，因而回报率越高，储蓄越少。</p>
<p><strong>不确定的状况</strong></p>
<p>假设资产的总回报率 $\tilde R$ 是一个随机变量。这里，我们关心的问题是当 $\tilde R$ 的期望不变，但风险变得更大的时候，消费者现在的储蓄会怎样变化。</p>
<p>如果回报率的风险度上升，那么意味着储蓄的价值下降（可能更容易碰上不好的回报率实现值）。这时还不如减少储蓄，增加当前确定的消费。我们可以把这种回报率风险度上升压低储蓄的倾向理解为一种<strong>替代效应</strong>。但另一方面，还有人可能会认为正因为未来不确定性上升，所以更应该多储蓄来为未来可能出现的不利局面做好准备。这种因为风险度上升而增加储蓄的动机叫做<strong>预防性储蓄</strong>（precautionary saving）动机。</p>
<p>可以把消费者的优化问题写成</p>
<script type="math/tex; mode=display">
\max_su(w-s)+\delta E[u(s\tilde R)]</script><p>一阶条件为</p>
<script type="math/tex; mode=display">
u'(w-s)=\delta E[\tilde Ru'(s\tilde R)]</script><p>假设当储蓄 s 增加时，左边变大，因此右边也需要同时增大。如果定义函数 $g(R)\equiv Ru’(sR)$ , s 增大时 $g(R)$ 期望取需变大，因此为凸函数。</p>
<p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic9-1.jpg" srcset="/img/loading.gif" lazyload alt></p>
<p>可以计算</p>
<script type="math/tex; mode=display">
\begin{align}
g'(R)&=u'(sR)+sRu''(sR)\\
g''(R)&=2su'(sR)+s^2Ru''(sR)\\
\end{align}</script><p>这里我们引入 Kimball 于 1990 年首次提出的<strong>“审慎”</strong>（prudence）的概念。定义绝对审慎系数 $P_A(y)$ 为</p>
<script type="math/tex; mode=display">
P_A(y)\stackrel{\Delta}{=}-\frac{u'''(y)}{u''(y)}</script><p>相对审慎系数 $P_R(y)$ 为</p>
<script type="math/tex; mode=display">
P_R(y)\stackrel{\Delta}{=}-\frac{yu'''(y)}{u''(y)}</script><p>于是</p>
<script type="math/tex; mode=display">
g''(R)=su''(sR)(2+\frac{sRu'''(sR)}{u''(sR)})=su''(sR)(2-P_R(sR))</script><p>只有 $P_R(sR)&gt;2$ 时，$g’’(R)&gt;0$，此时回报率 $\tilde R$ 风险的扩大将增大一<br>期的储蓄 s。相反，如果 $P_R(sR)&lt;2$，回报率风险的扩大将减少一期的储蓄。</p>
<p><strong>命题 9.4：</strong>令 $\tilde R_A$与 $\tilde R_B$ 是两个随机收益，且 $\tilde R_B$ 是 $\tilde R_A$ 的保均展形（$\tilde R_B$风险更高）。若 $s_A$ 与 $s_B$ 分别是初始财富为 w 的风险厌恶投资者分别在面对 $\tilde R_A$ 与 $\tilde R_B$ 两种情况时做出的储蓄，那么有以下三个等价关系成立：</p>
<ol>
<li>$s_A&gt;s_B$，当且仅当 $P_R(sR)&lt;2$</li>
<li>$s_A=s_B$，当且仅当 $P_R(sR)=2$</li>
<li>$s_A<s_B$，当且仅当 $p_r(sr)2>$</s_B$，当且仅当></li>
</ol>
<p>越是审慎的人（相对审慎系数越大）越会增加储蓄。对这些审慎的人，预防性储蓄的动机压过了替代效应。</p>
<p> <strong>CRRA 效用函数的绝对审慎系数</strong></p>
<script type="math/tex; mode=display">
\begin{aligned}
u'(c)&=c^{-\gamma}\\
u''(c)&=-\gamma c^{-\gamma-1}\\
u'''(c)&=\gamma(\gamma+1)c^{-\gamma-2}
\end{aligned}</script><script type="math/tex; mode=display">
\begin{aligned}
P_A(c)&=\frac{u'''(c)}{u''(c)}=-\frac{\gamma(\gamma+1)c^{-\gamma-2}}{-\gamma c^{-\gamma-1}}=\frac{\gamma+1}c\\
P_B(c)&=cP_A(c)=\gamma+1
\end{aligned}</script><h1 id="第-10-讲-求解完备市场中的一般均衡"><a href="#第-10-讲-求解完备市场中的一般均衡" class="headerlink" title="第 10 讲 求解完备市场中的一般均衡"></a>第 10 讲 求解完备市场中的一般均衡</h1><h3 id="10-1-不确定性的模型描述"><a href="#10-1-不确定性的模型描述" class="headerlink" title="10.1 不确定性的模型描述"></a>10.1 不确定性的模型描述</h3><ul>
<li><p>状态 s (共 S 种可能)</p>
</li>
<li><p>s 发生的概率 $\pi_s$ ($0&lt;\pi_s\le 1, \sum_s\pi_s=1$)</p>
</li>
<li><p>$\Pi=\{\pi_s,s\in S\}$ 概率测度（probability measure）</p>
</li>
<li><p>风险资产的回报率 $(r_1,r_2,…,r_S)^T$</p>
</li>
<li><p>在 1 时期状态 s 中的支付  $x_s$</p>
</li>
<li><p>资产 j 的支付 $X^j=(x_1^j,x_2^j,…,x_S^j)^T$</p>
</li>
<li><p>市场中共有 J 种可交易的资产，整个资产市场的支付矩阵（payoff matrix）</p>
<script type="math/tex; mode=display">
X\stackrel{\Delta}{=}\begin{bmatrix}x_1^1&...&x_1^J\\
...&...&...\\
x_S^1&...&x_S^J\end{bmatrix}</script><p>或者 $ X=[X^1\quad…\quad X^j]$</p>
</li>
<li><p>资产组合（portfolio）$\theta = (\theta_1,…,\theta_J)^T$</p>
</li>
<li><p>资产组合在各个状态下的支付</p>
<script type="math/tex; mode=display">
\begin{bmatrix}\sum_{j=1}^Jx_1^j\theta_j\\
...\\
\sum_{j=1}^Jx_S^j\theta_j
\end{bmatrix}=X\theta</script></li>
<li><p>J 种资产在0期的价格 $P\stackrel{\Delta}{=}[p_1\quad…\quad p_J]$</p>
</li>
<li><p>资产组合 $\theta$ 在0期的价值 $\sum_{j=1}^Jp_j\theta_j$</p>
</li>
<li><p>1 期的消费计划 $C=(x_1,…,c_s)^T$, $c_s=\sum_{j=1}^Jx_s^j\theta_j$</p>
</li>
</ul>
<h3 id="10-2-完备市场和-Arrow-Debreu-市场"><a href="#10-2-完备市场和-Arrow-Debreu-市场" class="headerlink" title="10.2 完备市场和 Arrow-Debreu 市场"></a>10.2 完备市场和 Arrow-Debreu 市场</h3><p><strong>定义 10.1：</strong>我们称一个资产市场 X 是<strong>完备</strong>（complete）的，如果任何一个 1 期的消费计划都可以通过某个资产组合来实现。</p>
<p>如果资产的数目 J 还不如状态的数目 S 多，那么方程数目就多于未知数的数目，方程组就无解。所以，一个完备的市场中，资产的数目至少要和状态的数目一样多。<strong>从经济学意义上来说，所谓完备市场，就是消费者可以通过买卖市场上的资产，在任何两个状态之间调配资源。而从数学上来看，完备市场就是可以从市场上找到与状态数同样多的资产，这些资产支付构成了一个满秩（可逆）的方阵。</strong> 因此，检验一个市场是否完备的更简单方法是直接看描述这个市场的支付矩阵$X$ 是否是可逆的。</p>
<p>有与状态数目一样多的资产，且每种资产都分别仅在一种状态中有 1 的支付，而在其他状态中无支付。这种资产市场被叫做 <strong>Arrow—Debreu 市场</strong>（Arrow—Debreu Market）。</p>
<script type="math/tex; mode=display">
I\stackrel{\Delta}{=}\begin{bmatrix}1&0&...&0\\
0&1&...&0\\
...&...&...&...\\
0&0&...&1\end{bmatrix}</script><p>Arrow-Debreu 市场中的资产叫做 Arrow 证券（Arrow security）。Arrow 证券就是只在某一状态中有 1 单位支付，而在其他状态的支付为 0。我们以 $I_s$ 来代表在 s 状态下有 1 单位支付的 Arrow 证券。其支付向量可以写成</p>
<script type="math/tex; mode=display">
I_s=\begin{bmatrix}0\\...\\1\\...\\0\end{bmatrix}</script><p>我们将 Arrow 证券 $I_s$ 在当前（0 期）的价格记为 $\varphi_s$。所有Arrow 证券的价格可以合起来写成 $\varphi\stackrel{\Delta}{=}[\varphi_1\quad…\quad\varphi_S]$</p>
<p>Arrow 证券的价格有一个专门的名称叫做<strong>状态价格</strong>（state price）。因为它给出了 1 期某个状态下 1 单位支付在 0 期的价格。</p>
<p>Arrow 证券价格是资产定价的关键。由于任何一个资产都可以表示成为 Arrow 证券的一个组合，因此知道了所有 Arrow 证券的价格，就知道了所有资产的价格。</p>
<p>支付向量为 $x_j$ 的资产当前的价格为</p>
<script type="math/tex; mode=display">
p_j=\varphi X^j =\sum_{s=1}^S\varphi_sx_s^j</script><p>所有 J 种资产的价格向量可写为</p>
<script type="math/tex; mode=display">
P=\varphi X=[\varphi X^1\quad...\quad\varphi X^S]=[\sum_{s=1}^S\varphi_sx_s^1\quad...\quad\sum_{s=1}^S\varphi_sx_s^J]</script><p>无风险资产是在各个状态中支付都为 1 的资产，如果记无风险资产在 0 期的价格为 $\rho$，它必然等于所有 Arrow 证券的价格之和</p>
<script type="math/tex; mode=display">
\rho=\varphi 1=\sum_{s=1}^S\varphi_s</script><h3 id="10-3-完备市场中的均衡"><a href="#10-3-完备市场中的均衡" class="headerlink" title="10.3 完备市场中的均衡"></a>10.3 完备市场中的均衡</h3><p>我们假设消费者具有如下的 vNM 效用函数</p>
<script type="math/tex; mode=display">
u(c_0)+\delta\sum_{s=1}^S\pi_su(c_s)</script><p>假设消费者在 0 期有消费品禀赋 $e_0$</p>
<p>消费者的优化问题可以写为</p>
<script type="math/tex; mode=display">
\max_{\theta_1,...,\theta_J} u(c_0)+\delta\sum_{s=1}^S\pi_su(c_s)</script><script type="math/tex; mode=display">
\begin{aligned}
s.t.\qquad c_0&=e_0-\sum_{j=1}^Jp_j\theta_j\\
c_s&=e_s+\sum_{j=1}^Jx_s^j\theta_j\quad (s=1,...,S)
\end{aligned}</script><p>由于我们讨论的是完备的市场，所以消费者对 J 种资产的组合选择问题可以简化为对 S 种Arrow 证券的选择。而前面我们已经看到，Arrow 证券在 1 期的支付是非常简单的。这样，消费者的优化问题的约束可以改写为</p>
<script type="math/tex; mode=display">
\begin{aligned}
s.t.\qquad c_0&=e_0-\sum_{s=1}^S\varphi_s\theta_s\\
c_s&=e_s+\theta_s\quad (s=1,...,S)
\end{aligned}</script><p>将 1 期的预算约束代入 0 期的预算约束中，消去所有的 $\theta_s$，消费者的优化问题的约束可改写为</p>
<script type="math/tex; mode=display">
s.t.\qquad c_0+\sum_{s=1}^S\varphi_s(c_s-e_s)=e_0</script><p>建立拉格朗日函数为</p>
<script type="math/tex; mode=display">
\mathcal L=u(c_0)+\delta\sum_{s=1}^S\pi_su(c_s)+\lambda(e_0-c_0-\sum_{s=1}^S\varphi_s(c_s-e_s))</script><p>其一阶条件为</p>
<script type="math/tex; mode=display">
\begin{aligned}
&\frac{\partial\mathcal L}{\partial c_0}=0:\quad u'(c_0)=\lambda\\
&\frac{\partial\mathcal L}{\partial c_s}=0:\quad \delta\pi_su'(c_s)=\lambda\varphi_s\qquad s=1,...,S
\end{aligned}</script><p>将一阶条件代入预算约束 $c_0+\sum_{s=1}^S\varphi_s(c_s-e_s)=w_0$ 可得</p>
<script type="math/tex; mode=display">
u'^{-1}(\lambda)+\sum_{s=1}^S\varphi_s(u'^{-1}(\lambda\varphi_s/\delta\pi_s)-e_s)=e_0</script><p>这是一个只包含拉格朗日乘子 $\lambda$ 的方程，因而可以从中解出 $\lambda$。将其带入一阶条件，即可求出消费者的 Arrow 证券组合选择。它是 Arrow 证券价格的函数。再代入市场出清条件——在每个时间每个状态下经济中的总消费都应该等于总禀赋——就能求出 Arrow 证券的价格。这样，消费者的组合选择和消费也就都能确定下来，均衡就完全求出了。</p>
<p>额外的讨论，对于一阶条件，有</p>
<script type="math/tex; mode=display">
\frac{\delta\pi_su'(c_s)}{u'(c_0)}=\varphi_s</script><p>以及</p>
<script type="math/tex; mode=display">
\frac{\pi_su'(c_s)}{\pi_{s'}u'(c_{s'})}=\frac{\varphi_s}{\varphi_{s'}}</script><p>这意味着 Arrow 证券价格与对应状态发生的概率，以及消费者在这一状态中的边际效用成正比。</p>
<h1 id="第-11-讲-完备市场中一般均衡的性质"><a href="#第-11-讲-完备市场中一般均衡的性质" class="headerlink" title="第 11 讲 完备市场中一般均衡的性质"></a>第 11 讲 完备市场中一般均衡的性质</h1><p>经济学家用一个不包含哲学层面价值判断意义的标准来评价一个均衡的结果是好还是不好——<strong>帕累托最优</strong>（Pareto Optimality）。帕累托最优用对资源的利用效率来做评价标准。简单来说，如果在不降低其他所有人福利（效用）的前提下，增加经济中某个人的福利（效用），那当前的状况就不是帕累托最优。这表明，在当前的状况下，有经济资源没有充分地被利用起来。从经济的角度来看，当前的状况就不能算是“最好”。</p>
<p>在这里，我们要利用的最重要条件是消费者的跨期优化条件。它将资产价格与消费者的消费联系了起来。正因为此，这里所阐述的资产定价逻辑叫做基于消费的<strong>资本资产定价模型</strong>（Consumption based CAPM，简称C-CAPM）。</p>
<h3 id="11-1-最优风险分担"><a href="#11-1-最优风险分担" class="headerlink" title="11.1 最优风险分担"></a>11.1 最优风险分担</h3><p>在经济和金融分析中，我们用一个宗教气息没有那么浓的称谓来称呼前面说的这个上帝，我们将其称为<strong>中央计划者</strong>（central planner）。这个中央计划者有无限的信息获取和资源配置权，并且关心所有人的福利。中央计划者会做出的资源配置就是帕累托最优。</p>
<p>我们假设经济中存在 K 位消费者。每位消费者在中央计划者心中的相对重要性以权重 $\mu_k$ 衡量。中央计划者在全社会预算总约束内（总消费不能超过总禀赋）任意调配资源，以最大化所有人的加权期望效用和。中央计划者的最优化问题可以写为</p>
<script type="math/tex; mode=display">
\max_{\{c_{k0},c_{k1},...,c_{kS}\}_{k=1}^K}\sum_{k=1}^K\mu_k[u_k(c_{k0})+\delta_k\sum_{s=1}^S\pi_su_k(c_{ks})]</script><script type="math/tex; mode=display">
\begin{aligned}
s.t.\qquad \sum_{k=1}^Kc_{k0}&=\sum_{k=1}^Ke_{k0}\\
\sum_{k=1}^Kc_{ks}&=\sum_{k=1}^Ke_{ks}\quad (s=1,...,S)
\end{aligned}</script><p>由此可以看出，我们在通过中央计划者问题求解帕累托最优时，并不涉及任何有关收入分配的价值判断。帕累托最优只要求没有资源被浪费而已。中央计<br>划者在宽泛约束下所选择的资源分配（以及福利状况）就代表了任何资源配置机制所可能达到的福利状况的上限。</p>
<p>为了求解中央计划者问题，设立拉格朗日函数如下</p>
<script type="math/tex; mode=display">
\mathcal L=\sum_{k=1}^K\mu_k[u_k(c_{k0})+\delta_k\sum_{s=1}^S\pi_su_k(c_{ks})]+\eta_0[\sum_{k=1}^Ke_{k0}-\sum_{k=1}^Kc_{k0}]+\sum_{s=1}^S\eta_s[\sum_{k=1}^Ke_{ks}-\sum_{k=1}^Kc_{ks}]</script><p>其一阶条件为</p>
<script type="math/tex; mode=display">
\begin{aligned}
&\frac{\partial\mathcal L}{\partial c_{k0}}=0:\quad \mu_ku_k'(c_{k0})=\eta_0\\
&\frac{\partial\mathcal L}{\partial c_{ks}}=0:\quad \mu_k\delta_k\pi_su_k'(c_{ks})=\eta_s\qquad s=1,...,S
\end{aligned}</script><p>从中可以解出</p>
<script type="math/tex; mode=display">
\begin{aligned}
c_{k0}&=u_k'^{-1}(\eta_0/\mu_k)\\
c_{ks}&=u_k'^{-1}(\eta_s/\mu_k\delta_k\pi_s)
\end{aligned}</script><p>在上一讲中我们曾经在一般均衡的框架下求解过消费者的最优化问题。其优化一阶条件为</p>
<script type="math/tex; mode=display">
\begin{aligned}
&u_k'(c_{k0})=\lambda_k\\
&\delta_k\pi_su_k'(c_{ks})=\lambda_k\varphi_s\qquad s=1,...,S
\end{aligned}</script><p>从中可以解出</p>
<script type="math/tex; mode=display">
\begin{aligned}
c_{k0}&=u_k'^{-1}(\lambda_k)\\
c_{ks}&=u_k'^{-1}(\lambda_k\varphi_s/\delta_k\pi_s)
\end{aligned}</script><p>比较可以发现，如果令 $\lambda_k=\eta_0/\mu_k，\varphi_s=\eta_s/\eta_0$，那么由中央计划者问题得到的配置和相应财富分布下的均衡配置完全一样。换言之，如果将各个消费者的初始财富调整到适当的水平（这相当于在调整 λk），就可以通过均衡来实现中央计划者问题中求取的最优风险分担。因此，有如下<strong>福利经济学第二定理</strong>（Second Theorem of Welfare Economics）在金融市场均衡中的版本。</p>
<p><strong>定理 11.1（福利经济学第二定理）：</strong>在完备市场中，任何一个帕累托最优配置都可以由某个对应某种财富初始分配的市场均衡来达到。<br><strong>定理 11.2（福利经济学第一定理）：</strong>在完备市场中，任何一个由市场均衡所形成的资源分配都是帕累托最优的。</p>
<h3 id="11-2-最优风险分担的特性"><a href="#11-2-最优风险分担的特性" class="headerlink" title="11.2 最优风险分担的特性"></a>11.2 最优风险分担的特性</h3><p>下面，我们就来研究最优风险分担下——同时也是均衡下——各个消费者的消费状况。</p>
<script type="math/tex; mode=display">
c_s=\sum_{k=1}^Kc_{ks}=\sum_{k=1}^Ku_k'^{-1}(\eta_s/\mu_k\delta_k\pi_s)</script><p>可以用上面的方程把 $\eta_s$ 表示为状态 s 下的总消费（$c_s$）的函数</p>
<script type="math/tex; mode=display">
\eta_s=g(c_s)=g(e_s)</script><p>其中第二个等号用到了市场出清条件,代回得</p>
<script type="math/tex; mode=display">
c_{ks}=u_k'^{-1}(g(e_s)/\mu_k\delta_k\pi_s)</script><p>在决定 $c_{ks}$ 的函数自变量中，有状态下的总禀赋 $e_s$（所有消费者在这个状态下的禀赋之和），而没有消费者 k 自己在这个状态下的禀赋 $e_{ks}$ 。</p>
<p>我们中央计划者问题中表示各消费者权重的$\mu_k$应该按照一般均衡中各个消费者的财富多寡来设定。而消费者财富可以理解为她在各期和各状态中禀赋的 0 期现值和。从这个意义上来说，式中的$\mu_k$ 里还是包含了消费者个人的禀赋 $e_{ks}$  的。但要严格写出来，$\mu_k$的函数应该写成</p>
<script type="math/tex; mode=display">
\mu_k(e_{k0}+\sum_{s=1}^S\varphi_se_{ks})</script><p>所以，消费者 k 在 s 状态下的消费只与总禀赋 $e_s$ 和消费者自己的财富有关。而与自己的财富在各个时期的波动无关。</p>
<p><strong>定理 11.3：</strong>完备市场中达到均衡时，消费者在不同状态中消费的波动，只与各个状态中总禀赋的波动有关，而与这个消费者自己禀赋在各个状态中的波动无关。</p>
<p><strong>定理 11.4：</strong>对于任意两个状态 s 与 s’，如果有 $c_s&gt;c_s’$，则对任意消费者 k，必有 $c_{ks}&gt;c_{ks’}$。</p>
<p>不过，所有消费者的消费在不同状态中虽然同向波动，但波动的幅度却未必是一样的。可以直观地想到，那些风险厌恶度更大的消费者，更愿意平滑其不同状态下的消费（让各个状态下的消费差异变小）。反过来，那些风险厌恶度较小的消费者就没有那么强的平滑消费的动力。因此，那些风险厌恶度小的消费者，其不同状态下消费的离散程度应该更大。相应地，他们就承担了更多的总体风险。而通过承担更多的总体风险，他们也能获得更高的期望消费。</p>
<p><strong>定理 11.5（Wilson 定理）：</strong>每位消费者所承担的边际总体风险等于他的绝对风险容忍度占所有消费者绝对风险容忍度总和的比重。如果定义<strong>绝对风险容忍度</strong>（absolute risk tolerance）T为绝对风险规避系数的倒数。即</p>
<script type="math/tex; mode=display">
T(c)\stackrel{\Delta}{=}\frac1{R_A(c)}=-\frac{u'(c)}{u''(c)}</script><p>则消费者在某状态下的消费因总禀赋的变化而变化的幅度，等于其绝对风险容忍度占社会总风险容忍度的比重</p>
<script type="math/tex; mode=display">
\frac{dc_{ks}}{de_s}=\frac{T_k(x_{ks})}{\sum_{k=1}^KT_k(c_{ks})}</script><p>Wilson 定理的证明在本讲附录中。这个定理说明，绝对风险容忍度越高（绝对风险厌恶系数越小）的消费者，其消费在不同状态下的波动性会更大。反过来，绝对风险容忍度越低的消费者，其消费在不同状态下的波动会更小。因此，实现最优风险分担的时候，那些风险容忍度高的人会承担更多的风险。如果有一位消费者是风险中性的，她的绝对风险厌恶系数应该等于 0，她的绝对风险容忍度会是无穷大。因此，如果这位风险中性的消费者的财富足够大，她会承担经济中的所有风险——只有她不同状态下的消费会有波动，而其他所有人的消费都不随状态的变化而变化。</p>
<p>这是分散风险这一概念在一般均衡框架下的体现。在一般均衡中，总禀赋在不同状态下的波动被称为<strong>总体风险</strong>（aggregated risk）。而消费者各自禀赋在不同状态下的波动可能大于总禀赋的波动。这部分叫做<strong>个体风险</strong>（idiosyncratic risk）。通过完备的金融市场，消费者可以通过分散化消除掉那些个体风险，而让自己只承受总体风险。</p>
<h3 id="11-3-代表性消费者"><a href="#11-3-代表性消费者" class="headerlink" title="11.3 代表性消费者"></a>11.3 代表性消费者</h3><p>从 C-CAPM 的名字能看出来，这是一个把资产定价和消费联系在一起的理论。其核心思想是，资产不过是在不同时间和不同状态下调整资源配置的工具。而消费者配置资源的目的是为了尽可能提升自己从消费中获得的效用。这样一来，消费者的消费行为就和资产价格之间有了紧密联系，可以用消费来决定资产价格。</p>
<p>上一讲给出的消费者优化问题</p>
<script type="math/tex; mode=display">
\max_{\theta_1,...,\theta_J} u(c_0)+\delta\sum_{s=1}^S\pi_su(c_s)</script><script type="math/tex; mode=display">
\begin{aligned}
s.t.\qquad c_0&=e_0-\sum_{j=1}^Jp_j\theta_j\\
c_s&=e_s+\sum_{j=1}^Jx_s^j\theta_j\quad (s=1,...,S)
\end{aligned}</script><p>为了直接看到每种资产的价格，这里我们不把这个问题转化为对 Arrow 证券的选择问题。将约束条件带入目标函数，可以将优化问题化为</p>
<script type="math/tex; mode=display">
\max_{\theta_1,...,\theta_J} u(e_0-\sum_{j=1}^Jp_j\theta_j)+\delta\sum_{s=1}^S\pi_su(e_s+\sum_{j=1}^Jx_s^j\theta_j)</script><p>一阶条件为</p>
<script type="math/tex; mode=display">
p_ju'(c_0)=\delta\sum_{s=1}^S\pi_su'(c_s)x_s^j</script><p>$x_j^s/p_j$ 应该等于资产 j 在 s 状态下的（事后）总回报率 $1+r_s$</p>
<script type="math/tex; mode=display">
1=\delta\sum_{s=1}^S\pi_s\frac{u'(c_s)}{u'(c_0)}(1+r_s)</script><p>将连加号的形式改写为期望的形式，上式可以改写为</p>
<script type="math/tex; mode=display">
1=E[\delta\frac{u'(\tilde c_1)}{u'(c_0)}(1+\tilde r_j)]</script><p>把表示消费者的下标 k 加回到上面这个式子，可得</p>
<script type="math/tex; mode=display">
1=E[\delta\frac{u_k'(\tilde c_{k,1})}{u_k'(c_{k,0})}(1+\tilde r_j)]</script><p>这个式子给出了各种资产期望回报率应该满足的条件，因而也是资产定价的方程。这个方程就是 C-CAPM 的核心定价方程。</p>
<p>所谓<strong>代表性消费者</strong>（representative consumer），是我们为了金融和经济分析，人为构造出来的一个虚拟消费者。代表性消费者的消费和禀赋是经济中的总消费和总禀赋。代表性消费者的偏好是所有消费者偏好的平均。这样，我们就可以通过代表性消费者将资产价格和宏观数据联系起来。</p>
<p>当然，要将所有消费者加总成为一个代表性消费者，需要一定前提条件。禀赋在不同消费者之间做不同的分布，所产生的均衡资产价格有可能是不同的。而在将所有消费者加总为代表性消费者的过程中，禀赋和消费在不同消费者之间的分布<strong>信息也必然会损失掉。</strong>由于金融关注的对象是资产价格，我们因而希望能够找到一种消费者的偏好形式，<strong>使得在这种偏好之下，禀赋在不同消费者之间的分布并不影响资产价格。</strong>这样，我们通过代表性消费者求得的资产价格，就会等同于非加总情况下求取的资产价格。1974 年，Rubinstein 给出了这个条件。其结论用定理的形式陈述如下。</p>
<p><strong>定理 11.6：</strong>如果所有消费者具有如下的 HARA 型效用函数</p>
<script type="math/tex; mode=display">
u_k(c_k)=\frac{(c_k-d_K)^{1-\gamma}}{1-\gamma}</script><p>其中 $\gamma&gt;0$，那么这些消费者的行为可以用效用函数如下的代表性消费者来加以概括</p>
<script type="math/tex; mode=display">
u(c)=\frac{(c-d)^{1-\gamma}}{1-\gamma}</script><p>代表性消费者的消费为所有消费者的总消费（$c=\sum_kc_k$），禀赋为所有消费者的总禀赋。</p>
<h3 id="11-4-均衡中的资产价格"><a href="#11-4-均衡中的资产价格" class="headerlink" title="11.4 均衡中的资产价格"></a>11.4 均衡中的资产价格</h3><p>有了代表性消费者之后，我们可以用她来替代一般均衡模型中的所有消费者。相应地，资产定价的方程就变成代表性消费者的优化一阶条件</p>
<script type="math/tex; mode=display">
1=E[\delta\frac{u'(\tilde c_1)}{u'(c_0)}(1+\tilde r_j)]</script><p>定义 $\tilde m$ 为</p>
<script type="math/tex; mode=display">
\tilde m\stackrel{\Delta}{=}\delta\frac{u'(\tilde c_1)}{u'(c_0)}</script><p>式可被改写为</p>
<script type="math/tex; mode=display">
1=E[\tilde m(1+\tilde r_j)]</script><p>$\tilde m$ 是个非常重要的随机变量，叫<strong>随机折现因子</strong>（stochastic discount factor）</p>
<p>对于无风险资产</p>
<script type="math/tex; mode=display">
1=E[\tilde m(1+r_f)]</script><p>与前式相减</p>
<script type="math/tex; mode=display">
0=E[\tilde m(\tilde r_j-r_f)]</script><p>式可改写为</p>
<script type="math/tex; mode=display">
\begin{aligned}
0&=E[\tilde m]E[\tilde r_j-r_f]+cov(\tilde m,\tilde r_j-r_f)\\
\Rightarrow 0&=E[\tilde m](E[\tilde r_j]-r_f)+cov(\tilde m,\tilde r_j)\\
\Rightarrow 0&=\frac{E[\tilde r_j]-r_f}{1+r_f}+cov(\tilde m,\tilde r_j)
\end{aligned}</script><p>上式进一步整理，就得</p>
<script type="math/tex; mode=display">
E[\tilde r_j]-r_f=-(1+r_f)cov(\tilde m,\tilde r_j)</script><p>即是 C-CAPM 定价公式的又一种表达。</p>
<p>为了让这个式子的经济学含义更加清楚，我们将随机折现因子的形式写出来，即</p>
<script type="math/tex; mode=display">
\begin{aligned}
E[\tilde r_j]-r_f&=-(1+r_f)cov(\delta\frac{u'(\tilde c_1)}{u'(c_0)},\tilde r_j)\\
&=-\frac{\delta(1+r_f)}{u'(c_0)}cov(u'(\tilde c_1),\tilde r_j)
\end{aligned}</script><p>某项资产的回报率与未来消费边际效用的协方差越高（这意味着回报率与未来消费的协方差越低）,这项资产的期望超额回报率就越低。</p>
<blockquote>
<p>一种资产如果在消费比较低，消费边际效用比较高的状态时有较高的回报，说明它在消费者最需要消费的时候提供较多回报，属于雪中送炭型资产。消费者自然会更愿意持有这种资产，从而令这种资产的风险溢价和期望回报率较低，价格较高。相反，如果一种资产在消费很多的时候回报较高，那就算锦上添花型资产，消费者对其的评价不会太高，资产的风险溢价就会比较高，当前的价格就会较低。</p>
</blockquote>
<p>对回报率的定义式（$\tilde r_j=\tilde x_j/p_j-1$）两边取期望，有</p>
<script type="math/tex; mode=display">
E[\tilde r_j]=E[\frac{\tilde x_j}{p_j}-1]\Rightarrow E[\tilde r_j]=\frac{E[\tilde x_j]}{p_j}-1</script><p>变形可得</p>
<script type="math/tex; mode=display">
p_j=\frac{E[\tilde x_j]}{1+E[\tilde r_j]}=E[\tilde x_j]/[1+r_f-\frac{\delta(1+r_f)}{u'(c_0)}cov(u'(\tilde c_1),\tilde r_j)]</script><p>这就是给出了资产当前价格的“现值公式”</p>
<p><strong>作为</strong> <strong>C-CAPM</strong> <strong>一个特例的</strong> <strong>CAPM</strong></p>
<p>如果假设消费者的效用函数为二次型（quadratic utility），即 $u(c)=-ac^2+bc (a&gt;0)$。 则消费者的边际效用为线性函数 $u’(c)=-2ac+b$。令市场组合 M 为对经济中的总禀赋的要求权——组合 M 的回报就是经济的总禀赋（$x_s^M=e_s=c_s$）。将其代入随机折现因子的定义式</p>
<script type="math/tex; mode=display">
\tilde m\stackrel{\Delta}{=}\delta\frac{u'(\tilde c_1)}{u'(c_0)}=\delta\frac{-2a\tilde c_1+b}{-2ac_0+b}</script><p>将其代入 C-CAPM 定价公式</p>
<script type="math/tex; mode=display">
E[\tilde r_j]-r_f=-(1+r_f)cov(\delta\frac{-2a\tilde c_1+b}{-2ac_0+b},\tilde r_j)=\delta\frac{2a(1+r_f)}{-2ac_0+b}cov(\tilde c_1,\tilde r_j)</script><p>$\tilde r_M=\tilde c_1/p_M-1$ 代入</p>
<script type="math/tex; mode=display">
\begin{aligned}
E[\tilde r_j]-r_f&=\delta\frac{2a(1+r_f)p_M}{-2ac_0+b}cov(\frac{\tilde c_1}{p_M}-1,\tilde r_j)\\
&=\delta\frac{2a(1+r_f)p_M}{-2ac_0+b}cov(\tilde r_M,\tilde r_j)
\end{aligned}</script><p>上面这个式子对市场组合 <em>M</em> 本身也成立，所以有 </p>
<script type="math/tex; mode=display">
E[\tilde r_M]-r_f=\delta\frac{2a(1+r_f)p_M}{-2ac_0+b}var(\tilde r_M)</script><p>上两式相除可得</p>
<script type="math/tex; mode=display">
\frac{E[\tilde r_j]-r_f}{E[\tilde r_M]-r_f}=\frac{cov(\tilde r_M,\tilde r_j)}{var(\tilde r_M)}</script><p>定义 $\beta_j=\frac{cov(\tilde r_M,\tilde r_j)}{var(\tilde r_M)}$, 可得CAPM定价方程</p>
<script type="math/tex; mode=display">
E[\tilde r_j]-r_f=\beta_j(E[\tilde r_M]-r_f)</script><h1 id="第-12-讲-C-CAPM-及其讨论"><a href="#第-12-讲-C-CAPM-及其讨论" class="headerlink" title="第 12 讲 C-CAPM 及其讨论"></a>第 12 讲 C-CAPM 及其讨论</h1><p>在一般均衡的框架下推导出了如下的资产定价方程</p>
<script type="math/tex; mode=display">
p_j=E[\delta\frac{u'(\tilde c_1)}{u'(c_0)}\tilde x_j]</script><p>或者不那么严格，但却更加简略地写成</p>
<script type="math/tex; mode=display">
p=E(mx)</script><p>任何一种资产定价理论都可最终化成这样的形式。因此，资产定价问题也就归结为如何找出随机折现因子的问题。一个资产定价理论就是一种确定随机折现因子的方法：在理论上，必须要给出随机折现因子构造的方法，说明它反映了何种影响资产价格的力量；而在实践中，需要将随机折现因子和现实世界中可观测的指标联系起来，从而可以实际运用其来给各类资产定价。由于在这里，决定随机折现因子的核心因素是消费，且 CAPM 可以作为一个特例而包括在这一框架中，所以这一资产定价理论就叫做基于消费的资本资产定价模型（C-CAPM）。</p>
<p>对于式子，可以从两个方向来理解。一方面，在已知消费（$c_0，\tilde c_1$）和支付（$\tilde x_j$）的前提下，这个式子可以告诉我们资产当前价格（$p_j$）应该是多少。另一方面，这个式子还可以稍微变形成</p>
<script type="math/tex; mode=display">
u'(c_0)=E[\delta u'(\tilde c_1)(1+\tilde r_j)]</script><p>上式告诉了我们消费者会如何选择消费</p>
<p><strong>在一般均衡中，所有因素都相互影响,任意两个内生变量之间都存在着双向的因果关系。</strong></p>
<p>理清了 C-CAPM 的思路后，下面我们用这个模型来分析一些重要的金融问题。我们知道，资产的期望回报率由无风险利率和资产的风险溢价共同决定。所以，对资产定价的研究需要从无风险利率和风险溢价两方面切入。</p>
<h3 id="12-1-无风险利率的决定"><a href="#12-1-无风险利率的决定" class="headerlink" title="12.1 无风险利率的决定"></a>12.1 无风险利率的决定</h3><p>如果无风险利率为 $r_f$，则有</p>
<script type="math/tex; mode=display">
1=E[\tilde m(1+r_f)]\Rightarrow r_f=\frac1{E[\tilde m]}-1</script><p>定义消费的增长率为</p>
<script type="math/tex; mode=display">
\tilde g\equiv\frac{\tilde c_1}{c_0}-1</script><p>因此，随机折现因子可以利用二阶泰勒展开变形为</p>
<script type="math/tex; mode=display">
\begin{aligned}
\tilde m&=\delta\frac{u'(c_0(1+\tilde g))}{u'(c_0)}\\
&\approx\frac\delta{u'(c_0)}[u'(c_0)+u''(c_0)c_0\tilde g+\frac12u'''(c_0)c_0^2\tilde g^2]\\
&=\delta[1-(-\frac{c_0u''(c_0)}{u'(c_0)})\tilde g+\frac12(-\frac{c_0u''(c_0)}{u'(c_0)})(-\frac{c_0u'''(c_0)}{u''(c_0)})\tilde g^2]\\
&=\delta(1-R_R\tilde g+\frac12R_RP_R\tilde g^2)
\end{aligned}</script><p>其中，$R_R$ 是相对风险规避系数，$P_R$ 是相对审慎系数。注意，相对风险规避系数与相对审慎系数都应是 $c_0$ 的函数。但为了书写简便，这里我们略去了 $c_0$。</p>
<p>于是，随机折现因子的期望为</p>
<script type="math/tex; mode=display">
E[\tilde m]\approx E[\delta(1-R_R\tilde g+\frac12R_RP_R\tilde g^2)]=\delta(1-R_RE(\tilde g)+\frac12R_RP_RE(\tilde g^2))</script><p>定义$\bar g\equiv E[\tilde g]$为消费增长率的期望值。又因为</p>
<script type="math/tex; mode=display">
var(\tilde g)=E[\tilde g-\bar g]^2=E[\tilde g^2]-2\bar g E[\tilde g]+\bar g^2=E[\tilde g^2]-\bar g^2</script><p>在 $\bar g$ 比较小的时候，$\bar g^2$ 会很接近于 0，所以有</p>
<script type="math/tex; mode=display">
E[\tilde g^2]=var(\tilde g)+\bar g^2\approx var(\tilde g)</script><p>将其代入</p>
<script type="math/tex; mode=display">
E[\tilde m]\approx \delta(1-R_R\bar g+\frac12R_RP_R\sigma_g^2)</script><p>于是，无风险利率可以表示为</p>
<script type="math/tex; mode=display">
\begin{aligned}
r_f&=\frac1{E[\tilde m]}-1\approx\frac1{\delta(1-R_R\bar g+\frac12R_RP_R\sigma_g^2)}-1\\
&=\frac{1-\delta+\delta R_R\bar g-\frac12\delta R_RP_R\sigma_g^2}{\delta(1-R_R\bar g+\frac12R_RP_R\sigma_g^2)}\\
&\approx\frac{1-\delta}{\delta}+R_R\bar g-\frac12R_RP_R\sigma_g^2

\end{aligned}</script><p>上式中的最后一个约等号是因为$\bar g$ 与 $\sigma_g^2$ 都是较小的数，所以在分母中忽略去它们，将分母直接变成 $\delta$。如果再定义消费者的主观贴现率为 $\rho\equiv 1/\delta-1$，则上式可以简洁地写成</p>
<script type="math/tex; mode=display">
r_f=\rho+R_R\bar g-\frac12 R_RP_R\sigma_g^2</script><p>注意，在我们的模型中，一直是用消费品做的计价物。所以模型中的各个变量都是不包含货币通胀因素的<strong>真实变量</strong>（real variables），而非<strong>名义变量</strong>（nominal variables）。这里给出的无风险利率也是真实无风险利率。</p>
<p>式表明（真实）无风险利率由<strong>三股力量</strong>所决定。<strong>第一股是消费者的“不耐”</strong>（impatience），由消费者的主观贴现率 $\rho\equiv 1/\delta-1$ 所衡量。消费者越不耐心，主观贴现率 $\rho$ 就越大（贴现因子 $\delta$ 相应越小），无风险利率就应该越高。这是因为当消费者越不耐心的时候，就需要越高的利率来激励其进行储蓄。</p>
<p>决定无风险利率的<strong>第二股力量是经济增长</strong>。这由式中相对风险规避系数 RR 与消费增长平均速 $\bar g$ 的乘积来刻画。经济增长速度越快，就意味未来的消费会更多，储蓄就越发没有必要。在这种情况下，就需要更高的无风险利率来平衡消费者减少储蓄的动机。而经济增速对无风险利率影响的强度由消费者的相对风险规避系数来决定。这是因为在我们所使用的效用函数设定中，相对风险规避系数同时决定了消费者在不同时间、以及不同状态间平滑消费的意愿强度。相对风险规避系数越高，消费者就越愿意在现在与未来之间平滑消费。这时，经济增长所造成的消费者降低储蓄的动机就越强。为了平衡这种更强的降低储蓄的动机，无风险利率就需要更高。</p>
<p>决定无风险利率的<strong>第三股力量是预防性储蓄</strong>（precautionary savings）动机。我们在前面讨论风险下决策的时候已经碰到过这个概念。在式中，预防性储蓄动机由 $-0.5R_RP_R\sigma_g^2$  所刻画。如果经济增长的波动性加大（$\sigma_g^2$ 增大），那么消费者会有出于预防性储蓄动机而增加储蓄的动力。这样，无风险利率就会相应降低来与更强的储蓄动机相匹配。预防性储蓄动机的强度由消费者的相对风险规避系数与相对审慎系数共同决定。</p>
<blockquote>
<p>这几讲的模型中不存在货币，计价物是消费品。所以模型中所有变量都是真实变量（real variable），无风险利率的决定中并不包含货币因素。而在真实世界中，无风险利率往往指国债利率（因为国家有印钞机做后盾，总能保证国债的偿付）。国债利率作为一个名义变量，与真实利率之间差了一个通胀的预期——通胀预期越高，名义利率比真实利率高得更多。如果要把我们这里推导出的无风险利率对应到现实世界中，比较好的对象应该算国债利率减去通胀预期（或者简单地就减去通胀率）。</p>
</blockquote>
<h1 id="第-13-讲-多因子模型与-APT"><a href="#第-13-讲-多因子模型与-APT" class="headerlink" title="第 13 讲 多因子模型与 APT"></a>第 13 讲 多因子模型与 APT</h1><p>前面从均值方差分析开始一直到 C-CAPM 模型，都可以算成是“均衡资产定价”（equilibrium asset pricing）的理论。就其目标来说，是试图从消费者偏好、禀赋分配等最基本的前提条件，推导出所有资产的价格。而从其结果来说，均衡定价可从基本的偏好、禀赋假设，从无到有地定出所有资产的价格。也正因为此，均衡定价理论也被称为<strong>“绝对定价”</strong>。</p>
<p>在金融业的实务中，在投资银行每天给各种资产定价的实践中，应用得更多的是“无套利定价”（no-arbitrage asset pricing）的理论。这套理论不像均衡定价理论那样雄心勃勃，并不试图从无到有地给所有资产定出价格来，而只是问：在已知某些资产的价格之后，怎样给其他一些相关的资产定价。从这个意义上来说，无套利定价理论也可被称为<strong>“相对定价”</strong>。</p>
<p>罗斯于 1976 年首次提出的“套利资产定价理论”（Arbitrage Pricing Theory，<br>简称 APT）。这一理论是对 CAPM 在逻辑上的自然延伸，同时又包含了一些无套利的思想。在这里介绍，以作为从均衡定价理论向无套利定价理论的过渡</p>
<h3 id="13-1-从单因子到多因子"><a href="#13-1-从单因子到多因子" class="headerlink" title="13.1 从单因子到多因子"></a>13.1 从单因子到多因子</h3><p>在实践中，可用如下的 OLS 回归方程来估计各种资产的 $\beta_{Mj}$。</p>
<script type="math/tex; mode=display">
\tilde r_j-r_f=\alpha_j+\beta_{M,j}(\tilde r_M-r_f)+\tilde \varepsilon_j</script><p>所谓因子模型，就是认为资产的期望回报率由一些共同的因素所决定。这些公共的因素就是因子（factor）。CAPM 认为，所有资产的期望回报率由市场组合回报率这一个因素决定。与市场组合回报率的相关性（beta）决定了资产期望回报率的高低。所以，CAPM 给出的定价方程可叫做<strong>单因子模型</strong>（single index model）。</p>
<p>尽管 CAPM 在理论上看上去很漂亮，但它与现实数据的拟合效果却不太理想。从计量经济学的思路来思考，模型解释力不够，那就增加解释变量好了。在这方面，是 Fama 与 French 提出的三因子模型（Fama，French，1993）具有开创性。在这个模型中，Fama 与 French 用市场组合的<strong>超额收益率、规模、和账面市值比</strong> 3 个因子来解释不同资产回报率的不同。其模型方程为</p>
<script type="math/tex; mode=display">
\tilde r_i-r_f=\alpha_i+\beta_{iM}(\tilde r_M-r_f)+\beta_{is}\tilde SMB+\beta_{ih}\tilde HML+\tilde\varepsilon_i</script><p>其中的 $\tilde SMB$是市值因子，表征了上市公司的规模大小，$\tilde HML$ 是账面市值比（book to market），是公司的账面价值除以公司股票总市值。</p>
<h3 id="13-2-多因子模型的直觉"><a href="#13-2-多因子模型的直觉" class="headerlink" title="13.2 多因子模型的直觉"></a>13.2 多因子模型的直觉</h3><p><strong>C-CAPM 框架下的单因子模型</strong></p>
<p>在前面我们介绍的 C-CAPM 中，代表性消费者的优化问题可以写成</p>
<script type="math/tex; mode=display">
\max u(c_0)+\delta E[u(\tilde c_1)]</script><script type="math/tex; mode=display">
s.t.\qquad\tilde c_1=(1+\tilde r_w)(w_0-c_0)</script><p>一阶条件为</p>
<script type="math/tex; mode=display">
1=E[\delta\frac{u'(\tilde c_1)}{u'(c_0)}(1+\tilde r_w)]</script><p>我们假设消费者的效用函数为二次型</p>
<script type="math/tex; mode=display">
u(c)=-\frac12(a-c)^2</script><p>在这样的效用函数下，边际效用为</p>
<script type="math/tex; mode=display">
u'(c)=a-c</script><p>为确保消费的边际效用一直为正，我们要求消费 c 一直小于 a（即 a 很大）</p>
<script type="math/tex; mode=display">
\tilde m=\delta\frac{a-\tilde c_1}{a-c_0}=\delta\frac{a-(1+\tilde r_w)(w_0-c_0)}{a-c_0}=\delta\frac a{a-c_0}-\delta\frac{w_0-c_0}{a-c_0}(1+\tilde r_w)</script><p>如果定义常数 A 和 B 为</p>
<script type="math/tex; mode=display">
A=\delta\frac a{a-c_0}-\delta\frac{w_0-c_0}{a-c_0},B=\delta\frac{w_0-c_0}{a-c_0}</script><p>则随机折现因子可以写成如下的线性（linear）形式</p>
<script type="math/tex; mode=display">
\tilde m=A-B\tilde r_w</script><p>我们知道</p>
<script type="math/tex; mode=display">
1=E[\tilde m(1+\tilde r_j)]\Rightarrow 1=E[\tilde m](1+E[\tilde r_j])+cov(\tilde m,\tilde r_j)</script><p>将随机折现因子的线性表达式代入</p>
<script type="math/tex; mode=display">
\begin{aligned}
E[\tilde r_j]&=\frac 1{E[\tilde m]}-1-\frac{cov(\tilde m,\tilde r_j)}{E[\tilde m]}=r_f-\frac{cov(\tilde m,\tilde r_j)}{E[\tilde m]}\\
&=r_f-\frac{cov(A-B\tilde r_w,\tilde r_j)}{E[\tilde m]}\\
&=r_f+\frac{cov(\tilde r_w,\tilde r_j)}{var(\tilde r_w)}\frac{Bvar(\tilde r_w)}{E[\tilde m]}
\end{aligned}</script><p>如果定义</p>
<script type="math/tex; mode=display">
\beta_{j,w}\stackrel{\Delta}{=}\frac{cov(\tilde r_w,\tilde r_j)}{var(\tilde r_w)}</script><script type="math/tex; mode=display">
\lambda_w=\frac{Bvar(\tilde r_w)}{E[\tilde m]}</script><p>则资产 j 的期望回报率可以写成</p>
<script type="math/tex; mode=display">
E[\tilde r_j]=r_f+\beta_{j,w}\lambda_w</script><p>这便是描述资产回报率的单因子模型，也即 CAPM 的定价方程</p>
<p><strong>C-CAPM 框架下的多因子模型</strong></p>
<p>现在我们假设消费者除了拥有初始财富 $w_0$ 外，还在 0 期与 1 期分别拥有工资性收入 $y_0$ 与 $\tilde y_1$。我们还假设 1 期的工资收入与资产市场总回报相互独立（$cov(\tilde y_1,\tilde r_w)=0$）。这样，消费者的优化问题变成</p>
<script type="math/tex; mode=display">
\max u(c_0)+\delta E[u(\tilde c_1)]</script><script type="math/tex; mode=display">
s.t.\qquad\tilde c_1=(1+\tilde r_w)(w_0+y_0-c_0)+\tilde y_1</script><p>如果消费者的效用函数仍然是二次型，那么随机折现因子可写为</p>
<script type="math/tex; mode=display">
\tilde m=\delta\frac{a-(1+\tilde r_w)(w_0+y_0-c_0)-\tilde y_1}{a-c_0}=\delta\frac a{a-c_0}-\delta\frac{w_0+y_0-c_0}{a-c_0}(1+\tilde r_w)-\delta\frac a{a-c_0}\tilde y_1</script><p>如果定义三个常数 A’、B’、C’分别为</p>
<script type="math/tex; mode=display">
A'=\delta\frac a{a-c_0}-\delta\frac{w_0+y_0-c_0}{a-c_0},B'=\delta\frac{w_0+y_0-c_0}{a-c_0},C'=\delta\frac{a}{a-c_0}</script><p>随机折现因子可以写成如下线性形式</p>
<script type="math/tex; mode=display">
\tilde m=A'-B'\tilde r_w-C'\tilde y_1</script><p>与之前的表达式相比，现在随机折现因子除了受到 $\tilde r_w$ 的影响外，还受到工资收入 $\tilde y_1$ 的影响。将这一线性表达式代入</p>
<script type="math/tex; mode=display">
\begin{aligned}
E[\tilde r_j]&=r_f-\frac{cov(\tilde m,\tilde r_j)}{E[\tilde m]}\\
&=r_f-\frac{cov(A'-B'\tilde r_w-C'\tilde y_1)}{E[\tilde m]}\\
&=r_f+\frac{B'cov(\tilde r_w,\tilde r_j)}{E[\tilde m]}+\frac{C'cov(\tilde y_1,\tilde r_j)}{E[\tilde m]}\\
&=r_f+\frac{cov(\tilde r_w,\tilde r_j)}{var(\tilde r_w)}\frac{B'var(\tilde r_w)}{E[\tilde m]}+\frac{cov(\tilde y_1,\tilde r_j)}{var(\tilde y_1)}\frac{C'var(\tilde y_1)}{E[\tilde m]}\\
&=r_f+\beta'_{j,w}\lambda_w'+\beta'_{j,y}\lambda_y'
\end{aligned}</script><p>如果定义</p>
<script type="math/tex; mode=display">
\begin{aligned}
\beta'_{j,w}=\frac{cov(\tilde r_w,\tilde r_j)}{var(\tilde r_w)}&,\beta'_{j,y}=\frac{cov(\tilde y_1,\tilde r_j)}{var(\tilde y_1)}\\
\lambda_w'=\frac{B'var(\tilde r_w)}{E[\tilde m]}&,\lambda_y'=\frac{C'var(\tilde y_1)}{E[\tilde m]}
\end{aligned}</script><p>则有</p>
<script type="math/tex; mode=display">
E[\tilde r_j]=r_f+\beta'_{j,w}\lambda_w'+\beta'_{j,y}\lambda_y'</script><p>现在，决定资产期望回报率的，既有资产回报率与市场总回报率之间的相关性，也有资产回报率与工资收入之间的相关性。</p>
<h3 id="12-3-ATP"><a href="#12-3-ATP" class="headerlink" title="12.3 ATP"></a>12.3 ATP</h3><p>多因子模型的理论根基其实是 Ross 提出的套利资产定价理论（APT）。</p>
<p>应用多因子模型的投资者需要自行决定哪些因子是重要的，需要用来分析资产回报率。而各个资产对因子的敏感性，也需要投资者自己用经验数据来加以估计。当所有资产的期望回报率都由一组共同的因子所决定的时候，基于无套利的思想，不同资产期望回报率之间会具有某种线性关系——这便是 APT 的思想。</p>
<p>在因子模型中，因子反映了系统风险，我们将其称为<strong>因子风险</strong>（factor risk）。因子前的系数 $\beta$ 叫做资产对因子的<strong>载荷</strong>（loading）。与因子风险无关的剩余风险 $\tilde \varepsilon_i$叫做<strong>个体风险</strong>（idiosyncratic risk）。</p>
<p>我们可以把 CAPM 视为 APT 的一个特例。就 CAPM 看来，所有资产的期望回报率只有一个因子决定，就是市场组合的回报率。</p>
<p><strong>精确单因子模型</strong></p>
<p>我们先用一个简单的单因子模型作为引子，来展现 APT 推导的思路。我们假设只有一个风险因子，且所有资产的个体风险都为 0</p>
<script type="math/tex; mode=display">
\begin{aligned}
&\tilde{r}_{i}=\bar{r}_{i}+\beta_{i} \tilde{f} \\
&\tilde{r}_{j}=\bar{r}_{j}+\beta_{j} \tilde{f}
\end{aligned}</script><p>其中，$\tilde f$ 是因子风险。为了简化分析，我们假设 $E[\tilde f]=0$。这并非一个根本性的假设，放松它也不会改变后面将得出的结论。假设存在资产 i 与 j，$\beta i$ 与 $\beta_j$均非 0，且 $\beta_i\ne\beta_j$。</p>
<p>我们可以构造一个组合 $\tilde r_p$，把我们正规化为 1 的总财富分配到两类资产上。</p>
<script type="math/tex; mode=display">
\begin{aligned}
\tilde{r}_{p} &=w \tilde{r}_{i}+(1-w) \tilde{r}_{j} \\
&=[w \bar{r}_{i}+(1-w) \bar{r}_{j}]+[w \beta_{i}+(1-w) \beta_{j}] \tilde{f}
\end{aligned}</script><p>当组合的因子载荷为 0 时，组合的回报率中就不含有不确定性。我们将这样的组合权重叫做 $w_0$。</p>
<script type="math/tex; mode=display">
w_{0} \beta_{i}+(1-w_{0}) \beta_{j}=0</script><p>解出</p>
<script type="math/tex; mode=display">
w_{0}=\frac{\beta_{j}}{\beta_{j}-\beta_{i}}</script><p>将这个权重 $w_0$ 代回组合 $\tilde r_p$的表达式，可得到一个无风险组合 $p_0$，其回报率为</p>
<script type="math/tex; mode=display">
\tilde{r}_{p_{0}}=w_{0} \tilde{r}_{i}+(1-w_{0}) \tilde{r}_{j}=\frac{\beta_{j}}{\beta_{j}-\beta_{i}} \bar{r}_{i}+(1-\frac{\beta_{j}}{\beta_{j}-\beta_{i}}) \bar{r}_{j}=\frac{\beta_{j} \bar{r}_{i}-\beta_{i} \bar{r}_{j}}{\beta_{j}-\beta_{i}}</script><p>由于 $p_0$ 是无风险组合，所以当市场不存在套利机会的时候，其期望回报率应该与无风险利率 $r_f$相等。所以，</p>
<script type="math/tex; mode=display">
\frac{\beta_{j} \bar{r}_{i}-\beta_{i} \bar{r}_{j}}{\beta_{j}-\beta_{i}}=r_{f} \Rightarrow \frac{\bar{r}_{i}-r_{f}}{\beta_{i}}=\frac{\bar{r}_{j}-r_{f}}{\beta_{j}}</script><p>所以我们可以定义一个常数 $\lambda$ 为</p>
<script type="math/tex; mode=display">
\lambda \triangleq \frac{\overline{r}_{i}-r_{f}}{\beta_{i}}=\frac{\overline{r}_{j}-r_{f}}{\beta_{j}}</script><p>这样一来，对任意资产 i，其期望回报率必然满足</p>
<script type="math/tex; mode=display">
\bar{r}_{i}=r_{f}+\beta_{i} \lambda \quad \forall i</script><p>要运用式来做资产定价，我们还得知道 $\lambda$ 是多少。我们可以通过选择 $w$，来构造另外一个组合 $p_1$，使得 $p_1$ 的因子载荷正好为 1</p>
<script type="math/tex; mode=display">
w_{1} \beta_{i}+(1-w_{1}) \beta_{j}=1 \quad \Rightarrow \quad w_{1}=\frac{1-\beta_{j}}{\beta_{i}-\beta_{j}}</script><p>代回</p>
<script type="math/tex; mode=display">
\begin{aligned}
\tilde{r}_{p_{1}} &=[\frac{1-\beta_{j}}{\beta_{i}-\beta_{j}} \bar{r}_{i}+(1-\frac{1-\beta_{j}}{\beta_{i}-\beta_{j}}) \bar{r}_{j}]+\tilde{f} \\
&=[\frac{1-\beta_{j}}{\beta_{i}-\beta_{j}}+\frac{\beta_{i}-1}{\beta_{i}-\beta_{j}} \bar{r}_{j}]+\tilde{f} \\
&=\frac{\bar{r}_{i}-\beta_{j} \bar{r}_{i}+\beta_{i} \bar{r}_{j}-\bar{r}_{j}}{\beta_{i}-\beta_{j}}+\tilde{f} \\
&=\frac{\beta_{i} \bar{r}_{j}-\beta_{j} \bar{r}_{i}}{\beta_{i}-\beta_{j}}+\frac{\bar{r}_{i}-\bar{r}_{j}}{\beta_{i}-\beta_{j}}+\tilde{f} \\
&=r_{f}+\lambda+\tilde{f}
\end{aligned}</script><p>对上式两边取期望</p>
<script type="math/tex; mode=display">
\lambda=\bar r_{p_1}-r_f</script><p>$\lambda$ 是那个因子载荷为 1 的资产的超额回报率。我们将风险载荷为 1 的组合叫做<strong>因子组合</strong>（factor portfolio），其风险溢价 $\lambda$ 叫做因子溢价（factor premium）。</p>
<p>于是，在这个精确单因子模型中，任何资产的期望收益率都可以表示为</p>
<script type="math/tex; mode=display">
\overline{r}_{i}=r_{f}+\beta_{i}(\bar{r}_{p_{1}}-r_{f})</script><p>由此可见，资产的期望超额回报率就等于资产的因子载荷乘以因子风险溢价。</p>
<p><strong>多因子模型下的 APT</strong></p>
<p>现在我们来考虑更为一般的情况，包含多个因子，且存在个体风险。我们假设有 K 个会影响资产回报率的因子。此外，市场中还存在 N 种资产。每种资产的回报率都同时受到 K个因子的共同影响。我们还假设资产的数量远远比因子的数量多（N 远大于 K）。于是，任意一种资产 i 的回报率可以用如下形式的方程来描述</p>
<script type="math/tex; mode=display">
\tilde{r}_{i}=\bar{r}_{i}+\sum_{k=1}^{K} \beta_{i, k} \tilde{f}_{k}+\tilde{\varepsilon}_{i} \quad i=1,2, \cdots, N</script><p>为了简化分析，我们假设因子和个体风险的期望均为 0，我们还假设因子方差为 1，个体风险的波动方差相等，且不是无穷大。我们考虑由所有 N 种资产形成的组合 p</p>
<script type="math/tex; mode=display">
\tilde{r}_{p}=\sum_{i=1}^{N} w_{i} \tilde{r}_{i}=\sum_{i=1}^{N} w_{i} \bar{r}_{i}+(\sum_{i=1}^{N} w_{i} \beta_{i, 1}) \tilde{f}_{1}+\cdots+(\sum_{i=1}^{N} w_{i} \beta_{i, K}) \tilde{f}_{K}+\sum_{i=1}^{N} w_{i} \tilde{\varepsilon}_{i}</script><p>类似前面的思路，我们想办法选择权重，来将组合 p 中的因子风险完全消除掉。为了做到这<br>一点，要有</p>
<script type="math/tex; mode=display">
\left\{\begin{array}{c}
\sum_{i=1}^{N} w_{i} \beta_{i, 1}=0 \\
\vdots \\
\sum_{i=1}^{N} w_{i} \beta_{i, K}=0
\end{array}\right.</script><p>在 $N&gt;K$ 的时候，这个方程组是有解的（解可能不止一组）。将解出的权重代回式，可以得到</p>
<script type="math/tex; mode=display">
\tilde{r}_{p_0}=\sum_{i=1}^{N} w_{i} \bar{r}_{i}+\sum_{i=1}^{N} w_{i} \tilde{\varepsilon}_{i}</script><p>上面这个式子的右边还包含着个体风险。但是我们知道所有个体风险的方差都为 $\sigma_\varepsilon^2$，所以 $\tilde r_{p_0}$ 的方差就是</p>
<script type="math/tex; mode=display">
\sigma^{2}\left(\tilde{r}_{p_0}\right)=\left(w_{1}^{2}+w_{2}^{2}+\cdots+w_{N}^{2}\right) \sigma_{\varepsilon}^{2}</script><p>当资产的数量很大时（N 很大），每个权重就大概为 1/N。</p>
<script type="math/tex; mode=display">
(\frac{1}{N})^{2} \times N \times \sigma_{\varepsilon}^{2}=\frac{\sigma_{\varepsilon}^{2}}{N}</script><p>只要个体风险的方差不是无穷大，当 $N \rightarrow \infty $ 时，$\sigma^{2}(\tilde{r}_{p_0}) \rightarrow 0$。这意味着当资产数量很大时，消除了因子风险的组合几乎是无风险的，它的回报率就应该等于无风险利率，即</p>
<script type="math/tex; mode=display">
\tilde{r}_{p_0} \approx \sum_{i=1}^{N} w_{i} \bar{r}_{i}=r_{f}</script><p>注意，上式中的 $w_i$ 均为各个 $\beta$ 的函数</p>
<p>采取前面单因子模型的推导思路，可以证明在这样的前提下，各个资产的期望回报率可以表示为</p>
<script type="math/tex; mode=display">
\bar{r}_{i}=r_{f}+\sum_{k=1}^{K} \beta_{i, k} \lambda_{k}</script><p>其中的 $\lambda k$ 为第 k 个因子的因子溢价——即对因子 k 的载荷为 1，而对其他因子载荷为 0 的组合的风险溢价。</p>
<blockquote>
<p>在多因子建模时，选取的因子可以是那些直接可观测的变量，比如 GDP 增速，通胀数据，资本市场指数等，也可以是无法观测的因子。这些不可观测的因子称为潜在因子（latent factor）。对隐性因子的因子载荷和因子溢价的估计方法，这里我们不做介绍。大家只需要知道存在这样的方法可以估计出来就行了。在研究债券收益率曲线的三因子模型中，三个因子（水平、斜率和曲度三个因子）就都是潜在因子</p>
</blockquote>
<h1 id="第-14-讲-无套利定价初探"><a href="#第-14-讲-无套利定价初探" class="headerlink" title="第 14 讲 无套利定价初探"></a>第 14 讲 无套利定价初探</h1><p>此部分与之前的笔记相似，因为本课程更偏向入门，所以可以通过其他笔记来进行学习。</p>
<ol>
<li><a href="https://achlier.github.io/2021/04/22/Financial_Markets_Securities_and_Derivatives/#Unit-2-Forwards-Futures-and-Options">Forwards, Futures and Options</a></li>
<li><a href="https://achlier.github.io/2021/04/25/Mathematical_Finance/">Mathematical_Finance</a></li>
</ol>
<p>不过值得注意的是本课程特别提出了<strong>风险中性世界</strong>（risk neutral world）的描述。作者认为风险中性世界与真实世界有着相同的资产市场结构和资产价格。但与真实世界不同的是，风险中性世界中的投资者都是风险中性的。我们知道，风险中性的投资者会以资产未来支付的期望值折现来给资产定价。如果有一位消费者是风险中性的，她的绝对风险厌恶系数应该等于 0，她的绝对风险容忍度会是无穷大。但这在现实中是很难存在的。</p>
<script type="math/tex; mode=display">
u(c)=\alpha c</script><p>另外，虽然真实世界概率并不存在于定价公式中，但它的影响已经体现在了当前和未来的股价之中。也就是说，0 时刻的股价之所以是 $S_0$ 而不是其他的数，是因为 1 时刻股价有 $p$ 的概率变成 $uS_0$，$1-p$ 的概率变成 $dS_0$。从这个角度来说，前面给出的定价方程其实隐含了真实世界的概率 $p$ 。</p>
<h1 id="第-15-讲-无套利定价理论基础"><a href="#第-15-讲-无套利定价理论基础" class="headerlink" title="第 15 讲 无套利定价理论基础"></a>第 15 讲 无套利定价理论基础</h1><ul>
<li>所有资产 1 期的支付可以用如下支付矩阵来描述</li>
</ul>
<script type="math/tex; mode=display">
X \triangleq\begin{bmatrix}
x_{1}^{1} & \cdots & x_{1}^{J} \\
\vdots & \ddots & \vdots \\
x_{S}^{1} & \cdots & x_{S}^{J}
\end{bmatrix}</script><ul>
<li><p>资产组合（portfolio）$\theta = (\theta_1,…,\theta_J)^T$</p>
</li>
<li><p>资产组合在各个状态下的支付</p>
<script type="math/tex; mode=display">
X\theta=\begin{bmatrix}\sum_{j=1}^Jx_1^j\theta_j\\
...\\
\sum_{j=1}^Jx_S^j\theta_j
\end{bmatrix}</script></li>
<li><p>J 种资产在0期的价格 $P\stackrel{\Delta}{=}[p_1\quad…\quad p_J]$</p>
</li>
<li><p>资产组合 $\theta$ 在0期的价值 $\sum_{j=1}^Jp_j\theta_j$</p>
</li>
</ul>
<p><strong>定义 15.1（套利）：</strong>同时满足下列 3 个条件的资产组合 $\theta$ 叫做套利（arbitrage）：</p>
<ol>
<li>$p\theta\le0$；</li>
<li>$x\theta\ge0$；</li>
<li>前两个不等式中至少有一个是严格不等式。</li>
</ol>
<p>根据这一定义，可以将套利分为三类：</p>
<ul>
<li>$p\theta&lt;0$ 且 $x\theta=0$</li>
<li>$p\theta=0$ 且 $x\theta&gt;0$</li>
<li>$p\theta<0$ 且 $x\theta>0$</0$></li>
</ul>
<h3 id="15-1-资产定价基本定理"><a href="#15-1-资产定价基本定理" class="headerlink" title="15.1 资产定价基本定理"></a>15.1 资产定价基本定理</h3><p>给出了套利的严格定义之后，下面我们介绍无套利定价理论的基础——<strong>资产定价基本定理</strong>（Fundamental Theorem of Asset Pricing）。</p>
<p>在均衡定价理论中，我们推导出了所有资产都需要满足的定价方程</p>
<script type="math/tex; mode=display">
p_{j}=E[\tilde{m} \tilde{x}^{j}]</script><p>$\tilde m$ 是<strong>随机折现因子</strong>（stochastic discount factor）。随机折现因子还被称为<strong>定价核</strong>（pricing kernel）。可以将期望符号用概率的形式写出来，得到</p>
<script type="math/tex; mode=display">
p_{j}=\sum_{s=1}^{S} \pi_{s} m_{s} x_{s}^{j}</script><p>如果定义 $\varphi_s=\pi_sm_s$</p>
<script type="math/tex; mode=display">
p_{j}=\sum_{s=1}^{S} \varphi_{s} x_{s}^{j}</script><p>这表明，任何资产的价格都是其未来各个状态下支付的一个加权平均，权重为 $\varphi_s$。在资产定价理论中，我们给 $\varphi_s$ 一个专门的名字，叫做<strong>状态价格</strong>（state price）。事实上，状态价格就是各个状态对应的 Arrow 证券的价格。</p>
<p>资产定价基本定理讲的就是，只要资产市场中不存在套利机会，所有资产的价格就都可以表示为式这样的形式。下面我们将这一结论严格地写出来。</p>
<p><strong>定义 15.2（状态价格向量）：</strong>状态价格向量 $\varphi =(\varphi_1, …, \varphi_S)^T$ 为一组正数（$\varphi_s&gt;0，\forall s$），使得对于任意资产 j 都有 $p_j=\sum_{s=1}^S\varphi_sx_s^j$ 成立<br><strong>定理 15.3（资产定价基本定理）：</strong>资产市场中不存在套利机会，当且仅当存在状态价格向量。</p>
<p>要证明需要用到<strong>超平面分离定理</strong>（Separating Hyperplane Theorem）。假设在二维平面上有两个互不相交的凸集合 A 和 B（交集为空集），那么我们一定可以用二维平面上的一根直线把这两个集合分开，让 A 与 B 分处这根直线的两边。这根切开了 A 和 B 的直线可以写成方程 $\alpha_1x+\alpha_2y=z$。其中的 $\alpha_1$，$\alpha_2$ 与 z 都是常数。由于点只有在分离了 A 和 B 两个集合的那根直线上这个函数左侧才为 z，所以 A 与 B 上的两点所对应的函数值一定是一个大于 z、一个小于 z。推而广之，任何两个在 <em>S</em> 维空间中的分离凸集，都可以用一个 $S-1$ 维的超平面将其分割开来。</p>
<p>用数学的语言来描述上面的思想，就是任给两个 S 维空间中相互分离的凸集合 A 和 B（二者的交集为空集），在这两个凸集合中分别任取一点，$\forall a\in A$，$\forall b\in B$，一定可以找到一个<strong>线性函数</strong> $F(x)=\alpha_1x_1+\alpha_2x_2+…+\alpha_Sx_S$（其中的 $\alpha_1、\alpha_2、…… \alpha_S$ 都是常数），使得 $F(a)&lt;F(b)$。特别要注意，由于 F 是线性函数，所以对任意实数 $\mu$，它满足性质 $F(\mu a)=\mu F(a)$。</p>
<p><strong>资产定价基本定理的证明思路</strong></p>
<p>给定资产的支付矩阵 x 与资产的价格向量 p。定义如下集合 A</p>
<script type="math/tex; mode=display">
A \triangleq\{(-\sum_{j=1}^{J} p_{j} \theta_{j}, \sum_{j=1}^{J} x_{1}^{j} \theta_{j}, \cdots, \sum_{j=1}^{J} x_{S}^{j} \theta_{j}): \theta_{j} \text { 为实数, } \forall j=1, \cdots, J\}</script><p>再定义另一个集合 B</p>
<script type="math/tex; mode=display">
B \triangleq\{(b_{0}, b_{1}, \cdots, b_{S}): b_{i} \geq 0, \forall i=0,1, \cdots, S\}</script><p>直观上来看，集合 B 是一个锥（cone）。在二维的情况下，集合 B 就是二维坐标系的第一象限（包含坐标轴）。</p>
<p>由前面给出的套利的定义。资产市场中如果没有套利机会，则集合 A 和集合 B 只相交于 $0=(0, 0, …, 0)$ 这一点。也就是说 $A\cap B=\{0\}$。这很容易理解。如果 A 和 B 还相交于非 0 的点，就意味着集合A存在某点使其内的所有元素都非负，至少有一个元素严格为正。这就构成了前面定义的套利。</p>
<p>由超平面分离定理可以知道，可以找到一个线性的函数 $F(x)=\alpha_0x_0+\alpha_1x_1+…+\alpha_sx_s$，使得 $F(a)&lt;F(b)，\forall a\in A,b\in B-\{0\}$</p>
<p>我们还注意到，如果某个元素 $a\in A$，则任给一个实数 $\mu$，必有 $\mu a\in A$。直观来说，如果一个投资组合的当期价格和未来支付组成的向量在集合 A 中，那么把投资组合各项权重全部乘以 $\mu$ 得到一个新的投资组合。这个新的投资组合的当期价值和未来支付组成的向量也必然在集合 A 中。</p>
<p>因此，对任意 $a\in A$，必然有 $F(a)=0$。如果存在某个 $a_0\in A$，使得 $F(a_0)\ne0$，当 $\mu\to\infty$的时候（如果 $F(a_0)&lt;0$，则让 $\mu\to-\infty$），必然有 $F(\mu a_0)\to\infty$。而由于前面已经得出了，任意从 B 集合中找出一个元素 $b\in B$ 固定下来，都应该有 $F(\mu a_0)&lt;F(b)$。当 $F(\mu a_0)\to\infty$ 时，这个不等式显然不能成立。这就产生了矛盾。所以可得结论，对任意 $a\in A$，必然有 $F(a)=0$。</p>
<script type="math/tex; mode=display">
\begin{aligned}
F(a) &=F(-\sum_{j=1}^{J} p_{j} \theta_{j}, \sum_{j=1}^{J} X_{1}^{j} \theta_{j}, \cdots, \sum_{j=1}^{J} X_{S}^{j} \theta_{j})=0\\
\Rightarrow&-\alpha_{0} \sum_{j=1}^{J} p_{j} \theta_{j}+\alpha_{1} \sum_{j=1}^{J} X_{1}^{j} \theta_{j}+\cdots+\alpha_{S} \sum_{j=1}^{J} X_{S}^{j} \theta_{j}=0
\end{aligned}</script><p>由于权重 $\theta$ 可以任意选择，我们完全可以将其设定为某种资产 j 的权重为 1，其它资产的权重全部为 0。所以对任意一种资产 j，都有</p>
<script type="math/tex; mode=display">
-\alpha_{0} p_{j}+\alpha_{1} x_{1}^{j}+\cdots+\alpha_{S} x_{S}^{j}=0</script><p>变形为</p>
<script type="math/tex; mode=display">
p_{j}=\sum_{s=1}^{S} \frac{\alpha_{s}}{\alpha_{0}} x_{s}^{j}</script><p> 对 任 意 的 $b\in B-\{0\}$ ，必有 $F(b)&gt;0$。因此，对线性函数 $F(x)=\alpha_0x_0+\alpha_1x_1+…+\alpha_Sx_S$ 来说，必有 $\alpha_i&gt;0（i=0,1,…,S）$。 所以 $\alpha_s/\alpha_0（s=1,…,S）$全是正数，就是所要寻找的状态价格。定理充分性得证。</p>
<p><strong>定理 15.4：</strong>（第二资产定价基本定理）在一个完备的资产市场中如果不存在套利机会，则存在唯一的状态价格向量。</p>
<h3 id="15-2-风险中性概率"><a href="#15-2-风险中性概率" class="headerlink" title="15.2 风险中性概率"></a>15.2 风险中性概率</h3><script type="math/tex; mode=display">
p=\sum_{s=1}^{S} \pi_{s} \frac{\varphi_{s}}{\pi_{s}} x_{s}=\sum_{s=1}^{S} \pi_{s} m_{s} x_{s}=E[\tilde{m} \tilde{x}]</script><p>从这里可以看出，前面介绍的随机折现因子（定价核）其实就是状态价格除以状态发生的物理概率。由于有这种关系，随机折现因子又叫做<strong>状态价格密度</strong>（state price density），或者叫做<strong>状态价格核</strong>（state price kernel）。在 C-CAPM中，状态价格密度就是消费者的跨期边际效用比 $\delta u’(\tilde c_1)/u’(c_0)$。</p>
<p>无风险资产在未来（1 期）各个状态的支付都为 1 单位消费品。因此，无风险资产在现在（0 期）的价格应该为无风险利率的倒数</p>
<script type="math/tex; mode=display">
e^{-r}=\sum_{s=1}^{S} \varphi_{s}</script><p>定义</p>
<script type="math/tex; mode=display">
q_{s} \triangleq \frac{\varphi_{s}}{\sum_{s=1}^{S} \varphi_{s}}=e^{r} \varphi_{s},\quad\sum_sq_s=1</script><script type="math/tex; mode=display">
p=\sum_{s=1}^{S} \varphi_{s} x_{s}=e^{-r} \sum_{s=1}^{S} e^{r} \varphi_{s} x_{s}=e^{-r} \sum_{s=1}^{S} q_{s} x_{s}</script><p>可以用 $E^Q[\tilde x]$来表示以 $q_1、…、q_S$ 为概率，所计算的随机变量 $\tilde x$的数学期望。期望符号加上上标 Q，用以区分于用真实世界概率 $\pi_1、…、\pi_S$ 计算的数学期望 $E[\tilde x]$。运用这样的符号，上式可以写为</p>
<script type="math/tex; mode=display">
p=e^{-r}E^Q[\tilde x]</script><p>上式对所有资产都成立。它意味着，在这个构造出来的假想概率世界 Q 中，所有资产的价格都等于其未来支付在风险中性概率下的期望，再用无风险利率折现的现值。也就是说，在这个假想的世界中，所有消费者看起来都是风险中性的（所以资产价格等于用无风险利率贴现的期望支付）。所以，构造的这个概率（$q_1、…、q_S$）叫做<strong>风险中性概率</strong>。在构造这个风险中性概率之后，资产定价就变成了一个求取数学期望的简单问题。由于资产在 1 期各个状态下的价格就是其支付，所以用无风险利率折现后的折现资产价格也应该满足鞅性。</p>
<p><strong>风险中性概率的经济含义</strong></p>
<p>为了解释风险中性概率的经济含义，我们现在来研究均衡市场对应的风险中性概率。在C-CAPM 中有如下的资产定价方程</p>
<script type="math/tex; mode=display">
p_j=E[\delta\frac{u'(\tilde c_1)}{u'(c_0)}\tilde x_j]=\sum_{s=1}^S\pi_s\delta\frac{u'(c_s)}{u'(c_0)}x_s</script><p>对应于状态 s 的风险中性概率为</p>
<script type="math/tex; mode=display">
q_{s}=\delta \pi_{s} \frac{u^{\prime}(c_{s})}{u^{\prime}(c_{0})}\bigg/(\sum_{s^{\prime}=1}^{S} \delta \pi_{s^{\prime}} \frac{u^{\prime}(c_{s^{\prime}})}{u^{\prime}(c_{0})})=\frac{\pi_{s} u^{\prime}(c_{s})}{\sum_{s^{\prime}=1}^{S} \pi_{s^{\prime}} u^{\prime}(c_{s^{\prime}})}</script><p>由上式能够看出，风险中性概率（$q_s$）其实是对真实世界概率（$\pi_s$）的调整。调整的依据就是各个状态所对应的消费边际效用。边际效用高（也就是消费水平低）的状态，其风险中性概率就相对更大一些。<strong>在风险中性概率中，那些消费更为宝贵（消费边际效用更高）的状态已经在计算概率时获得了增大。</strong></p>
<h1 id="第-16-讲-多期二叉树定价"><a href="#第-16-讲-多期二叉树定价" class="headerlink" title="第 16 讲 多期二叉树定价"></a>第 16 讲 多期二叉树定价</h1><p>本章比较简单，主要对二叉树模型进行讲解，在此就不记录了。</p>
<p>不过作者在此章节中提出了一个问题：$\sigma$ 是用真实世界的股价数据估计出来的。而为什么我们能用其代替风险中性世界中的方差。这两个方差计算所用的概率都是不一样的，把它们等在一起又有什么意义？</p>
<p>这与一个名叫<strong>哥萨诺夫定理（Girsanov’s Theorem）</strong>的结果有关。这个定理告诉我们，当我们在做概率测度变换的时候（比如从真实世界概率换到风险中性概率），资产价格收益率的均值一般会发生变化，但其波动率却不变。也就是说，不管用什么概率测度来算，波动率都是一样的。所以前面的方程是成立的。</p>
<p>关于此定理的更多内容可以阅读之前的笔记。</p>
<h1 id="第-17-讲-最优停时"><a href="#第-17-讲-最优停时" class="headerlink" title="第 17 讲 最优停时"></a>第 17 讲 最优停时</h1><p>本章依旧建议通过其他笔记来进行学习，主要进行的是美式期权提前行权的判断。</p>
<p>值得注意的几个点是：如果标的资产是不分红的股票（没有股利），那么美式买入期权永远都不会被提前行权</p>
<p>依照 Put-Call Parity</p>
<script type="math/tex; mode=display">
\begin{aligned}
C&=P+S_0-Ke^{-rT}\\
&=(S_0-K)+P+K(1-e^{-rT})
\end{aligned}</script><blockquote>
<p>买权卖权的平价关系对非欧式期权未必成立。但这不妨碍我们用它来对美式期权做一些定性的分析</p>
</blockquote>
<p>这告诉我们，买入期权的价值来自三部分：第一部分是<strong>期权的内在价值</strong>（intrinsic value），即期权现在马上行权能够得到的支付（$S_0-K$）；第二部分是对应卖出期权的价格（P）；第三部分是行权价的时间价值，即等到到期日再行权而不是现在行权能够节省的行权金额的现值（$K(1-e^{-rT})$）。</p>
<p>由于卖出期权的价格 P 不可能比 0 小，行权价的时间价格 $K(1-e^{-rT})$ 也一定严格为正，所以从式可以看出，此时期权的价格会严格高于行权带来的支付，即必有</p>
<script type="math/tex; mode=display">
C>S_0-K</script><p>而对于卖出期权</p>
<script type="math/tex; mode=display">
\begin{aligned}
P&=C+Ke^{-rT}-S_0\\
&=(K-S_0)+C-K(1-e^{-rT})
\end{aligned}</script><p>股价越低或是无风险利率 r 越高，美式卖出期权越可能被提前行权。</p>
<h1 id="第-18-讲-连续时间金融与-Black-Scholes-公式"><a href="#第-18-讲-连续时间金融与-Black-Scholes-公式" class="headerlink" title="第 18 讲 连续时间金融与 Black-Scholes 公式"></a>第 18 讲 连续时间金融与 Black-Scholes 公式</h1><p>本章看似简单，深入会考虑到测度变换等复杂的理论，如果要了解可以参考之前的。</p>
<p><a href="https://achlier.github.io/2021/03/14/Feynman-Kac_To_Black-Scholes-PDE/">Feynman-Kac_To_Black-Scholes-PDE</a></p>
<p><a href="https://achlier.github.io/2021/02/28/Black_Scholes_Model%E6%8E%A8%E5%AF%BC/">Black_Scholes_Model推导</a></p>
<p><a href="https://achlier.github.io/2021/06/16/Black_Scholes_Model%E6%8E%A8%E5%AF%BC_%E8%BF%9B%E9%98%B6%E7%89%88/">Black_Scholes_Model推导_进阶版</a></p>
<h1 id="第-19-讲-动态对冲"><a href="#第-19-讲-动态对冲" class="headerlink" title="第 19 讲 动态对冲"></a>第 19 讲 动态对冲</h1><p>本章依旧建议通过之前的笔记来进行学习，在此就不重复记录了。</p>
<p><a href="https://achlier.github.io/2021/03/05/Option_Greeks/">Option_Greeks</a></p>
<p>但作者提到了几个扩充的点。</p>
<ul>
<li><p>如果一个期权卖出者不做任何对冲，而只持有期权的空头，称其持有一个<strong>裸头寸</strong>（naked position）。与裸头寸相反的，期权卖出者可以在卖出期权的同时买入对应数量的标的资产。这种情况称为<strong>抵补头寸</strong>（covered position）。</p>
</li>
<li><p>动态对冲的实现有赖于市场的持续交易。市场参与者在买入或卖出衍生品之后，需要持续不断的交易来对冲掉衍生品头寸带来的风险。这个过程中，如果市场交易停止（比如因为 911 这样的重大突发事件），那么动态对冲就无法实现，将会让很多之前衍生品头寸变成裸头寸，极大增加市场参与者所面临的风险。因此，越是发生重大突发事件的时候，越需要确保具有充足的流动性可以完成参与者的交易。这是市场监管者在重大事件发生时的首要责任。否则，容易引发市场参与者的大面积破产，引发系统性金融危机</p>
</li>
<li>观察上面对冲期权空头的股票头寸。当股价上涨的时候，股票头寸反而要增加，看起来有“追涨杀跌”（越涨越买、越跌越卖）的特性。这是因为要对冲的衍生品空头在股价越高的时候，带来的亏损越多，因而需要越多的股票多头来对冲。所以，这里的追涨杀跌是完全理性的行为。但在特定的市场状况下，这会加大市场的波动。</li>
<li>金融机构一般都会对其持有的组合给出各种希腊字母的上限。当某个组合达到某个希腊字母上限时，就会触发调整。</li>
<li>组合保险很可能放大市场波动。为了对冲股票头寸的下跌风险，需要提前卖出一部分股票头寸。在动态对冲的过程中，如果股票价格持续下跌，依照前面的组合保险策略，就需要不断卖出股票头寸，从而形成越跌越卖的格局。在有些时候，这会放大市场的波动。</li>
</ul>
<h1 id="第-20-讲-道德风险与信贷配给"><a href="#第-20-讲-道德风险与信贷配给" class="headerlink" title="第 20 讲 道德风险与信贷配给"></a>第 20 讲 道德风险与信贷配给</h1><p>尽管阿罗德布鲁世界给出了不少分析真实世界的洞察，但它太过理想化，无法被用来讨论很多现实世界中重要的金融现象。在真实世界中，广泛存在着各种各样的<strong>金融摩擦</strong>（financial frictions）。这些摩擦包括<strong>信息不对称</strong>（asymmetric information）、<strong>期限错配</strong>（maturity mismatch）、<strong>交易成本</strong>（transaction cost）等。这些金融摩擦的广泛存在，让许多在阿罗德布鲁世界中可以进行的交易在真实世界中无法发生。将这些摩擦忽略掉，很多真实世界中的金融现象就无从分析。</p>
<p>比如，在阿罗德布鲁世界中，所有金融交易都通过一个统一的市场直接完成，无需依赖银行等金融中介机构的协助。换言之，在阿罗德布鲁世界中没有金融中介机构存在的空间。自然，也就无法用阿罗德布鲁模型来分析金融机构。而在真实世界中，像商业银行这样的金融机构往往是金融市场的中心，有时也是金融动荡乃至金融危机发生的源头。为了分析真实世界中的这些重要的金融现象，我们有必要跳出阿罗德布鲁的框架。</p>
<h3 id="20-1-信息不对称与委托代理"><a href="#20-1-信息不对称与委托代理" class="headerlink" title="20.1 信息不对称与委托代理"></a>20.1 信息不对称与委托代理</h3><p>在许多经济学研究领域中，都有信息不对称的身影，以至于经济学中专门出现了<strong>信息经济学</strong>（information economics）这一分支。信息不对称可以分为两大类。第一类是<strong>事后</strong>（ex-post）的信息不对称——发生在交易合约签订之后的信息不对称——叫做<strong>道德风险</strong>（moral hazard）。另一类是<strong>事前</strong>（ex-ante）的信息不对称——存在于交易合约签订之前的信息不对称——叫做<strong>逆向选择</strong>（adverse selection）。</p>
<p>所谓<strong>道德风险，具体是指当交易一方的行为不为另一方所知，且行为的成本由另一方承担时，做出行为的一方会变得更加不审慎。</strong>比如，一个为自己房屋保了全额火灾险的人，可能更加疏于防范火灾。而所谓<strong>逆向选择，具体是说当交易的双方存在不对称信息时，有私人信息的一方可能会选择性地进行那些对自己有利的交易，而不进行对自己不利的交易，从而让另一方受损。</strong>比如，那些身体不好的人会有更强的动力去参与医疗保险，而那些身体健康的人反而可能不太愿意买保险。于是，保险公司就会承担更高的赔付风险。</p>
<p>分析信息不对称的常用工具是<strong>委托代理模型</strong>（principal-agent model）。模型中有两个主体：掌握信息的<strong>代理方</strong>（agent）与没有信息的<strong>委托方</strong>（principal）。代理方掌握的私人信息对双方的福利都有影响。如果不做更多的假设，委托与代理双方的讨价还价很容易产生多重均衡（多种结果都可能产生），因而无法得到有意义的结论。为此，在委托——代理模型中，假设所有讨价还价的权力都在委托方。<strong>委托方会设计一个合约</strong>，代理方只能选择接受还是不接受，而不能提出自己的合约。这样一来，委托——代理模型就描述了一个 Stackelberg 博弈。委托方是先行者（leader），代理方是跟随者（follower）。委托代理模型已经发展成了经济学的一个专门分支——<strong>契约理论</strong>（contract theory）</p>
<h3 id="20-2-信贷配给"><a href="#20-2-信贷配给" class="headerlink" title="20.2 信贷配给"></a>20.2 信贷配给</h3><p><strong>信贷配给，是指借款者即使愿意支付资金出借人所要求的利率水平（甚至更高），仍无法获得贷款的现象。</strong>与转型国家的行政管制不同，这些国家的信贷配给往往产生于借贷双方信息的不对称。这种因<strong>非对称信息</strong>（asymmetric information）而生的金融摩擦广泛存在，是许多现实世界中金融运行与理想状况发生偏差的关键。</p>
<p>接下来介绍的是让·梯若尔（Jean Tirole）给出的信贷配给基本模型。</p>
<blockquote>
<p>“有一位厨师掌握了技术，可以把面粉烤成美味的大饼。厨师自有的面粉数量有限。为了烤出尽可能大的饼，需要找别人借入面粉。但在烤饼的过程中，厨师可以通过偷懒来减轻自己的劳累。而厨师如果偷懒，烤饼的成功率会下降。厨师是否偷懒只有厨师自己知道，是厨师的私人信息。换句话说，当烤饼失败了，借出面粉的人并不知道这是因为厨师偷了懒，还是纯粹就因为这次烤饼时运气不好。”</p>
</blockquote>
<ul>
<li>按照委托代理理论，<strong>借出面粉的人应当是委托方，厨师应当是代理方</strong>。为了维护自己的利益，委托方。会想办法让厨师也在乎饼是否能够烤成功。而要做到这一点，委托方必须要保证在烤饼的面粉中，厨师自己的面粉占了足够大的比例，使得烤饼失败带给厨师的损失，大于厨师偷懒所获得的收益。</li>
</ul>
<p><strong>模型设定</strong></p>
<ul>
<li>初始投资 $I\in[0,+\infty]$</li>
<li><p>成功时初始投资可以产生 RI 的总回报，失败则0</p>
</li>
<li><p>市场利率为 0，并且资金出借方进行完全竞争，因而获得 0 利润</p>
</li>
<li>借款人拥有 A 的初始资金，借款人需要从出借人那里借入 I-A 的资金量来启动项目</li>
<li>当项目成功时，出借人和借款人分别获得 $R_l$ 与 $R_b$（$R_l+R_b=R_I$）</li>
<li>借款人获得借款之后，有两种选择 (“努力”（behaving）/ “偷懒”（misbehaving))</li>
<li>偷懒使得借款人从项目中获得 BI 的私人收益，但代价是项目成功的概率从 $p_H$ 下降到 $p_L=p_H-\Delta p&lt;p_H$</li>
</ul>
<p>当借款人努力时，投资项目有正的净现值（NPV）——项目期望总回报率高于无风险资产的总回报率</p>
<script type="math/tex; mode=display">
p_HR>1</script><p>当借款人偷懒时，即使将项目带给借款人的私人收益算上，项目也只有负的净现值。</p>
<script type="math/tex; mode=display">
P_LR+B<1</script><p>也就是说，只有当借款人努力的时候，项目才值得投资。而当借款人偷懒的时候，投资项目只是浪费资源，没有投资价值。</p>
<p>要激励借款者努力工作，努力时的预期收益必须大于后者</p>
<script type="math/tex; mode=display">
p_HR_b\ge p_LR_b+BI\quad\Rightarrow\quad(\Delta p)R_b\ge BI</script><p>这被称为<strong>激励相容约束</strong>（incentive compatibility constraint）。这个条件的意思是，必须要让借款人在投资项目这张大饼中分得足够大的份额，才会让他有动力努力把项目做好，而不是偷懒来获取私人收益。</p>
<p>借款人要在项目大饼中分得足够大的份额，就意味着出借人从项目收益中拿走的份额不能太大。所以必然有</p>
<script type="math/tex; mode=display">
R_l=RI-R_b\le(R-\frac B{\Delta p})I</script><p>此时出借人从项目中获得的期望收益为 $p_HR_l$。出借人愿意提供借款的前提条件是期望收益不低于提供的贷款数量</p>
<script type="math/tex; mode=display">
p_HR_l\ge I-A</script><p>这被称为出借人的<strong>参与约束</strong>（participation constraint），或者叫做出借人的<strong>个人理性约束</strong>（individual rationality constraint）。</p>
<p>我们假设借人处于完全竞争之中，所以他们应该获得 0 利润，不等号应取等号。将 $R_l$ 的不等式代入</p>
<script type="math/tex; mode=display">
I-A=p_HR_l\le p_H(R-\frac B{\Delta p})I</script><p>从中可以解出</p>
<script type="math/tex; mode=display">
I\le kA</script><p>其中</p>
<script type="math/tex; mode=display">
k=\frac1{1-p_HR+p_HB/\Delta p}</script><p>为了保证投资项目的规模总是有限的，我们要求 k 的分母是个大于零的的有限数，这一不等式可以化为</p>
<script type="math/tex; mode=display">
p_HR-1<p_HB/\Delta p</script><p>它说的是<strong>每单位投资的期望回报率小于每单位投资的代理成本</strong>。如果这个条件不满足，就意味着代理成本比较小，资金出借方愿意借无限的资金给项目方，因而不存在信贷配给现象。在现实中，投资项目的边际回报一定是递减的，而不会像我们这个模型里假定的这样不变。所以投资项目规模有限的性质自然能满足。</p>
<p>又由前面对项目净现值的假设可知</p>
<script type="math/tex; mode=display">
p_LR+B<p_HR\quad\Rightarrow\quad R>B/\Delta p</script><p>这意味着 $k&gt;1$。这说明借款者可以利用借入的资金来加杠杆杠，杆倍数就是 k。</p>
<p>只有借款人自己持有的初始资金比较多，出借人才会相信借款人会努力工作，因而才敢把资金借给借款人。于是，尽管成功的项目总能带来正的回报，出借人也仅会按照借款人的自有资金（A），提供有限的贷款（$(k-1)A$）。其中的 k 称为<strong>资本乘数</strong>（equity multiplier）。</p>
<p>当私人收益率 B 越小的时候，借款人偷懒的动力越小，资本乘数就越大。而当努力与偷懒表现在项目上的差异越大的时候（$\Delta p$）越大，借款人也越有动力努力，资本乘数也越大。如果一个借款人有从来不偷懒的声誉，那么他可以借入无限的资金，从而获得无限的回报。</p>
<h3 id="20-3-信贷配给理论的应用"><a href="#20-3-信贷配给理论的应用" class="headerlink" title="20.3 信贷配给理论的应用"></a>20.3 信贷配给理论的应用</h3><p>存在信贷配给时，企业资本的多寡（或者说企业的资产负债表状况）决定了企业的融资能力。这样，就形成了金融波动（尤其是资产价格的波动）向经济波动传导的机制。经济中资产价格的上升放松了企业的融资约束，导致银行信贷投放增加。而这更多的信贷投放往往又会进一步推升资产价格，并进一步放松融资约束。这样，资产价格泡沫和经济过热就伴随而生。而在经济衰退期，以上链条会反向运行。资产价格下降收紧企业融资约束。随之而来的信贷紧缩会令资产价格进一步走低，从而进一步压缩信贷投放。这样，资产价格的波动就成为了放大经济波动的原因。</p>
<p><strong>债务悬挂（debt overhang）</strong></p>
<p>债务悬挂指借款人因为已经债台高筑，所以无法为可以获得盈利的投资项目获取融资。</p>
<p><strong>债务通缩（debt deflation）</strong></p>
<p>1932 年欧文·费雪（lrving Fisher）在《繁荣与萧条》一书中，首次提出。</p>
<p>假设一项投资项目最低需要 $\bar I$ 的投资量启动。借款人是否能够获取融资来启动投资项目，关键取决于其净资产（扣除了债务之后的资产）是否超过了启动项目所需要的最低资本金 $\bar A=\bar I/k$。而借款人的资产 A 受到资产价格（股价、房价等）的影响很大，名义价值很容易表现出极大的波动性。而负债则经常是固定收益类的产品（贷款、债券等），名义价值比资产更有“刚性”。因此，在经济周期向下的时候，资产价值往往明显下降，导致企业净资产缩水。这会导致企业的融资约束收紧，经济中信贷增长减速，经济活动进一步走弱，物价进一步下降，资产价格进一步缩水，企业净资产的进一步缩水……在这样的情况下，经济陷入债务通缩状况。</p>
<p><strong>我国银行对国企和民企在融资方面的差别对待</strong></p>
<p>一个可能的解释是，相比民营企业来说，国有企业的代理成本更小。因为对国企员工来说，从项目偷懒里面获得的私人收益可能更低一些。这可能是因为国企规章制度更为严格，所以职工谋取私利的难度更大，也可能是因为国营企业行事相对正规，还可能是国企与银行之间的信息不对称程度更低。从这个角度来说，国有企业面临比民营企业更松的融资约束也有一定道理。</p>
<p><strong>财政和货币政策配合</strong></p>
<p>宽松的货币政策需要宽松的财政政策来配合。如果财政政策力度不足，宽松货币政策就难以有效缓解实体经济的融资难问题。</p>
<h1 id="第-21-讲-逆向选择与资本结构"><a href="#第-21-讲-逆向选择与资本结构" class="headerlink" title="第 21 讲 逆向选择与资本结构"></a>第 21 讲 逆向选择与资本结构</h1><p>逆向选择指由于信息不对称所导致的在市场中劣质商品驱除优质商品的现象。在严重情况下，逆向选择会摧毁整个市场。</p>
<p>对募集资金所能获得的投资回报率，公司比市场上的投资者了解得更清楚，因而带来了信息不对称的问题。投资者会怀疑公司募集资金时可能会吹嘘其投资回报率，以便获得融资。当投资者存在这样的怀疑时，即使那些投资回报率确实很不错的公司可能也无法获得融资。极端情况下，所有的企业都可能无法获得投资者的融资支持，导致<strong>市场崩溃</strong>（market breakdown）。就算市场没有崩溃，也会产生<strong>交叉补助</strong>（cross-subsidization）的问题，即因为存在公司欺骗投资者的可能，即使高回报的公司要融资，也必须要接受更为苛刻的融资条件。</p>
<h3 id="21-1-资本结构的经验事实"><a href="#21-1-资本结构的经验事实" class="headerlink" title="21.1 资本结构的经验事实"></a>21.1 资本结构的经验事实</h3><p>一个公司的融资结构就是它的资本结构（capital structure）。学术界有大量对资本结构的实证研究。用美欧等国的数据，研究者得到了以下一些大家基本都能认可的经验事实。</p>
<ul>
<li>盈利越多的公司借债越少。</li>
<li>有形资产较多的公司（如厂房、机床等）债务率较高；无形资产（intangible assets）较多的公司借债较少。无形资产一般用公司的研发和广告等费用占收入的比重来衡量。</li>
<li>公司增发股票时股价会下跌。</li>
<li>公司发行债券时股价的下跌并不明显。</li>
<li>公司在做资本结构变换时（比如发行股票来还债，或是借债来回购股票），公司的价值会随负债率的上升而上升。</li>
</ul>
<p>除了这些没太大争议的事实总结外，还有些目前仍存争议的经验发现。其中最重要的是公司融资的<strong>啄序偏好</strong>（pecking order preference）。有人发现，公司在筹措资金时，首先会选择内部融资（留存收益），其次是发行债券，再次是发行股票。</p>
<h3 id="21-2-MM-定理"><a href="#21-2-MM-定理" class="headerlink" title="21.2 MM 定理"></a>21.2 MM 定理</h3><p>1958 年，Modigliani 和 Miller 两人发表了研究资本结构的文章。这是公司金融理论奠基性的文章。他们在文章中指出，在完美的市场中公司价值与资本结构无关。换言之，在完美的市场中讨论资本结构是没有意义的。这便是“MM 定理”的结论。</p>
<p>记公司的价值为 V，公司股票的总价值为 E，公司发行债券的总价值为 D。公司的总价值应当等于其股票价值和债券价值之和。</p>
<script type="math/tex; mode=display">
V=E+D</script><p>设公司的利润（息税前利润 EBIT）为 $\pi$ ，公司为债务支付的利息为 I。</p>
<p>假设有两家公司 A 和 B 除了资本结构不同之外，其他完全相同。A 公司完全不借债，只靠发行股票融资。B 公司则既发行股票也借债。我们还可以将 A 和 B 两个公司理解为同一家公司不借债和借债的两种状态。</p>
<script type="math/tex; mode=display">
\begin{aligned}
V_A&=E_A\\
V_B&=E_B+D_B
\end{aligned}</script><p>在真实世界中，债务的利息会被计入企业成本，在税前支付。如果公司所得税率为 t 的话，企业就能通过发行债券而节省 $tI$ 的所得税支付。$tI$ 就被称为<strong>税盾</strong>（tax shield）。把税盾效应考虑进来，在股权与债权两种融资方式下，企业会更偏好于债权融资。这种情况下，企业的资本结构就与公司价值有关了。</p>
<p>尽管多借债能增大税盾，但也会令企业破产风险上升，增加企业的破产成本。破产成本分为直接破产成本和间接破产成本。直接破产成本包括破产过程中的律师费、会计费等。间接破产指当企业面临较大破产风险时所遭受的损失，如雇员流失、客户和供应商流失、以及更高的融资成本等。</p>
<p>把税盾效应和破产成本考虑进来，企业就会有一个最优的股权与债权融资的比例。这便是资本结构的<strong>权衡理论</strong>（tradeoff theory）。这时，负债的 B 公司的价值就不再等于 A 公司的价值，而是要加上税盾的现值，并减去破产成本的现值</p>
<script type="math/tex; mode=display">
V_B=V_A+PV(税盾)-PV(破产成本)</script><h3 id="21-3-信息不对称条件下的资本结构"><a href="#21-3-信息不对称条件下的资本结构" class="headerlink" title="21.3 信息不对称条件下的资本结构"></a>21.3 信息不对称条件下的资本结构</h3><p>融资市场中存在大量风险中性的企业。它们手里都没有自有资金，需要从市场上的投资者那里借入</p>
<ul>
<li>企业对资金的需求量是 I</li>
<li>如果项目成功，获得 R 的回报</li>
<li>市场中还存在大量风险中性且完全竞争的投资者，均获得 0 利润</li>
<li>好企业有 p 的概率让投资项目成功，坏企业只有 q 的概率令项目成功，且 $p&gt;q$</li>
<li>项目是值得投资的，有正的净现值 $pR&gt;I$</li>
<li>好企业的比例为 $\alpha$ ，坏企业的比例 $1-\alpha$ 。</li>
</ul>
<p>从投资者的角度来看，将资金借给一个企业后项目成功的概率为</p>
<script type="math/tex; mode=display">
m\triangleq \alpha p+(1-\alpha)q</script><p>假设企业与投资者之间只能签订这样的合同：规定企业在项目成功时获得 $R_f\ge0$ 的回报，而在项目失败时获得 0 回报。由于投资者无法分辨企业的类型，且坏企业不会向投资者揭示其类型，所以所有的企业都会用同样的合约来从市场获得融资。这样，投资者从合约中获得的期望收益将为</p>
<script type="math/tex; mode=display">
m(R-R_f)-I=[\alpha p+(1-\alpha)q](R-R_f)-I</script><p><strong>市场中无借贷（ $mR&lt;I$ ）：市场崩溃</strong></p>
<p>如果坏企业项目的净现值为负，且坏企业的占比足够大</p>
<script type="math/tex; mode=display">
\alpha<\alpha^*,\quad \alpha^*pR+(1-\alpha^*)qR=I</script><p>这时，投资者从融资契约中获得的期望收益不可能大于 0，因而她不会给任何企业提供融资。市场中没有任何融资行为，融资市场崩溃。由于此时即使好企业也无法获得融资，所以相比对称信息的状况，此时<strong>投资不足</strong>（under-investment）</p>
<p><strong>市场中有借贷（$mR\ge I$）：交叉补贴</strong></p>
<p>此时，所有企业都可以获得投资者的融资支持。项目成功时企业所能获得的收益由下面的投资者 0 利润条件决定</p>
<script type="math/tex; mode=display">
m(R-R_f)=I</script><p>上式可以化为</p>
<script type="math/tex; mode=display">
\alpha[p(R-R_f)-I]+(1-\alpha)[q(R-R_f)-I]=0</script><p>这意味着投资者从好企业那里获得了正的利润（$p(R-R_f)&gt;I$），从坏企业那里得到了负利润（$q(R-R_f)&lt;I$）。容易看出，好企业在信息不对称情况下得到的收益小于信息对称情况下的收益。而坏企业则在信息不对称情况下获得了比信息对称时更高的收益。这便形成了好企业对坏企业的交叉补贴。代价则是好企业的收益受损。此外，即使如果坏企业投资项目的净现值小于0，坏企业仍然能够获得融资来建成投资项目。从而导致了<strong>过度投资</strong>（over-investment）。</p>
<p><strong>啄序假说</strong></p>
<p>可以给不同融资方式按照信息强度（information intensity）的从低到高来排序：内部融资（企业自有现金、留存收益）、债券、股票。信息强度可被理解为对某种融资方式的价值评估在多大程度与获取的信息相关。站在企业的外部来看，信息强度越高的融资方式，越需要获取更多信息来评估其价值。这也意味着在信息强度越高的融资方式中，企业越可能利用自己的信息优势来占外部投资者的便宜。考虑到这一点，外部投资者对信息强度越高的融资方式会越审慎，越是会要求更高的回报率。这样，那些质地优良的企业就会倾向于选择信息强度低的融资方式来获取融资，以降低自己的融资成本。所以，企业在融资方式的选择上会有一个按信息强度从低到高的偏好关系。这便是啄序假说的基本观点。</p>
<p>为了区分债券与股票两种融资方式，现在我们假设投资项目在失败时也会带来正的回报 $R^F&gt;0$ 。而在项目成功时，项目回报为 $R^S=R^F+\Delta R&gt;R^F$。</p>
<p>在之前的基础上我们假设市场并未因为信息不对称而崩溃，即</p>
<script type="math/tex; mode=display">
mR^S+(1-m)R^F>I</script><p>令 $\{R_f^S,R_f^F\}$ 为融资合约中规定的，在项目成功及失败两种情况下企业所获的收益。好企业会选择 $R_f^S$ 与 $R_f^F$，使得在满足投资者 0 利润条件的前提下，企业自身所得的期望收益尽可能的高。于是，好企业的契约优化问题可写为</p>
<script type="math/tex; mode=display">
\max_{R_f^S,R_f^F} pR_f^S+(1-p)R_f^S</script><script type="math/tex; mode=display">
s.t.\quad m(R_S-R_f^S)+(1-m)(R_F-R_f^F)-I=0</script><p>上面这个优化问题的约束条件可化为</p>
<script type="math/tex; mode=display">
[p-(1-\alpha)(p-q)](R^{S}-R_{f}^{S})+[1-p+(1-\alpha)(p-q)](R^{F}-R_{f}^{F})-I=0</script><p>可以进一步变形为</p>
<script type="math/tex; mode=display">
\underbrace{p R_{f}^{S}+(1-p) R_{f}^{F}}_{\text {好企业的期望收益 }}=\underbrace{[p R^{S}+(1-p) R^{F}-I]}_{\text {好企业的净现值 }}-\underbrace{(1-\alpha)(p-q)[(R^{S}-R_{f}^{S})-(R^{F}-R_{f}^{F})]}_{\text {逆向选择带来的折扣 }}</script><p>逆向选择的折扣是 $R_f^S$ 的减函数，$R_f^F$ 的增函数。于是对好企业来说，最优的契约一定是</p>
<script type="math/tex; mode=display">
R_f^F=0</script><p>即项目失败时企业没有任何收益。而项目成功时的企业收益则由投资者 0 利润条件决定</p>
<script type="math/tex; mode=display">
m(R^S-R_f^S)+(1-m)R^F=I</script><p>从直觉上可以这样来理解这一结果：逆向选择折扣体现了好企业向坏企业所做的补贴。为了减小这个补贴，好企业会愿意把收益尽可能多地放在只有自己容易获得的地方。相比坏企业，好企业成功的概率更大，而失败的概率更小。自然地，好企业有动力把项目成功时的收益 $R_f^S$  设定得高一些，而项目失败时的概率 $R_f^F$ 设定得小一些。</p>
<p>对投资者来说，在项目失败时她获得 $R^F$ 作为回报。而在项目成功时，投资者的回报为</p>
<script type="math/tex; mode=display">
R^S-R_f^S=R^F+\frac{I-R^F}m</script><p>一定有 $I&gt;R^F$ 。否则项目一定会给出严格为正的投资回报率，市场利率就不可能是 0。所以投资者在项目成功时获得的回报一定大于项目失败时获得的回报（$R^F$）。</p>
<p>让我们来看看前面求解出来的这个最优契约意味着什么。投资者的回报可以分为两部分。一部分是 $R_F$，无论项目成功还是失败都能得到。这部分可以被认为是无风险的债券。另一部分是$(I-R^F)/m$，只有在项目成功时才会有。这部分可被看作股票，回报是不确定的。所以在融资时，企业会先发行无风险的债券来筹资。不足的部分再用股票来弥补。这便是啄序假说的结论。</p>
<h3 id="21-4-分离均衡与增发股票带来的股价下跌"><a href="#21-4-分离均衡与增发股票带来的股价下跌" class="headerlink" title="21.4 分离均衡与增发股票带来的股价下跌"></a>21.4 分离均衡与增发股票带来的股价下跌</h3><p>在前面对啄序假说的模型分析中，我们看到坏企业总是想伪装成好企业。这种投资者无法分辨两类企业的均衡叫做<strong>混合均衡</strong>（pooling equilibrium）。有人可能会想知道，有没有可能坏企业会自己向投资者揭示其类型，从而在市场均衡时让投资者可以把两类企业区分开来？对这个问题的答案是肯定的。这样的均衡叫做<strong>分离均衡</strong>（separating equilibrium）。</p>
<p>现在我们来考虑企业深化投资（investment deepening）的融资决策。假设两类企业都可以通过再投资 I 来将自己的成功概率提升 $\tau$ 的幅度。这里的一个关键假设是深化投资的回报无法与原来项目的回报区分开来。也就是说，企业无法把这个深化投资产生的现金流单拎出来寻求融资。</p>
<p>在这种情况下，投资者的 0 利润条件可以写成</p>
<script type="math/tex; mode=display">
[\alpha(p+\tau)+(1-\alpha)(1+\tau)]R_l=I</script><p>可将其变形为</p>
<script type="math/tex; mode=display">
(m+\tau)R_l=I</script><p>深化投资之后好企业的收益应该不低于不进行深化投资的情形</p>
<script type="math/tex; mode=display">
(p+\tau)(R-R_l)\ge pR</script><p>代入上式可得</p>
<script type="math/tex; mode=display">
(p+\tau) R-(p+\tau) \frac{I}{m+\tau} \geq p R \quad \Rightarrow \quad \tau R \geq \frac{p+\tau}{m+\tau} I</script><p>当 $\tau$ 足够大时，上面这个不等式总是能够成立的。这意味着如果深化投资带来的效果足够好，好企业是会愿意稀释自己的股权来做深化投资的。</p>
<p>坏企业愿意进行深化投资的条件是</p>
<script type="math/tex; mode=display">
(q+\tau)(R-R_l)\ge qR</script><p>它等价于</p>
<script type="math/tex; mode=display">
\tau(R-R_l)\ge qR_l</script><p>同理好公司的条件也可等于</p>
<script type="math/tex; mode=display">
\tau(R-R_l)\ge pR_l</script><p>所以，如果好企业深化投资的条件成立，坏企业深化投资的条件必然也成立。也就是说，如果好企业愿意进行深化投资，坏企业也一定愿意。但这个结论反过来则未必成立。</p>
<p>投资者无法从增发股票这个行为来分辨企业类型。所以，在股票增发前后，好坏两类企业的股票总价值都是</p>
<script type="math/tex; mode=display">
(m+\tau)R-I</script><p>如果好企业深化投资的条件不成立。</p>
<script type="math/tex; mode=display">
(p+\tau)(R-R^B_l)\le pR</script><p>此时，好企业不愿意增发股票来进行深化投资，而坏企业则愿意增发股票。不过，此时投资者会知道只有坏企业会增发股票，所以会要求在项目成功时获得更多的回报以满足其 0 利润条件，即</p>
<script type="math/tex; mode=display">
(q+\tau)R_l^B=I\quad\Rightarrow\quad R_l^B=\frac I{q+\tau}>R_l</script><p>企业股票增发前后的股票总价值差为</p>
<script type="math/tex; mode=display">
\begin{aligned}
V_{0}-V_{1} &=\alpha[p R]+(1-\alpha)[(q+\tau) R-I]-[(q+\tau) R-I] \\
&=\alpha[p R-(q+\tau) R+I]
\end{aligned}</script><p>这个差是正是负取决于方括号这部分的符号。而我们可以推得</p>
<script type="math/tex; mode=display">
p R>(p+\tau)(R-R_{l}^{B})=(p+\tau)(R-\frac{I}{q+\tau})>(q+\tau)(R-\frac{I}{q+\tau})=(q+\tau) R-I</script><p>所以必有</p>
<script type="math/tex; mode=display">
V_0>V_1</script><p>即股票增发的消息会让企业的股票总价值下降。从信息的角度，我们能看出这背后的道理。公司增发股票所做的投资性项目确实可能带来正的净现值。但是，公司增发股票的行为却可能向投资者揭示了自己的类型，改变了投资者的信息。信息的改变令投资者对公司的估价发生变化，从而让股价下跌。</p>
<h1 id="第-22-讲-银行与期限错配"><a href="#第-22-讲-银行与期限错配" class="headerlink" title="第 22 讲 银行与期限错配"></a>第 22 讲 银行与期限错配</h1><p>克服信息不对称虽然是金融中介的重要功能之一，但绝非其唯一功能。金融中介机构还会从其他方面发挥促进市场运行，提升资源配置效率的功能。这里面最重要的功能就是通过金融机构的<strong>期限错配</strong>（maturity mismatch）来发挥<strong>期限转换</strong>（maturity transformation）的作用，从而为金融市场提供<strong>流动性</strong>（liquidity）。</p>
<h3 id="22-1-Diamond-Dybvig-银行模型（DD-模型）"><a href="#22-1-Diamond-Dybvig-银行模型（DD-模型）" class="headerlink" title="22.1 Diamond-Dybvig 银行模型（DD 模型）"></a>22.1 Diamond-Dybvig 银行模型（DD 模型）</h3><p>Diamond 与 Dybvig 这篇经典文章从流动性的角度探讨了银行的功能。如果所有的消费者处在自给自足的状况（autarky），那么他们就会因为流动性冲击的可能，而不敢把太多资源放到高回报的长期项目上，从而失去了获取高收益的机会。就算在流动性冲击发生之后给消费者相互交易的机会，也无法实现最优的资源配置。只有引入银行这种机构才能实现最优配置。但这样做并非全无代价，而会带来银行挤兑的风险。</p>
<p>在 DD 模型中，流动性被赋予以下两个含义。第一，一种资产如果能够及时、且无损失地转化为消费品，我们就称其为<strong>流动性资产</strong>（liquid asset）。第二，如果消费者不能确定其消费的时间，因而渴望持有流动性资产，我们称这样的消费者具有<strong>流动性偏好</strong>（liquidity preference）。</p>
<p><strong>DD 模型设定</strong></p>
<p>DD 模型设定一个包含三个时刻的模型。模型中仅存在一种消费品，既可以用来消费，也可以用来投资。在 0 的时刻，每位消费者均有 1 单位的消费品禀赋。在 1, 2 时刻，消费者不再获得新的禀赋。在各个时刻之间，消费者的主观贴现因子均为 1。</p>
<p>存在两种资产可被用来做投资。消费者可以用它们来将 0 时刻的消费品转移到 1 或 2<br>时刻。两种资产分别是：</p>
<ul>
<li><strong>短期资产（流动性资产）：</strong>短期资产是一种储藏技术。它可以将 t 时刻的 1 单位消费品转化为 t+1 时刻的 1 单位消费品。</li>
<li><strong>长期资产（非流动性资产）：</strong>长期资产需要两期才能获得收益。在 0 时刻将 1 单位消费品投资到长期资产上，在 2 的时刻可以产生 R（&gt;1）单位的消费品。为了分析的简便，我们在讨论银行挤兑之前，都假设长期资产不能在 1 时刻提前变现。这并不会给我们的分析带来实质性的变化，但能简化推理。</li>
</ul>
<p>与短期资产相比，长期资产牺牲了流动性（灵活性），但可以获得更高的投资收益。这种流动性与回报率之间的权衡（tradeoff）在现实世界中非常普遍。</p>
<p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic22-1.jpg" srcset="/img/loading.gif" lazyload alt></p>
<p><strong>流动性偏好</strong></p>
<p>消费者在消费时间的偏好上存在不确定性。消费者有 $\lambda$ 的概率是一个“前期消费者”（无耐心），只能够通过 1 时刻的消费获得效用。消费者还有 $1-\lambda$ 的概率是一个“后期消费者”（有耐心），只能通过 2 时刻的消费获得效用。因此，对前期（后期）消费者来说，2 时刻（1时刻）的消费没有价值。消费者的效用函数为</p>
<script type="math/tex; mode=display">
U(c_{1}, c_{2})=\bigg\{\begin{array}{ll}
u(c_{1}) & \text { 概率为 } \lambda \\
u(c_{2}) & \text { 概率为 } 1-\lambda
\end{array}</script><p>在 0 时刻决策时，消费者需要通过对禀赋的配置来最大化其期望效用</p>
<script type="math/tex; mode=display">
EU=\lambda u(c_1)+(1-\lambda)u(c_2)</script><p> <strong>自给自足状况（autarky）下的配置</strong></p>
<p>令 $\theta$ 为消费者在 0 时刻投资在短期资产中的禀赋比例。自然，0 时刻投资在长期资产中的比例就为 $1-\theta$。</p>
<script type="math/tex; mode=display">
\left\{\begin{array}{l}
c_{1} & = \theta \\
c_{2} & = \theta+(1-\theta) R
\end{array}\right.</script><p>将其代入消费者的期望效用函数可得</p>
<script type="math/tex; mode=display">
EU(\theta) = \lambda u(\theta)+(1-\lambda) u(\theta+(1-\theta) R)</script><p>在内点解上,  $\theta$  的最优值满足</p>
<script type="math/tex; mode=display">
\lambda u^{\prime}(c_{1}^{A T K})= (1-\lambda)(R-1) u^{\prime}(c_{2}^{A T K})</script><p>假设 $\theta^{ATK}$ 为上式的解。将其代入消费者 0 时刻的期望效用函数，可得这种情况下的效用水平 $EU^{ATK}$。$EU^{ATK}$ 可被视为消费者的保留效用。如果其他的安排无法达到这个效用水平，消费者就会退回到自给自足的状态。这是我们接下来福利比较的一个基准。</p>
<p><strong>最佳配置（中央计划者配置）</strong></p>
<p>大数定律告诉我们，不管单个消费者的类型是怎样的，总人口中总有λ 比例的前期消费者，以及 $1-\lambda$ 比例的后期消费者。因此，如果让一个中央计划者（central planner）来配置资源，可以让每个消费者都达到最高的 0 时刻的期望效用。这将产生最佳的配置。我们假设经济中有总数量为 N 的消费者（N 足够大，以使得大数定律生效）。则经济中 0 时刻消费品总禀赋为 N。经济中前期消费者的数量为 $\lambda N$，后期消费者数量为$(1-\lambda)N$。这样，1 时刻经济中消费品的需求量为 $\lambda Nc_1$，2 时刻消费品需求总量为$(1-\lambda)Nc_2$。经济中消费品的总需求量是确定的，不存在不确定性。因此，中央计划者会选择投资组合，精确地在 1 和 2 时刻满足经济中的消费品需求量。所以，</p>
<script type="math/tex; mode=display">
\left\{\begin{array}{l}
\lambda Nc_{1} & = \theta N\\
(1-\lambda)Nc_{2} & =(1-\theta)NR
\end{array}\right.</script><p>最大化所有消费者的总效用 (目标函数以及约束条件中可以把 <em>N</em> 去掉，而不影响优化问题的本质)</p>
<script type="math/tex; mode=display">
\max_\theta EU= \lambda u(c_1)+(1-\lambda)u(c_2)</script><script type="math/tex; mode=display">
\begin{aligned}
\text { s.t. } & \lambda c_{1}=\theta \\
& (1-\lambda) c_{2}=(1-\theta) R
\end{aligned}</script><p>题的约束条件代入目标函数可得</p>
<script type="math/tex; mode=display">
E U=\lambda u(\frac{\theta}{\lambda})+(1-\lambda) u(\frac{(1-\theta) R}{1-\lambda})</script><p>这一优化问题的一阶条件为</p>
<script type="math/tex; mode=display">
u^{\prime}\left(c_{1}^{B S T}\right)=u^{\prime}\left(c_{2}^{B S T}\right) R</script><p>由于 $R&gt;1$，所以必然有 $c_1^{BST}&lt;c_2^{BST}$。假设 $\theta^{BST}$ 为上式的解。对应的中央计划者情况下，消费者的期望效用为 $EU^{ATK}$。$EU^{ATK}$ 就是消费者可能达到的最高效用水平。</p>
<p><strong>市场均衡（market equilibrium）</strong></p>
<p>在模型中真正可能实现的市场是在 1 时刻，当消费者获知了自己的类型之后，前期消费者和后期消费者在市场上交易其资产。前期消费者将自己手中的长期资产出售给后期消费者，换取后期消费者手中的短期资产。如果以消费品为计价单位的长期资产的价格为 p，则前期和后期消费者的人均消费分别为</p>
<script type="math/tex; mode=display">
\left\{\begin{array}{l}
c_{1} & = \theta +(1-\theta)p\\
c_{2} & = (1-\theta+\frac\theta p) R
\end{array}\right.</script><p><strong>命题 22.1：</strong>在 1 时刻的市场中，长期资产的价格一定为 1（p=1）</p>
<p>代入可知 $c_1^{MKT}=1,c_2^{MKT}=R$。市场均衡下消费者在 0 时刻的期望效用为</p>
<script type="math/tex; mode=display">
EU^{MKT}=\lambda u(1)+(1-\lambda)u(R)</script><p>而在自给自足的情况下</p>
<script type="math/tex; mode=display">
\left\{\begin{array}{l}
c_{1}^{MKT} & \le 1\\
c_{2}^{MKT} & \le R
\end{array}\right.</script><p>且两个不等式不可能同时取等号。因此，市场均衡下的消费（1 时刻和 2 时刻）严格占优于自给自足时的消费状况。所以，必然有 $EU^{MKT}&gt;EU^{ATK}$。</p>
<p>前面已经计算出来了，在中央计划者的安排中，1 和 2 时刻的人均消费量</p>
<script type="math/tex; mode=display">
\left\{\begin{array}{l}
c_{1} & = \frac\theta\lambda\\
c_{2} & = \frac{(1-\theta) R}{1-\lambda}
\end{array}\right.</script><p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic22-2.jpg" srcset="/img/loading.gif" lazyload alt></p>
<p>容易验证，($c_1=1, c_2=R$)这个点在直线上（$\theta=\lambda$ 时）。中央计划者可以在这根直线上选择配置，以达成最优条件。因此，在一般情况下，$EU^{BST}&gt;EU^{MKT}$。只有在 $u’(1)=u’(R)R$ 这一特殊情况下（也就是效用函数为对数效用时），。还需要$EU^{BST}=EU^{MKT}$ 注意上图只是示意性的。根据前面的计算，在最优的资源配置下（$BST、<br>BNK$）应该有 $c_1&lt;c_2$。但为了让图形看起来更清楚，我们在上图中并未严格照此绘图。</p>
<blockquote>
<p>在时刻 1 的资产市场中，长期资产的价格对交易数量完全不敏感。但这恰恰说明了市场对流动性的提供是无效率的。</p>
</blockquote>
<h3 id="22-2-银行"><a href="#22-2-银行" class="headerlink" title="22.2 银行"></a>22.2 银行</h3><p>与前面介绍的这种 1 时刻开放的市场相比，银行可以做得更好。银行业是自由进入，完全竞争的。银行之间的竞争使得银行取得零利润。而为了尽可能地争取储户，银行会愿意给储户提供尽可能高的 0 期期望效用，从而形成与中央计划者完全一致的优化目标函数。</p>
<p>由于银行配置与中央计划者配置完全一样，所以必然有 $c_1^{BNK}&lt;c_2^{BNK}$。因此，后期消费者没有动力伪装成前期消费者，在时刻 1 从银行提款。如果他这样做了，他只能在 2 时刻获得 $c_1^{BNK}$（而非 $c_2^{BNK}$）的消费量。他的效用会因此而降低。</p>
<p>尽管银行这一机制看上去很不错，但它存在一个内生的脆弱性——<strong>银行挤兑</strong>（bank run）。用经济学的术语来说，在银行这一制度安排下存在多重均衡——除了前面给出的前期与后期消费者分期取款，进而达成各自消费的最大化这一均衡之外，还存在着另外的银行挤兑均衡。</p>
<p>在银行这一制度安排下，有两个纳什均衡：<br>1) <strong>正常均衡：</strong>所有后期消费者相信别的后期消费者都会等到 2 时刻去提款，所有后期消费者就会等到 2 时刻提款。这样，最优的资源配置可以达成。<br>2) <strong>银行挤兑均衡：</strong>所有后期消费者相信别的后期消费者会抢在 1 时刻去提款。在这种信念之下，所有后期消费者都会在 1 时刻提款。此时发生银行挤兑。</p>
<p>决定这两个均衡哪个会变为现实的，是后期消费者的信念（belief）。无论是“没有挤兑”的信念，还是“有挤兑”的信念，都会<strong>自我实现</strong>（self-fulfilling），即信念会将信念自己所预期的结果给生成出来。仅靠银行自身是不能消除银行挤兑这种风险的。因此，银行体系的稳定需要外力来加以保证。这种外力的关键是稳定后期消费者的预期，让他们没有提前提款的动力。一种常见的方式是设立<strong>存款保险</strong>（deposit insurance），保证后期消费者即使在银行出现问题的时候也能在 2 时刻确定地获得其应得的支付。这样一来，后期消费者就没有动力抢在 1 时刻提款，银行挤兑也就不会发生。</p>
<h1 id="第-23-讲-行为金融学初探"><a href="#第-23-讲-行为金融学初探" class="headerlink" title="第 23 讲 行为金融学初探"></a>第 23 讲 行为金融学初探</h1><p>市场中的价格总是反映了资产的基本面价值，价格总是正确的（prices are right）——这便是所谓的<strong>有效市场</strong>（efficient market）。弗里德曼早在 1953 年就在文章中阐述了这一逻辑。我们将非理性的交易者（投资者）称为<strong>噪声交易者</strong>（noise traders），而将理性的投资者称为<strong>套利者</strong>（arbitrageurs）。我们还将<strong>套利</strong>（arbitrage）称为无风险获取收益的机会。用这样的语言来翻译弗里德曼的逻辑，就是：一旦噪声交易者让资产价格偏离了基本面价值，就马上在市场上创造了套利机会，从而吸引套利者进入。套利者在收取套利收益的同时也让资产价格回归基本面。</p>
<p>以上的逻辑有两点需要仔细分析。首先，是不是噪声交易者一旦推动资产价格偏离了基本面，套利行为就一定会让资产价格快速回归基本面？第二，类似噪声交易者这样的非理性行为是否会在市场上长期存在？对这两个问题的回答分别属于有限套利和非理性偏差的内容。这二者便是<strong>行为金融学</strong>（behavioral finance）的两大主体内容。</p>
<h3 id="23-1-投资绩效约束下的有限套利"><a href="#23-1-投资绩效约束下的有限套利" class="headerlink" title="23.1 投资绩效约束下的有限套利"></a>23.1 投资绩效约束下的有限套利</h3><p>行为金融学认为，市场中存在诸多因素，有可能使得套利仅能在有限的程度上展开。这种<strong>有限套利</strong>（limits to arbitrage）可能导致资产价格偏离基本面价值。大体来说，对套利的限制来自<strong>基本面风险</strong>（fundamental risk）、<strong>实施成本</strong>（implementation costs）和<strong>噪声交易者风险</strong>（noise trader risk）等因素。除了上面提到的这些妨碍套利的风险之外套利还可能面临模型风险（model-based risk）。</p>
<p>有限套利产生的原因有很多种。在这里，我们利用 Shleifer 与 Vishny（1997）给出的模型来介绍一种特殊的有限套利来源——投资绩效约束下的有限套利。</p>
<p><strong>模型设定</strong></p>
<p>模型中有三个时刻。三个时刻之间没有折现，无风险利率为 0。经济中存在一种总供给量被正规化为 1 的资产。该资产在时刻 1 和 2 没有支付（payoff），但在时刻 3 会确定性地带来支付 V。经济中存在两种投资者：噪声交易者（noise traders）与风险中性的套利者（arbitrageurs）。在时刻 3，两类投资者都清楚无误地知道资产的支付 V。因此，时刻 3 的资产价格 $p_3$必定为 V。</p>
<p>不过，噪声交易者在时刻 1 与时刻 2 可能会对资产在时刻 3 的支付产生错误的认识。在时刻 1 和 2，噪声交易者认为时刻 3 的资产支付为 $V-S_t（S_t\ge 0）$。其中的 $S_t$ 为噪声交易者对资产支付的误判程度。$S_t$ 前面的负号意味着我们假设噪声交易者总是悲观（pessimistic）的。给定噪声交易者的错误认知，在 $t=1,2$ 时，噪声交易者对资产的总需求为</p>
<script type="math/tex; mode=display">
N(t)=\frac{V-S_t}{p_t}</script><p>在时刻 1，套利者知道当期噪声交易者的认知偏差为 $S_1$。套利者在做时刻 1 的投资决策时，可以利用这一信息。但是，套利者在时刻 1 并不清楚时刻 2 噪声交易者的认知偏差 $S_2$ 会是多少，而只知道 $S_2$ 有如下的概率分布</p>
<script type="math/tex; mode=display">
S_2=\bigg\{\begin{array}{ll}
S>S_1 & \text { 概率为 } q \\
0 & \text { 概率为 } 1-q
\end{array}</script><p><img src="/2022/01/27/%E9%87%91%E8%9E%8D%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%BA%8C%E5%8D%81%E4%BA%94%E8%AE%B2/pic23-1.jpg" srcset="/img/loading.gif" lazyload alt></p>
<p>在时刻 1，套利者有外生给定的 $F_1$ 的资金可用来投资到资产上。在时刻 2，套利者的可用资金将变成 $F_2$。套利者 2 时刻所拥有的资金量 $F_2$ 由其 1、2 两时刻间的投资绩效所决定。因为资产的总供给量为 1，所以有</p>
<script type="math/tex; mode=display">
\frac{V-S_2}{p_2}+\frac{F_2}{p_2}=1</script><p>解出</p>
<script type="math/tex; mode=display">
p_2=V-S_2+F_2</script><p>我们假设 $F_2&lt;S_2$，即套利者所拥有的资金量不足以使 2 时刻的资产价格回到其基本面所对应的价格 V。</p>
<p>在 1 时刻，套利者不一定会愿意把所有的资金 $F_1$ 都投入到资产中。假设在 1 时刻，套利者投入 $D_1$ 的资金量（$D_1\le F_1$）在资产上，则类似前面计算 2 时刻资产价格的方式，可以计算出 1 时刻的资产价格为</p>
<script type="math/tex; mode=display">
p_1=V-S_1+D_1</script><p>我们继续假设 $F_1&lt;S_1$，即 1 时刻的价格也无法被套利者推回至基本面对应的价格 V。</p>
<p><strong>基于投资绩效的套利</strong></p>
<p>套利者的套利能力受到其投资绩效的约束（performance-based arbitrage，简称 PBA）。这是模型中只存在有限套利的原因。我们可以把套利者设想为基金经理。他们从资产管理场上募集资金进行套利活动。他们第 2 时刻能够获取的资金量 $F_2$ 与其第 1 时刻投资所获得的投资总回报率（假设为 R）正相关。具体地，我们假设</p>
<script type="math/tex; mode=display">
\begin{aligned}
F_{2} &=F_{1}(1+a(R-1)) \\
&=F_{1}(a R+1-a)
\end{aligned}</script><p>其中，$a\ge 1$为一个参数。这一函数形式意味着如果套利者第1时刻的投资回报率为正（$R-1&gt;0$），则套利者第 2 期可掌握的资金量会多于第 1 期。反之，如果投资回报率为负（$R-1&lt;0$），则套利者会遭遇基金赎回，第 2 期能掌握的资金量将低于 1 期。而如果投资回报率为 0（$R-1=0$），则套利者两期可支配资金量相等。</p>
<p>对套利者来说，他们 1 时刻投资的总回报为</p>
<script type="math/tex; mode=display">
R=\frac{D_1}{F_1}·\frac{p_2}{p_1}+\frac{F_1-D_1}{F_1}</script><p>代入得</p>
<script type="math/tex; mode=display">
\begin{aligned}
F_{2} &=F_{1}(a R+1-a) \\
&=F_{1} a(\frac{D_{1}}{F_{1}}·\frac{p_{2}}{p_{1}}+\frac{F_{1}-D_{1}}{F_{1}})+(1-a) F_{1} \\
&=a(\frac{D_{1}·p_{2}}{p_{1}}+F_{1}-D_{1})+(1-a) F_{1} \\
&=F_{1}+a D_{1}(\frac{p_{2}}{p_{1}}-1)
\end{aligned}</script><p><strong>套利者的优化问题</strong></p>
<p>我们假设套利者以恒定的管理费率收取资金管理费。其目标是最大化第 3 期所收取的管理费。这等价于最大化第 3 期所掌管的资金量。</p>
<p>根据前面的设定，模型中只有一个不确定性的来源，就是第 2 期噪声交易者的认知误差——以 q 的概率进一步增大为 S；或是完全消失。当噪声交易者时刻 2 的认知误差完全消除时，资产价格会在第 2 期就回到 V。此时，无论投资者在第 2 时刻是将所有资金都投入资产，还是以现金方式留在手中，都会得到相同的时刻 3 资金量</p>
<script type="math/tex; mode=display">
W=F_1+aD_1(\frac V{p_1}-1)</script><p>当噪声交易者时刻 2 的认知误差增大时，时刻 3 的套利者资金量为</p>
<script type="math/tex; mode=display">
W=\frac V{p_2}[F_1+aD_1(\frac {p_2}{p_1}-1)]</script><p>于是，套利者在时刻 3 资金量的期望为</p>
<script type="math/tex; mode=display">
EW=(1-q)[F_1+aD_1(\frac V{p_1}-1)]+q\frac V{p_2}[F_1+aD_1(\frac {p_2}{p_1}-1)]</script><p>套利者是在约束条件 $0\le D_1\le F_1$ 的约束下，最大化目标函数式。这是带不等式约束的优化问题，可以用库恩—塔克方法求解。不过，用经济学直觉也能求出其解。期望资金量对 $D_1$ 的偏导数为</p>
<script type="math/tex; mode=display">
\frac{\partial E W}{\partial D_{1}}=a(1-q)(\frac{V}{p_{1}}-1)+a q \frac{V}{p_{2}}(\frac{p_{2}}{p_{1}}-1)</script><p>式中得这个偏导数代表了在时刻 1 边际上增加一块钱投资在资产上的资金，带给时刻 3 期望资金量的边际增量。它由两项组成。第一项是时刻 1 每增加一块钱在资产上，当 2 时刻资产价格回归基本面 V 时的收益。第二项是当 2 时刻噪声交易者的悲观认知误差进一步加剧时，在资产上投资带来的损失。</p>
<p><strong>套利者全投资情形</strong></p>
<p>为了简化分析，我们只研究套利者在 1 时刻把所有资金都投入资产的情形</p>
<script type="math/tex; mode=display">
p_1=V-S_1+F_1</script><script type="math/tex; mode=display">
F_2=F_{1}[1+a(\frac{p_{2}}{p_{1}}-1)]</script><p>这说明，1 时刻和 2 时刻之间资产价格涨幅越大，2 时刻套利者能支配的资金量越多。</p>
<p>我们来分析 2 时刻噪声交易者悲观认知进一步加大的情形。</p>
<script type="math/tex; mode=display">
\begin{aligned}
p_{2} &=V-S+F_{2} \\
&=V-S+F_{1}[1+a(\frac{p_{2}}{p_{1}}-1)]
\end{aligned}</script><p>从中可以解出</p>
<script type="math/tex; mode=display">
p_{2}=\frac{p_{1}[V-S+F_{1}(1-a)]}{p_{1}-a F_{1}}</script><p>我们关心的是在不同情况下，噪声交易者的认知偏差 S 对时刻 2 资产价格的影响。由上式可知</p>
<script type="math/tex; mode=display">
\frac{d p_{2}}{d S}=-\frac{p_{1}}{p_{1}-a F_{1}}<-1</script><p>而如果经济中完全不存在套利者（$F_1=0$），2 时刻资产价格为 $p_2=V-S$。此时 $dp_2/d_S=-1$。所以，当存在套利行为受限的套利者时，2 时刻的资产价格反而对噪声交易者的认知误差更加敏感（$dp_2/d_S$ 绝对值更大）。换句话说，受限套利者的存在反而加大了 2 时刻资产价格的波动。进一步说，套利者时刻 2 资金量对其投资业绩越敏感（a 越大），时刻 2 资产价格对噪声交易者的认知误差越敏感（$dp_2/d_S$ 绝对值越大）。而如果经济中存在不受资金约束的套利者（其资金量无限），那么不管 2 时刻噪声交易者的认知偏差是多少，2 时刻的资产价格将必定为 V，此时 $dp_2/d_S=0$。</p>
<p>上面这个结论用大白话来说就是，不受任何约束的套利者，可以将资产价格推回其基本面对应的水平，从而降低资产价格的波动。但如果套利者受到投资绩效的约束，那么他们的存在反而会放大资产价格的波动，反而让资产价格的波动性比不存在套利者时更高。之所以会这样，是因为噪声交易者所带来的短期不利价格波动让套利者短期亏损，从而让套利者的套利能力受损。这样，套利者对资产价格的需求也按照价格运动的方向来变化，从而放大了价格的波动。换言之，噪声交易者 2 时刻的认知偏差越大，就会让套利者在 1、2 两个时刻间的亏损越严重，从而导致套利者 2 时刻能够用来套利的资金量越小。这样，在最好套利机会出现的时候（2 时刻资产价格进一步下降时），套利的力量反而下降。</p>
<h3 id="23-2-非理性的信念与偏好"><a href="#23-2-非理性的信念与偏好" class="headerlink" title="23.2 非理性的信念与偏好"></a>23.2 非理性的信念与偏好</h3><p>心理学研究发现人通常表现出如下的行为偏差。</p>
<ul>
<li><strong>过度自信（overconfidence）：</strong>人们在做出判断时往往过度自信。比如，当人被要求对未来某些事件的发生给出概率预期时，人认为未来一定会发生的事情其实只有大概 80%的概率会出现。而那些人们认为一定不会发生的事情，发生的概率大概有 20%。</li>
<li><strong>乐观与一厢情愿（Optimism and wishful thinking）：</strong>研究者发现，当要求人们对自己的能力做出评价时，有超过 90%的人认为自己属于前 1/2。而这显然是不可能的。</li>
<li><strong>信念保持（belief perseverance）：</strong>当人们形成了自己的观点时，往往对这些观点过于坚持。人们一方面不太愿意去搜索那些与自己观点相反的证据。另一方面，就算发现了这样的证据，人们对待这些证据的态度也过于审慎。</li>
</ul>
<p>除了信念之外，行为金融学也提出了与期望效用理论不一样的偏好理论。正因为人对损失特别敏感，因而会表现出“损失规避”（loss aversion）的行为。相应地，人会对那些会带来确定收益的东西更加看重，从而表现出“确定性效应”（certainty effect）。人也讨厌那些未来概率分布不确定的赌博，表现出“模糊规避”（ambiguity aversion）。</p>
<p>而从逻辑上来看，行为金融学的发展还存在一个巨大障碍。对理性行为的最优对策是理性的行为。在金融市场中，如果你确定除你自己以外的所有交易者都是理性的，那么理性是你自己最好的选择。但是对非理性的行为偏差的最优对策不是非理性。因此，一旦行为金融学所引为前提的这些行为偏差为人所广泛知晓（行为金融学本身就起到了宣传这些行为偏差的作用），那么这些偏差是否会为其他理性投资者所利用，从而被打败和消失，存在很大疑问。</p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>笔记在此便结束了，接下来的次贷危机部分光几句话是无法说得经常的，建议通过原书以及作者的公开课来进行了解。</p>
<p>本课程虽然被称为入门课程，但是对经济学进行了一个系统地学习以及介绍。作为一个上了多年金融，但依旧有很多疑惑的地方的‘入门学生’，听完此课程可谓是打通了任通二脉，所有知识点一下联系在了一起。本课程比起数学推导其实更注重解释和联系现实。同时每讲课程引用了许多案例，并将中国股市背景结合在教学中，还推荐了许多文章给感兴趣的学生进一步阅读。可以说作者真的是尽心竭力地将我们往研究经济学这条路上引，并且可以说是非常成功！</p>
<p>最后再次感谢本书的作者以北大公开课的主讲人徐高教授，此次经济学之旅让我受益匪浅！如有机会定会大力推荐给其他经济学人！</p>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Finance/" class="category-chain-item">Finance</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Financial-Economics/">#Financial Economics</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>【课程】金融经济学二十五讲</div>
      <div>http://achlier.github.io/2022/01/27/金融经济学二十五讲/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Hailey</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>January 27, 2022</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>Licensed under</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/03/07/MLE_and_MAP/" title="【笔记】MLE and MAP">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">【笔记】MLE and MAP</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/06/20/Poisson_Process/" title="【笔记】Poisson Process">
                        <span class="hidden-mobile">【笔记】Poisson Process</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;Table of Contents</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>






  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
